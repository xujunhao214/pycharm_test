INFO     requests.session:session.py:58 [2025-07-23 10:14] 初始化环境会话: test | Base URL: https://uat.atcp.top/api
INFO     requests.session:session.py:63 [2025-07-23 10:14] 切换到Base URL: https://uat.atcp.top/api
INFO     lingkuan_UAT.conftest:conftest.py:65 [2025-07-23 10:14] 用例 test_vps/test_create.py::TestCreate::test_create_variety 使用默认URL登录: https://uat.atcp.top/api
INFO     lingkuan_UAT.conftest:conftest.py:75 登录尝试 1/3，生成MFA验证码: 656109
INFO     requests.session:session.py:101 [2025-07-23 10:14] 构建相对URL: https://uat.atcp.top/api + /sys/auth/login -> https://uat.atcp.top/api/sys/auth/login
INFO     requests.session:session.py:114 [2025-07-23 10:15:02.257] POST 请求开始: https://uat.atcp.top/api/sys/auth/login
INFO     requests.session:session.py:115 [2025-07-23 10:15:02.257] 请求参数: args=(), kwargs_keys=['data', 'json']
INFO     requests.session:session.py:123 [2025-07-23 10:15:02.257] JSON请求体: {'username': 'xujunhao', 'password': '04ab152ebbde10be0fb30a66e25d72b9730c20eb7c6bf0215c16a58286baf80911433932c3f6185c890748b28d8bdbe4037cfadbfff8a310feef9f1c125cc24ba6178a3fa91914a26266be288daa985c8768f1c1a2e1c9198cb68b4a9e06f9ef89b364e70255a1', 'captcha': '', 'key': '', 'secretKey': '', 'code': 656109, 'isMfaVerified': 1, 'isStartMfaVerify': 1}
INFO     requests.session:session.py:133 [2025-07-23 10:15:02.257] 请求完成: POST https://uat.atcp.top/api/sys/auth/login | 状态码: 200 | 耗时: 1449.54ms
INFO     requests.session:session.py:135 [2025-07-23 10:15:02.257] 响应头: {'Date': 'Wed, 23 Jul 2025 02:15:02 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'cloudflare', 'Vary': 'Accept-Encoding, Origin, Access-Control-Request-Method, Access-Control-Request-Headers', 'X-Content-Type-Options': 'nosniff', 'X-Xss-Protection': '0', 'Cache-Control': 'no-cache, no-store, max-age=0, must-revalidate', 'Pragma': 'no-cache', 'Expires': '0', 'Strict-Transport-Security': 'max-age=31536000', 'Content-Encoding': 'gzip', 'Cf-Cache-Status': 'DYNAMIC', 'Nel': '{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}', 'Report-To': '{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=QBDqiKSmnjcrxgfoAgGy1tKKzLs2v9GfaIFoTDVm6MJtXufEBASOOJsL3fFsA%2F8ViUpZ1%2Fsyt5vkWuseRmnNZRB67EoCvAH%2BWexNkg%3D%3D"}]}', 'CF-RAY': '9637aaee3d560a48-AMS', 'alt-svc': 'h3=":443"; ma=86400'}
INFO     requests.session:session.py:141 [2025-07-23 10:15:02.257] 响应JSON: {'code': 0, 'msg': 'success', 'data': {'accessTokenExpire': '2025-07-24 10:15:02', 'refreshTokenExpire': '2025-08-06 10:15:02', 'access_token': '66366a2a271a4cf4b47354e7241034c1', 'refresh_token': 'bebb924c57db4db983dd00a07e6f0061'}}
INFO     lingkuan_UAT.conftest:conftest.py:104 登录成功（第1次尝试），获取到token
INFO     lingkuan_UAT.commons.variable_manager:variable_manager.py:101 [2025-07-23 10:14] 运行时变量已保存
INFO     requests.session:session.py:101 [2025-07-23 10:14] 构建相对URL: https://uat.atcp.top/api + /mascontrol/variety/addTemplate -> https://uat.atcp.top/api/mascontrol/variety/addTemplate
INFO     requests.session:session.py:114 [2025-07-23 10:15:03.708] POST 请求开始: https://uat.atcp.top/api/mascontrol/variety/addTemplate
INFO     requests.session:session.py:115 [2025-07-23 10:15:03.708] 请求参数: args=(), kwargs_keys=['data', 'json', 'files']
INFO     requests.session:session.py:133 [2025-07-23 10:15:03.708] 请求完成: POST https://uat.atcp.top/api/mascontrol/variety/addTemplate | 状态码: 200 | 耗时: 617.94ms
INFO     requests.session:session.py:135 [2025-07-23 10:15:03.708] 响应头: {'Date': 'Wed, 23 Jul 2025 02:15:03 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'cloudflare', 'Vary': 'Accept-Encoding, Origin, Access-Control-Request-Method, Access-Control-Request-Headers', 'X-Content-Type-Options': 'nosniff', 'X-Xss-Protection': '0', 'Cache-Control': 'no-cache, no-store, max-age=0, must-revalidate', 'Pragma': 'no-cache', 'Expires': '0', 'Strict-Transport-Security': 'max-age=31536000', 'Content-Encoding': 'gzip', 'Cf-Cache-Status': 'DYNAMIC', 'Nel': '{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}', 'Report-To': '{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=IeSoWyXb%2FfO6Rb4pflrIAuuLDoRy%2BiyOBewXkvg9UBVkf6jDSJMxIolJTS2Psn4dfvXmCipQd4wMw6b1J17t5OWvklJdF42Og7IvNw%3D%3D"}]}', 'CF-RAY': '9637aaf45eb20a48-AMS', 'alt-svc': 'h3=":443"; ma=86400'}
INFO     requests.session:session.py:141 [2025-07-23 10:15:03.708] 响应JSON: {'code': 500, 'msg': '模板名称重复，请重新输入', 'data': None}
INFO     lingkuan_UAT.commons.api_base:api_base.py:66 [2025-07-23 10:14] POST请求（带文件）: /mascontrol/variety/addTemplate | 表单数据: {'templateName': '测试模版1'}
INFO     lingkuan_UAT.commons.api_base:api_base.py:211 [2025-07-23 10:14] 响应状态码: 200 | URL: https://uat.atcp.top/api/mascontrol/variety/addTemplate
INFO     lingkuan_UAT.commons.api_base:api_base.py:212 [2025-07-23 10:14] 响应详情: 头信息={'Date': 'Wed, 23 Jul 2025 02:15:03 GMT', 'Content-Type': 'application/json', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'cloudflare', 'Vary': 'Accept-Encoding, Origin, Access-Control-Request-Method, Access-Control-Request-Headers', 'X-Content-Type-Options': 'nosniff', 'X-Xss-Protection': '0', 'Cache-Control': 'no-cache, no-store, max-age=0, must-revalidate', 'Pragma': 'no-cache', 'Expires': '0', 'Strict-Transport-Security': 'max-age=31536000', 'Content-Encoding': 'gzip', 'Cf-Cache-Status': 'DYNAMIC', 'Nel': '{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}', 'Report-To': '{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=IeSoWyXb%2FfO6Rb4pflrIAuuLDoRy%2BiyOBewXkvg9UBVkf6jDSJMxIolJTS2Psn4dfvXmCipQd4wMw6b1J17t5OWvklJdF42Og7IvNw%3D%3D"}]}', 'CF-RAY': '9637aaf45eb20a48-AMS', 'alt-svc': 'h3=":443"; ma=86400'} | 内容={"code":500,"msg":"模板名称重复，请重新输入","data":null}
INFO     lingkuan_UAT.commons.api_base:api_base.py:80 [2025-07-23 10:14] 请求后等待 3 秒
ERROR    lingkuan_UAT.commons.api_base:api_base.py:253 [2025-07-23 10:14] JSON断言失败: 响应msg字段应为success
URL: https://uat.atcp.top/api/mascontrol/variety/addTemplate
JSON路径: $.msg
实际值: 模板名称重复，请重新输入
期望值: success | 路径: $.msg | 响应: {"code":500,"msg":"模板名称重复，请重新输入","data":null}