{"name": "数据库校验-策略备注生效", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取策略备注\n\n实际: ceshikaicangbeizhu8rrb2036\n操作: ==\n预期: ceshiceluebeizhuiikq2075", "trace": "self = <lingkuanMT5_1029.test_cloudTrader.test_cloudfixed_annotations.TestCloudremark.TestCloudStrategyOrderRemark4 object at 0x000001DABD1B0B80>\nclass_random_str = 'iikq2075'\nvar_manager = <lingkuanMT5_1029.commons.variable_manager.VariableManager object at 0x000001DABD234670>\ndb_transaction = <pymysql.connections.Connection object at 0x000001DABD3890D0>\n\n    @allure.title(\"数据库校验-策略备注生效\")\n    def test_scenario1_verify_remark(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"查询订单备注信息\"):\n            MT5cloudTrader_user_accounts_4 = var_manager.get_variable(\"MT5cloudTrader_user_accounts_4\")\n            sql = \"\"\"\n                SELECT fod.account, fod.comment, foi.operation_type, foi.create_time\n                FROM follow_order_detail fod\n                INNER JOIN follow_order_instruct foi\n                    ON foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci\n                WHERE foi.operation_type = %s AND fod.account = %s\n            \"\"\"\n            params = ('0', MT5cloudTrader_user_accounts_4)\n    \n            db_data = self.query_database_with_time(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"foi.create_time\"\n            )\n    \n        with allure.step(\"验证备注信息\"):\n            comment = db_data[0][\"comment\"]\n>           self.verify_data(\n                actual_value=comment,\n                expected_value=f\"ceshiceluebeizhu{class_random_str}\",\n                op=CompareOp.EQ,\n                use_isclose=False,\n                message=f\"预期：跟单取策略备注\",\n                attachment_name=\"备注详情\"\n            )\n\ntest_cloudTrader\\test_cloudfixed_annotations.py:692: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuanMT5_1029.test_cloudTrader.test_cloudfixed_annotations.TestCloudremark.TestCloudStrategyOrderRemark4 object at 0x000001DABD1B0B80>\nactual_value = 'ceshikaicangbeizhu8rrb2036'\nexpected_value = 'ceshiceluebeizhuiikq2075', op = <CompareOp.EQ: '=='>\nmessage = '预期：跟单取策略备注', attachment_name = '备注详情', attachment_type = 'text/plain'\nuse_isclose = False, rel_tol = 1e-09, abs_tol = 0\n\n    def verify_data(\n            self,\n            actual_value,\n            expected_value,\n            op: CompareOp,\n            message: str,\n            attachment_name: str,\n            attachment_type=\"text/plain\",\n            use_isclose=True,  # 新增参数：是否启用math.isclose容错（默认启用）\n            rel_tol=1e-9,  # 相对容差（仅当use_isclose=True时生效）\n            abs_tol=0  # 绝对容差（仅当use_isclose=True时生效）\n    ):\n        \"\"\"\n        通用数据校验函数，支持浮点容错比较\n        :param actual_value: 实际值\n        :param expected_value: 预期值\n        :param op: 比较操作，CompareOp 枚举\n        :param message: 校验失败时的提示信息\n        :param attachment_name: Allure 附件名称\n        :param attachment_type: Allure 附件类型，默认文本\n        :param use_isclose: 是否使用math.isclose进行浮点容错比较\n        :param rel_tol: 相对容差（默认1e-9）\n        :param abs_tol: 绝对容差（默认0.0）\n        其他参数同前\n        \"\"\"\n        with allure.step(f\"校验: {message}\"):\n            result = False\n            try:\n                # 处理浮点容错比较（仅对EQ/NE操作生效）\n                if use_isclose and op in (CompareOp.EQ, CompareOp.NE):\n                    if not (isinstance(actual_value, (int, float)) and\n                            isinstance(expected_value, (int, float))):\n                        # 非数字类型自动禁用isclose，避免报错\n                        use_isclose = False\n                        logging.warning(f\"自动禁用isclose：非数字类型比较（实际值类型：{type(actual_value)}）\")\n    \n                    # 计算isclose结果\n                    is_close = math.isclose(\n                        actual_value,\n                        expected_value,\n                        rel_tol=rel_tol,\n                        abs_tol=abs_tol\n                    )\n                    # 根据操作类型取反\n                    result = is_close if op == CompareOp.EQ else not is_close\n    \n                # 普通比较逻辑\n                else:\n                    if op == CompareOp.EQ:\n                        result = actual_value == expected_value\n                    elif op == CompareOp.NE:\n                        result = actual_value != expected_value\n                    elif op == CompareOp.GT:\n                        result = actual_value > expected_value\n                    elif op == CompareOp.LT:\n                        result = actual_value < expected_value\n                    elif op == CompareOp.GE:\n                        result = actual_value >= expected_value\n                    elif op == CompareOp.LE:\n                        result = actual_value <= expected_value\n                    elif op == CompareOp.IN:\n                        result = actual_value in expected_value\n                    elif op == CompareOp.NOT_IN:\n                        result = actual_value not in expected_value\n    \n            except TypeError as e:\n                pytest.fail(\n                    f\"校验类型错误: {str(e)}\\n实际值类型: {type(actual_value)}, 预期值类型: {type(expected_value)}\")\n    \n            # 生成详细提示信息（包含容差参数）\n            detail_msg = (\n                f\"\\n实际: {actual_value}\\n\"\n                f\"操作: {op.value}\\n\"\n                f\"预期: {expected_value}\\n\"\n            )\n    \n            # 添加allure.attach，将信息写入报告\n            allure.attach(\n                detail_msg,  # 附件内容\n                name=attachment_name,  # 附件名称（来自参数）\n                attachment_type=attachment_type  # 附件类型\n            )\n    \n            if not result:\n>               pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\nE               Failed: 校验失败: 预期：跟单取策略备注\nE               \nE               实际: ceshikaicangbeizhu8rrb2036\nE               操作: ==\nE               预期: ceshiceluebeizhuiikq2075\n\ncommons\\api_base.py:1398: Failed"}, "description": "\n        ### 测试说明\n        - 前置条件：有云策略和云跟单\n          1. 修改云策略信息-关闭跟单备注\n          2. 修改跟单账号-无固定注释\n          3. 云策略账号复制下单\n          4. 数据库校验-策略备注生效\n          5. 策略账号平仓\n        - 预期结果：跟单取策略备注\n        ", "steps": [{"name": "查询订单备注信息", "status": "passed", "steps": [{"name": "轮询等待数据稳定（超时: 30秒，稳定期: 2秒）", "status": "passed", "steps": [{"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "6b99e542-a98e-491d-bb23-f2ae31084058-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "129fec7f-e4ee-44bf-ae08-b99e6e010fea-attachment.txt", "type": "text/plain"}], "start": 1761732080526, "stop": 1761732080583}], "attachments": [{"name": "查询条件", "source": "753f70a4-8246-433d-9349-ae715ce6a6d2-attachment.txt", "type": "text/plain"}], "start": 1761732080525, "stop": 1761732080583}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "e0704227-3d24-4727-99f6-12720182f1fd-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "807e72a1-c956-4a10-9ece-fcc27777201a-attachment.txt", "type": "text/plain"}], "start": 1761732080583, "stop": 1761732080583}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "判断结果", "source": "9837cc43-4ee4-4a95-b9d4-30ab89ce53b7-attachment.txt", "type": "text/plain"}], "start": 1761732080583, "stop": 1761732080583}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "874c0947-d489-4101-bf78-2381218c2336-attachment.txt", "type": "text/plain"}], "start": 1761732080583, "stop": 1761732080584}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "604a60d2-1f1a-4f25-bae6-a1d4c50179cf-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "b23ddf07-b406-4bf1-a861-1f2ac1cfd2f0-attachment.txt", "type": "text/plain"}], "start": 1761732082660, "stop": 1761732082720}], "attachments": [{"name": "查询条件", "source": "a37f534c-3ca6-4316-8bc9-b0fae4e63ab7-attachment.txt", "type": "text/plain"}], "start": 1761732082659, "stop": 1761732082720}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "17ee3242-043b-4c21-932f-70c4b8906f38-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "cc5c0f48-d2af-4340-9f1d-24f0fbb7007f-attachment.txt", "type": "text/plain"}], "start": 1761732082720, "stop": 1761732082722}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "b66f6cfd-6fca-4987-b428-3ef49cdf5aa9-attachment.txt", "type": "text/plain"}], "start": 1761732082722, "stop": 1761732082722}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "01c69fcb-401f-4aa1-9053-19d37a0d096c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "112e43d1-f976-484e-81f3-6fcfa97b4838-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "384479c6-1ea6-4498-9944-45797ace7f38-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "0d9f35b4-717a-44b5-b57e-07d7d1205f9c-attachment.txt", "type": "text/plain"}], "start": 1761732082723, "stop": 1761732082725}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "484cdc26-cb04-4208-a860-bdcf5ed6ddf7-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "87fe8a86-c1a9-48a3-80bb-bc72e3ab7399-attachment.txt", "type": "text/plain"}], "start": 1761732084777, "stop": 1761732084841}], "attachments": [{"name": "查询条件", "source": "f4f33fa8-0c41-4544-8252-039a53a7872d-attachment.txt", "type": "text/plain"}], "start": 1761732084776, "stop": 1761732084841}, {"name": "轮询中（已等待4.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "7e66a980-9c2e-4e8a-9ee8-fa2abfb26412-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e19b8076-f7ea-4991-b282-aa9d6c6f4b15-attachment.txt", "type": "text/plain"}], "start": 1761732084841, "stop": 1761732084841}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "6a26aa62-cf63-4740-95ff-2eb50633529c-attachment.txt", "type": "text/plain"}], "start": 1761732084841, "stop": 1761732084842}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "13f97f95-6ec0-4fc3-8b07-f080a00c1eba-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "0b8d84f6-7072-4202-985d-bbd970f2968f-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "07d1dd88-e29d-4f6c-a38d-44493528b4df-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "353f512e-3364-4df4-92e3-508b91c956ff-attachment.txt", "type": "text/plain"}], "start": 1761732084842, "stop": 1761732084843}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "3066aa6d-7ecb-4f6a-96c9-19c295547b6b-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "f2c54ae4-b601-4dfd-8082-4c4699bea834-attachment.txt", "type": "text/plain"}], "start": 1761732086901, "stop": 1761732086959}], "attachments": [{"name": "查询条件", "source": "82bf70b1-366b-43b4-925f-dc2b3bab6422-attachment.txt", "type": "text/plain"}], "start": 1761732086901, "stop": 1761732086959}, {"name": "轮询中（已等待6.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "5a145492-9836-4489-9114-f37e6b06a191-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c5e9490f-15a3-4359-9d44-af7918c3b393-attachment.txt", "type": "text/plain"}], "start": 1761732086959, "stop": 1761732086960}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "c633f260-371c-4c41-ba1f-378c405b6328-attachment.txt", "type": "text/plain"}], "start": 1761732086960, "stop": 1761732086960}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "2c6811c4-8e2c-4a4d-a7ac-eef93c987e24-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5d31c18c-19fe-4a2d-84cf-d9531f99e5d4-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "677def3b-a940-4979-859a-623018db58ca-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "80f0bde0-b0d9-4288-8361-b9f253d79f8f-attachment.txt", "type": "text/plain"}], "start": 1761732086961, "stop": 1761732086962}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "cc24f0ba-3777-4803-a498-979636c2fe95-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c869431e-f103-4fbc-9b4a-0a16d63b4086-attachment.txt", "type": "text/plain"}], "start": 1761732089023, "stop": 1761732089082}], "attachments": [{"name": "查询条件", "source": "c55b660b-8f34-4be5-9d54-431dd3020dc9-attachment.txt", "type": "text/plain"}], "start": 1761732089022, "stop": 1761732089082}, {"name": "轮询中（已等待8.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b059848c-aec4-4ebe-a7e5-0662fd1ae77e-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "61a9f3ad-4243-461e-ada7-f39920b6400b-attachment.txt", "type": "text/plain"}], "start": 1761732089082, "stop": 1761732089083}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "ea96a1e6-d126-4b4f-8d15-a8d73a289169-attachment.txt", "type": "text/plain"}], "start": 1761732089083, "stop": 1761732089083}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "af159a23-c41b-4c3d-b259-7e9a221b0db8-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d83bdd37-c224-43e5-a092-8ecc130dccf1-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "7ec159d7-a261-4715-a511-9bdedd38ce0f-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "0dd0af76-76b4-4720-a1b0-591da9c1defe-attachment.txt", "type": "text/plain"}], "start": 1761732089083, "stop": 1761732089084}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "5465efde-e560-4189-8c21-8c4a7f6e7165-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "34423939-82d6-427a-abfb-2f712608db41-attachment.txt", "type": "text/plain"}], "start": 1761732091136, "stop": 1761732091194}], "attachments": [{"name": "查询条件", "source": "c22c8538-e978-4c71-8a8f-05af4504f0bf-attachment.txt", "type": "text/plain"}], "start": 1761732091135, "stop": 1761732091194}, {"name": "轮询中（已等待10.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "19d02583-5099-4329-aae2-99ee464117e4-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "940d015f-187a-4b88-9f01-d2d2ed7582d6-attachment.txt", "type": "text/plain"}], "start": 1761732091194, "stop": 1761732091194}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "cb3ab46f-1c18-490d-84a4-c482371e0640-attachment.txt", "type": "text/plain"}], "start": 1761732091194, "stop": 1761732091195}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "16771c51-f6a6-447e-a367-7654ea4b13c6-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5f483841-59cb-44a5-b35f-c92c4e19e6c9-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "3c3dc228-c0f5-48c6-b751-c5b98bd5bf56-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "ea32f028-e306-4224-a120-6b397fd383f2-attachment.txt", "type": "text/plain"}], "start": 1761732091195, "stop": 1761732091196}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "14275170-83c8-48ff-acd4-362b3ad9bfdc-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "fe66a504-68c7-4ed3-948b-410cfc40edb6-attachment.txt", "type": "text/plain"}], "start": 1761732093248, "stop": 1761732093308}], "attachments": [{"name": "查询条件", "source": "f83014b0-c19c-487c-b80a-56860d344459-attachment.txt", "type": "text/plain"}], "start": 1761732093248, "stop": 1761732093308}, {"name": "轮询中（已等待12.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "76dd5be2-353e-486e-923a-6a3803b75c5b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "45f97e0e-1527-4481-bd50-608ab4bfa14a-attachment.txt", "type": "text/plain"}], "start": 1761732093308, "stop": 1761732093309}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "2b526cf7-6957-4957-890a-42df1d02680d-attachment.txt", "type": "text/plain"}], "start": 1761732093309, "stop": 1761732093309}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "6498fbc2-3a98-4af8-8c78-1134c8ab2007-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ab525246-b447-4e7f-a85d-db99a2d825b9-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "1d25919b-7028-4c24-abb0-a08621fda713-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "15aae66c-9fc4-4c9c-a9a3-95c41d091a9d-attachment.txt", "type": "text/plain"}], "start": 1761732093309, "stop": 1761732093310}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "3341c325-9504-4747-b821-3c9843f2a731-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "1c2e91cc-209f-46a7-92c7-c5e2a45f7d0f-attachment.txt", "type": "text/plain"}], "start": 1761732095366, "stop": 1761732095426}], "attachments": [{"name": "查询条件", "source": "74470df8-837c-451e-a1b3-94d2f956eed8-attachment.txt", "type": "text/plain"}], "start": 1761732095366, "stop": 1761732095426}, {"name": "轮询中（已等待14.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "795a2a99-3d7b-48d9-a73a-a38fa8e21dbd-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "923ed213-0ee5-4a0a-9215-81e18942ea48-attachment.txt", "type": "text/plain"}], "start": 1761732095426, "stop": 1761732095427}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "db2df7fe-d754-4d78-848b-9c6d4249203b-attachment.txt", "type": "text/plain"}], "start": 1761732095427, "stop": 1761732095427}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "4852b7b7-f91d-4e05-b2dc-1c06ae3110ad-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "23cd66ac-a238-477c-92f7-23f4f0635e05-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "3de7eac6-044a-4426-9605-4fda33c19d9e-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "e8d5753d-5378-4e65-8dd3-e530154e0933-attachment.txt", "type": "text/plain"}], "start": 1761732095428, "stop": 1761732095429}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "5a5bf1a9-3426-44cc-97bc-1a1077e74384-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "219e7027-2e81-4254-b862-c922b0802a0c-attachment.txt", "type": "text/plain"}], "start": 1761732097489, "stop": 1761732097548}], "attachments": [{"name": "查询条件", "source": "4bc2366f-d3f7-42ca-ba7d-425a8d4dc160-attachment.txt", "type": "text/plain"}], "start": 1761732097488, "stop": 1761732097548}, {"name": "轮询中（已等待17.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "900c901c-542e-436d-9364-93a5fdd756fc-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2c6e9881-f5cd-41e7-8d62-bca072aa9b9a-attachment.txt", "type": "text/plain"}], "start": 1761732097548, "stop": 1761732097549}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "784cbec6-1322-4dc0-a535-428ffcfb91bb-attachment.txt", "type": "text/plain"}], "start": 1761732097549, "stop": 1761732097549}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "4cdc944f-23f7-49e0-9c1b-297a817f8d2a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5d1fffab-e55c-4641-87b6-6de219db53af-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "ba0d8af1-7d77-4a26-a0b6-c764b061a909-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "c245a285-24e3-4d34-b55c-d82bd9f86b6f-attachment.txt", "type": "text/plain"}], "start": 1761732097549, "stop": 1761732097550}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "5137458a-6a73-46a1-b6d5-b2033c32cbcd-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "eabecda7-a129-4c54-8d87-72fb6b50ebfe-attachment.txt", "type": "text/plain"}], "start": 1761732099599, "stop": 1761732099658}], "attachments": [{"name": "查询条件", "source": "8fc9b842-2184-4be9-99cf-401fd8a18294-attachment.txt", "type": "text/plain"}], "start": 1761732099598, "stop": 1761732099658}, {"name": "轮询中（已等待19.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "d94eec84-9704-4628-b9d3-916abe209eec-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "20d24b88-9b96-41fb-9183-afd4e5d37628-attachment.txt", "type": "text/plain"}], "start": 1761732099658, "stop": 1761732099659}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "ebf0189b-9eda-4d25-a4e4-714ffbd774c7-attachment.txt", "type": "text/plain"}], "start": 1761732099659, "stop": 1761732099659}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "ab2b461f-bd13-456a-b118-775ca99e1d3d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "70761600-30a4-4a90-b27c-3b6a6d2a49ef-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "19d4527f-6afb-4ffc-835d-c106be93db57-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "b4413e78-4524-4ecd-b6c3-391ca1ee3cdb-attachment.txt", "type": "text/plain"}], "start": 1761732099659, "stop": 1761732099660}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "b4154ac2-1f1d-4716-88ab-92fe4737c2d3-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "b066d1fb-17f9-4469-9e64-34b2aabbf4de-attachment.txt", "type": "text/plain"}], "start": 1761732101718, "stop": 1761732101794}], "attachments": [{"name": "查询条件", "source": "23c6c962-99c9-4d5e-95f9-1aa250d5492a-attachment.txt", "type": "text/plain"}], "start": 1761732101717, "stop": 1761732101794}, {"name": "轮询中（已等待21.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "22910aca-b7c9-46b8-93d6-ff2bba3a6f7b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "0d493f37-eeb0-409f-b562-b1d29c7b1991-attachment.txt", "type": "text/plain"}], "start": 1761732101794, "stop": 1761732101795}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "43c2b451-f0e0-4481-8540-62d799ec3ee8-attachment.txt", "type": "text/plain"}], "start": 1761732101795, "stop": 1761732101796}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "cefc1409-c51a-4eab-a7af-7686508c49f4-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "8d336b4a-021d-450a-8aad-3c9f97711d3b-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "c1f1e387-7e8a-4345-b7af-afd36eba5054-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "97770a6c-9f80-4c62-a279-6502751d63c2-attachment.txt", "type": "text/plain"}], "start": 1761732101796, "stop": 1761732101796}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "1cb15dbf-30ba-4618-b9b4-d1fa6666eaf3-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ce962033-b742-4593-ae9d-941c0fd98c30-attachment.txt", "type": "text/plain"}], "start": 1761732103857, "stop": 1761732103926}], "attachments": [{"name": "查询条件", "source": "84f45951-f49a-4c90-98c0-52c994f5836b-attachment.txt", "type": "text/plain"}], "start": 1761732103856, "stop": 1761732103926}, {"name": "轮询中（已等待23.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "29740f2c-e404-4bf1-9165-9d24c54852f8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d429a4c3-9f0d-4ab1-a72f-2f5ae609674d-attachment.txt", "type": "text/plain"}], "start": 1761732103926, "stop": 1761732103927}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "7e152e24-d7ce-443e-9e31-641a6ec9ca28-attachment.txt", "type": "text/plain"}], "start": 1761732103927, "stop": 1761732103927}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "508f24f4-27fc-47e9-9a74-7d14828a3b27-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c15cc22c-2361-4dc0-8150-5579fa25f016-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "2c154595-b190-4805-8861-917dc52fe9d9-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "c5605d47-6ce3-4697-be42-d7d1cdcdee86-attachment.txt", "type": "text/plain"}], "start": 1761732103927, "stop": 1761732103928}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "79d1a9e0-ee52-410e-8a2c-18e920064296-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "0e95c922-09ea-46ce-8cab-1d23bfe1020d-attachment.txt", "type": "text/plain"}], "start": 1761732105988, "stop": 1761732106048}], "attachments": [{"name": "查询条件", "source": "8c379fd1-3977-4514-8ea5-cf18a4f32d62-attachment.txt", "type": "text/plain"}], "start": 1761732105987, "stop": 1761732106048}, {"name": "轮询中（已等待25.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ed27193c-81db-4bf5-9a7a-422cf4d55379-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "fbad65ee-1781-4a73-b53a-e6d741ea863a-attachment.txt", "type": "text/plain"}], "start": 1761732106048, "stop": 1761732106049}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "237e08e0-7828-443d-a7dc-6a284e6fccd2-attachment.txt", "type": "text/plain"}], "start": 1761732106049, "stop": 1761732106049}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "517b2685-2bda-4a6e-af5e-dd0c0705d36d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5b0a4527-cbe2-4a91-8d15-1a02b74674c8-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "63ca96ba-bf9f-49be-9e6a-06ce1fc8fe76-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "cc792464-17e3-4373-8b4c-6944178bfd59-attachment.txt", "type": "text/plain"}], "start": 1761732106050, "stop": 1761732106051}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "b04b8cad-e608-433b-86ae-79edce2a7c1d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d0c20043-40f0-41a4-9acf-c20ca70c8422-attachment.txt", "type": "text/plain"}], "start": 1761732108098, "stop": 1761732108156}], "attachments": [{"name": "查询条件", "source": "a12d7b13-0ce0-450b-b21c-38f2c94e967e-attachment.txt", "type": "text/plain"}], "start": 1761732108097, "stop": 1761732108156}, {"name": "轮询中（已等待27.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "1008003a-8b39-4ecd-8eeb-9245756b5fd9-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ef1651c9-916b-424e-b93a-7c776d4fc010-attachment.txt", "type": "text/plain"}], "start": 1761732108156, "stop": 1761732108157}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "fb281d39-ef58-45a3-983a-acccf5d3f99e-attachment.txt", "type": "text/plain"}], "start": 1761732108157, "stop": 1761732108157}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "a44255ee-2827-42e3-87b0-168d44e4d9a2-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "33981eaa-6e15-4159-b28e-31ad717b3d15-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "1ec77cbb-b31b-4750-82d2-b9b96e5369d7-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "d0939096-76f3-4d2c-a7c5-0c23035ee151-attachment.txt", "type": "text/plain"}], "start": 1761732108157, "stop": 1761732108158}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "64fe80f4-48de-4188-a930-f8caa48cde7e-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "76a1c2f7-8bba-4986-8c17-f6f7b953c701-attachment.txt", "type": "text/plain"}], "start": 1761732110206, "stop": 1761732110269}], "attachments": [{"name": "查询条件", "source": "57b3fbea-b9a7-4997-a5c1-4172b41acb7a-attachment.txt", "type": "text/plain"}], "start": 1761732110205, "stop": 1761732110269}, {"name": "轮询中（已等待29.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "a7c05792-243a-4321-996e-e798d44a2392-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "4022539c-99b2-4378-a977-f33848a9c80c-attachment.txt", "type": "text/plain"}], "start": 1761732110270, "stop": 1761732110270}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "02978d99-7d3d-4f6e-a7f1-42f88023208a-attachment.txt", "type": "text/plain"}], "start": 1761732110270, "stop": 1761732110270}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "b4b4de7f-9dc3-404a-b677-b3263c87424f-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "b866cacf-8a10-494f-915d-6a61fb0fd357-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "5ffb1b1b-0c85-4392-b3bc-4e51e2da6119-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "ddd6a03c-8421-42e5-b938-34ef553cdef5-attachment.txt", "type": "text/plain"}], "start": 1761732110270, "stop": 1761732110271}, {"name": "轮询超时处理", "status": "passed", "attachments": [{"name": "处理说明", "source": "c5d0dad0-1e59-4446-b6e3-0ee975950538-attachment.txt", "type": "text/plain"}], "start": 1761732112281, "stop": 1761732112282}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "6d6ff907-8bca-4350-8420-e8f7f1978a2a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "e27b2bea-73f4-41ea-9fda-0222a961be3d-attachment.txt", "type": "text/plain"}, {"name": "查询结果（共3条，显示前50条）", "source": "e69c8ef9-d0b9-4768-af80-164e04dbd625-attachment.json", "type": "application/json"}], "start": 1761732112282, "stop": 1761732112341}], "attachments": [{"name": "查询条件", "source": "512be2ec-b087-4082-bc49-22e8341e21c5-attachment.txt", "type": "text/plain"}], "start": 1761732112282, "stop": 1761732112341}, {"name": "数据库查询结果（最终稳定结果）", "status": "passed", "attachments": [{"name": "查询结果（共3条，显示前50条）", "source": "02975742-9940-42af-86ba-200c5a8e3b32-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "eea97541-3815-40a7-99f2-f07e53d2afb0-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d5d94647-c26e-42cc-8060-80ae2e0d2b9a-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "37622419-ec7c-4f48-bf19-53cdcb4c48ff-attachment.txt", "type": "text/plain"}], "start": 1761732112342, "stop": 1761732112343}], "start": 1761732080479, "stop": 1761732112343}], "start": 1761732080478, "stop": 1761732112343}, {"name": "验证备注信息", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取策略备注\n\n实际: ceshikaicangbeizhu8rrb2036\n操作: ==\n预期: ceshiceluebeizhuiikq2075\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\test_cloudTrader\\test_cloudfixed_annotations.py\", line 692, in test_scenario1_verify_remark\n    self.verify_data(\n  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 1398, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "steps": [{"name": "校验: 预期：跟单取策略备注", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取策略备注\n\n实际: ceshikaicangbeizhu8rrb2036\n操作: ==\n预期: ceshiceluebeizhuiikq2075\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 1398, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "attachments": [{"name": "备注详情", "source": "933871c7-3953-45a1-8f16-5d39b53ec7f6-attachment.attach", "type": "text/plain"}], "start": 1761732112343, "stop": 1761732112343}], "start": 1761732112343, "stop": 1761732112344}], "attachments": [{"name": "log", "source": "a0397cb0-ed79-4d4a-a537-d565f5e924ee-attachment.txt", "type": "text/plain"}], "start": 1761732080478, "stop": 1761732112344, "uuid": "4f3c339c-c67c-45a2-98d7-b57555ad623b", "historyId": "0a963662c8023ea92652ef922414b274", "testCaseId": "0a963662c8023ea92652ef922414b274", "fullName": "test_cloudTrader.test_cloudfixed_annotations.TestCloudStrategyOrderRemark4#test_scenario1_verify_remark", "labels": [{"name": "feature", "value": "跟随云策略账号订单备注的场景校验"}, {"name": "story", "value": "场景4：交易下单-策略有固定注释，跟单无固定注释"}, {"name": "parentSuite", "value": "test_cloudTrader"}, {"name": "suite", "value": "test_cloudfixed_annotations"}, {"name": "subSuite", "value": "TestCloudremark"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "80100-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cloudTrader.test_cloudfixed_annotations"}]}