{"name": "数据库校验-跟单备注生效", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取自身备注\n\n实际: ceshiceluebeizhuiikq2075\n操作: ==\n预期: ceshigendanbeizhuwwhv2114", "trace": "self = <lingkuanMT5_1029.test_cloudTrader.test_cloudfixed_annotations.TestCloudremark.TestCloudStrategyOrderRemark5 object at 0x000001DABD1DFE80>\nclass_random_str = 'wwhv2114'\nvar_manager = <lingkuanMT5_1029.commons.variable_manager.VariableManager object at 0x000001DABD234670>\ndb_transaction = <pymysql.connections.Connection object at 0x000001DABD25AFA0>\n\n    @allure.title(\"数据库校验-跟单备注生效\")\n    def test_scenario2_verify_remark(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"查询订单备注信息\"):\n            MT5cloudTrader_user_accounts_4 = var_manager.get_variable(\"MT5cloudTrader_user_accounts_4\")\n            sql = \"\"\"\n                SELECT fod.account, fod.comment, foi.operation_type, foi.create_time\n                FROM follow_order_detail fod\n                INNER JOIN follow_order_instruct foi\n                    ON foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci\n                WHERE foi.operation_type = %s AND fod.account = %s\n            \"\"\"\n            params = ('0', MT5cloudTrader_user_accounts_4)\n    \n            db_data = self.query_database_with_time(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"foi.create_time\"\n            )\n    \n        with allure.step(\"验证备注信息\"):\n            comment = db_data[0][\"comment\"]\n>           self.verify_data(\n                actual_value=comment,\n                expected_value=f\"ceshigendanbeizhu{class_random_str}\",\n                op=CompareOp.EQ,\n                use_isclose=False,\n                message=\"预期：跟单取自身备注\",\n                attachment_name=\"备注详情\"\n            )\n\ntest_cloudTrader\\test_cloudfixed_annotations.py:860: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuanMT5_1029.test_cloudTrader.test_cloudfixed_annotations.TestCloudremark.TestCloudStrategyOrderRemark5 object at 0x000001DABD1DFE80>\nactual_value = 'ceshiceluebeizhuiikq2075'\nexpected_value = 'ceshigendanbeizhuwwhv2114', op = <CompareOp.EQ: '=='>\nmessage = '预期：跟单取自身备注', attachment_name = '备注详情', attachment_type = 'text/plain'\nuse_isclose = False, rel_tol = 1e-09, abs_tol = 0\n\n    def verify_data(\n            self,\n            actual_value,\n            expected_value,\n            op: CompareOp,\n            message: str,\n            attachment_name: str,\n            attachment_type=\"text/plain\",\n            use_isclose=True,  # 新增参数：是否启用math.isclose容错（默认启用）\n            rel_tol=1e-9,  # 相对容差（仅当use_isclose=True时生效）\n            abs_tol=0  # 绝对容差（仅当use_isclose=True时生效）\n    ):\n        \"\"\"\n        通用数据校验函数，支持浮点容错比较\n        :param actual_value: 实际值\n        :param expected_value: 预期值\n        :param op: 比较操作，CompareOp 枚举\n        :param message: 校验失败时的提示信息\n        :param attachment_name: Allure 附件名称\n        :param attachment_type: Allure 附件类型，默认文本\n        :param use_isclose: 是否使用math.isclose进行浮点容错比较\n        :param rel_tol: 相对容差（默认1e-9）\n        :param abs_tol: 绝对容差（默认0.0）\n        其他参数同前\n        \"\"\"\n        with allure.step(f\"校验: {message}\"):\n            result = False\n            try:\n                # 处理浮点容错比较（仅对EQ/NE操作生效）\n                if use_isclose and op in (CompareOp.EQ, CompareOp.NE):\n                    if not (isinstance(actual_value, (int, float)) and\n                            isinstance(expected_value, (int, float))):\n                        # 非数字类型自动禁用isclose，避免报错\n                        use_isclose = False\n                        logging.warning(f\"自动禁用isclose：非数字类型比较（实际值类型：{type(actual_value)}）\")\n    \n                    # 计算isclose结果\n                    is_close = math.isclose(\n                        actual_value,\n                        expected_value,\n                        rel_tol=rel_tol,\n                        abs_tol=abs_tol\n                    )\n                    # 根据操作类型取反\n                    result = is_close if op == CompareOp.EQ else not is_close\n    \n                # 普通比较逻辑\n                else:\n                    if op == CompareOp.EQ:\n                        result = actual_value == expected_value\n                    elif op == CompareOp.NE:\n                        result = actual_value != expected_value\n                    elif op == CompareOp.GT:\n                        result = actual_value > expected_value\n                    elif op == CompareOp.LT:\n                        result = actual_value < expected_value\n                    elif op == CompareOp.GE:\n                        result = actual_value >= expected_value\n                    elif op == CompareOp.LE:\n                        result = actual_value <= expected_value\n                    elif op == CompareOp.IN:\n                        result = actual_value in expected_value\n                    elif op == CompareOp.NOT_IN:\n                        result = actual_value not in expected_value\n    \n            except TypeError as e:\n                pytest.fail(\n                    f\"校验类型错误: {str(e)}\\n实际值类型: {type(actual_value)}, 预期值类型: {type(expected_value)}\")\n    \n            # 生成详细提示信息（包含容差参数）\n            detail_msg = (\n                f\"\\n实际: {actual_value}\\n\"\n                f\"操作: {op.value}\\n\"\n                f\"预期: {expected_value}\\n\"\n            )\n    \n            # 添加allure.attach，将信息写入报告\n            allure.attach(\n                detail_msg,  # 附件内容\n                name=attachment_name,  # 附件名称（来自参数）\n                attachment_type=attachment_type  # 附件类型\n            )\n    \n            if not result:\n>               pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\nE               Failed: 校验失败: 预期：跟单取自身备注\nE               \nE               实际: ceshiceluebeizhuiikq2075\nE               操作: ==\nE               预期: ceshigendanbeizhuwwhv2114\n\ncommons\\api_base.py:1398: Failed"}, "description": "\n        ### 测试说明\n        - 前置条件：有云策略和云跟单\n          1. 修改云策略信息-关闭跟单备注\n          2. 修改跟单账号-有固定注释\n          3. 云策略账号复制下单\n          4. 数据库校验-策略备注生效\n          5. 策略账号平仓\n        - 预期结果：跟单取自身备注\n        ", "steps": [{"name": "查询订单备注信息", "status": "passed", "steps": [{"name": "轮询等待数据稳定（超时: 30秒，稳定期: 2秒）", "status": "passed", "steps": [{"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "d67e0d6b-37f8-4a07-8957-ad023a5e7644-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "25be3142-1c2d-4df4-bfa4-0caf7cdb0a04-attachment.txt", "type": "text/plain"}], "start": 1761732118856, "stop": 1761732118922}], "attachments": [{"name": "查询条件", "source": "5c18ff25-82bb-418c-9291-7b25f6b24c1a-attachment.txt", "type": "text/plain"}], "start": 1761732118856, "stop": 1761732118922}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "5fd81ca9-07d5-477f-b880-a46808e173df-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e9c091ca-e521-46fe-a6c0-45098017b01d-attachment.txt", "type": "text/plain"}], "start": 1761732118922, "stop": 1761732118923}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "判断结果", "source": "997e8608-9890-40e8-9c4e-f3288aa194e1-attachment.txt", "type": "text/plain"}], "start": 1761732118923, "stop": 1761732118923}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "8429a1f3-eb1b-4454-935b-612fb1a9ccb9-attachment.txt", "type": "text/plain"}], "start": 1761732118923, "stop": 1761732118923}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "c0ab7a88-1d0d-4f38-9bed-536e26324fae-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "6186645b-53f3-4b7f-a002-953e25544f84-attachment.txt", "type": "text/plain"}], "start": 1761732120972, "stop": 1761732121028}], "attachments": [{"name": "查询条件", "source": "21eee5da-ab2e-40e6-951f-53f8066c6aea-attachment.txt", "type": "text/plain"}], "start": 1761732120972, "stop": 1761732121028}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "e38e7fde-5a46-4b0a-9e3c-5a17cc2a058a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "f9649ba6-feba-4225-bf7f-3bde1bd41ab7-attachment.txt", "type": "text/plain"}], "start": 1761732121028, "stop": 1761732121029}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "ffbd340b-dc84-4e50-816d-d2424af696c8-attachment.txt", "type": "text/plain"}], "start": 1761732121029, "stop": 1761732121029}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "d55ae236-e802-4961-b41b-ee2c9cd45880-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "19f38589-0217-4cc4-a939-5da8b92c0810-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "f4246294-d415-4ba8-8fe0-49862833d74d-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "e2d4ad72-b7eb-4e9e-b79b-001c450e6486-attachment.txt", "type": "text/plain"}], "start": 1761732121029, "stop": 1761732121030}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f3bcba46-4124-43a0-8581-27e771726553-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "19543557-69f8-4756-b889-2d412949439c-attachment.txt", "type": "text/plain"}], "start": 1761732123092, "stop": 1761732123148}], "attachments": [{"name": "查询条件", "source": "1719efa5-2bcd-4439-9c96-7d80b78d4548-attachment.txt", "type": "text/plain"}], "start": 1761732123092, "stop": 1761732123148}, {"name": "轮询中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "c25a9d0d-b20c-42c6-b6e9-cd1fb3c8a67d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "b62500fb-ddfd-4efd-8f1b-88a98dfdcf19-attachment.txt", "type": "text/plain"}], "start": 1761732123148, "stop": 1761732123149}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "728069b1-c81c-4ed4-a7a4-a228309d5786-attachment.txt", "type": "text/plain"}], "start": 1761732123149, "stop": 1761732123149}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "a0fe6184-7b55-44ed-839f-036fb5a55c1e-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "eed175fa-1fa4-4b33-9a1d-5a561e0fb6b7-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "92eab403-77e7-4fb2-ac92-2943bd329563-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "4a43a7df-a85b-473b-8000-1c64b1adde2f-attachment.txt", "type": "text/plain"}], "start": 1761732123150, "stop": 1761732123150}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "7f2655a0-907a-47cc-901d-a6a8a2651206-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "97985253-3494-42b2-a2f1-f6529849195a-attachment.txt", "type": "text/plain"}], "start": 1761732125465, "stop": 1761732125523}], "attachments": [{"name": "查询条件", "source": "cc58bff3-3bbb-4997-8145-8234eb0cac75-attachment.txt", "type": "text/plain"}], "start": 1761732125464, "stop": 1761732125523}, {"name": "轮询中（已等待6.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "7b82c97a-ec93-419e-bbf2-6dfc24d982e9-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "56acc471-893d-475f-9ef8-67e23dd06033-attachment.txt", "type": "text/plain"}], "start": 1761732125523, "stop": 1761732125523}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "f57ff44d-12ca-4fb7-b9a3-80ef4c4a16fa-attachment.txt", "type": "text/plain"}], "start": 1761732125523, "stop": 1761732125524}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "38093e0d-7032-4b42-86dc-2419c7651967-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c5986e01-5cc7-42fb-8354-4b7fcf71a69e-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "7e33c6ed-2660-4408-942d-c389c251681f-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "aa78df2e-0133-4063-a92c-05ba22735964-attachment.txt", "type": "text/plain"}], "start": 1761732125524, "stop": 1761732125527}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "8907dace-8a80-4403-9902-f3db2a4ec7d8-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ade93f78-c90e-416d-adf6-a9e7278b89f4-attachment.txt", "type": "text/plain"}], "start": 1761732127586, "stop": 1761732127643}], "attachments": [{"name": "查询条件", "source": "62ca92a1-f5db-4df7-917c-ac26e6565727-attachment.txt", "type": "text/plain"}], "start": 1761732127586, "stop": 1761732127643}, {"name": "轮询中（已等待8.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "892fcde9-6d81-465d-98e3-3cac54061dc4-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "787b62e6-63d7-4a4a-af74-6246adf2cefe-attachment.txt", "type": "text/plain"}], "start": 1761732127643, "stop": 1761732127643}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "4e090ed9-40a6-4d8e-924f-9f082385bd5c-attachment.txt", "type": "text/plain"}], "start": 1761732127643, "stop": 1761732127644}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "cd8e57b4-b55c-4580-b2e8-65ae6d886892-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "59f70cf1-57c4-4cee-92a5-c50f971af32d-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "edac0a95-e2d4-4469-867e-6fe2be3fdf85-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "6914808f-836f-4e2e-8906-35682bc43174-attachment.txt", "type": "text/plain"}], "start": 1761732127644, "stop": 1761732127645}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "e2b61fa0-154a-4a44-b10b-8767552de0cd-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "89e45cac-5977-4dbc-b1cb-6e19fa572c94-attachment.txt", "type": "text/plain"}], "start": 1761732129698, "stop": 1761732129754}], "attachments": [{"name": "查询条件", "source": "adcbe385-cbd8-42a6-932d-48202db996ca-attachment.txt", "type": "text/plain"}], "start": 1761732129697, "stop": 1761732129754}, {"name": "轮询中（已等待10.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "25c7577d-aeb7-482e-823c-38fa507aafcc-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "221c280a-9560-4aa2-b9b1-0bf7c626d8d6-attachment.txt", "type": "text/plain"}], "start": 1761732129754, "stop": 1761732129754}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "7a538c13-0d10-4818-91b4-d7c2a11f209e-attachment.txt", "type": "text/plain"}], "start": 1761732129754, "stop": 1761732129755}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "071c2bc0-ef12-47fd-8f60-0a16d64817e0-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c860dcfc-6bec-44e7-8b6e-1190851fe60c-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "115e2de7-dc54-4c65-8bc4-3d8ab4baa94d-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "dc5f8c61-b818-49db-a0a2-23ed6ca261de-attachment.txt", "type": "text/plain"}], "start": 1761732129755, "stop": 1761732129756}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "4591c063-ed6d-4e81-80a3-c16a74ba387a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c4ab3b09-bd3c-48e4-9395-b5b01ef1d8b8-attachment.txt", "type": "text/plain"}], "start": 1761732131811, "stop": 1761732131871}], "attachments": [{"name": "查询条件", "source": "bc1c0704-d7cd-4dfc-b86b-2af38f50194c-attachment.txt", "type": "text/plain"}], "start": 1761732131811, "stop": 1761732131871}, {"name": "轮询中（已等待13.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "90d88fe6-f26d-461e-acbc-4f748f188b8e-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "0ec025d3-7960-4d08-9506-2e385e34a9bf-attachment.txt", "type": "text/plain"}], "start": 1761732131871, "stop": 1761732131872}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "0923ab67-099c-4c3e-bf73-466d9f114c66-attachment.txt", "type": "text/plain"}], "start": 1761732131872, "stop": 1761732131872}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "8154d870-336d-4fb7-ac40-4a2d7b290bfe-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "63ed015b-30e0-4d4d-8ba7-c25e554dac2d-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "40006d99-2ad9-4a8d-bb6c-f57425f295df-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "82f7e7fb-27d4-4135-aa3c-49ce3a56322d-attachment.txt", "type": "text/plain"}], "start": 1761732131873, "stop": 1761732131873}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "afb3ae9d-0dd4-4a5f-ae53-b6fb4b99bd00-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "72bedcfd-795d-4303-8338-77b03af08eb9-attachment.txt", "type": "text/plain"}], "start": 1761732133946, "stop": 1761732134016}], "attachments": [{"name": "查询条件", "source": "3a80e965-78d9-4e16-8d3a-e02d05f22a0e-attachment.txt", "type": "text/plain"}], "start": 1761732133946, "stop": 1761732134016}, {"name": "轮询中（已等待15.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "76d1df2a-2255-470b-8d64-10472605ee31-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c302144e-87c4-4107-be09-6024b3bdb3ec-attachment.txt", "type": "text/plain"}], "start": 1761732134016, "stop": 1761732134017}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "bcab08d0-d07f-43a1-9955-76f580e44fce-attachment.txt", "type": "text/plain"}], "start": 1761732134017, "stop": 1761732134018}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "548bc052-4955-4c33-b10a-5ba9a402bc1d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "80026a32-c846-4a52-9905-d74131638e81-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "c2218c83-9180-4871-9c8d-0ff000d8fd3d-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "ae7dc992-6b9a-4619-825e-b0b5d2257a62-attachment.txt", "type": "text/plain"}], "start": 1761732134018, "stop": 1761732134019}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "cf3b1ce1-70e6-4dec-9d7e-ebb7921d6165-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a21f42a2-aa0d-4a61-82bd-bfc47c1adf77-attachment.txt", "type": "text/plain"}], "start": 1761732136079, "stop": 1761732136156}], "attachments": [{"name": "查询条件", "source": "fa3cc480-49c3-4b0f-910f-4a253df8bfa6-attachment.txt", "type": "text/plain"}], "start": 1761732136078, "stop": 1761732136156}, {"name": "轮询中（已等待17.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "19712853-081a-47f8-bd77-4379ec891980-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1741c1a8-c147-4fb1-a5d3-e68e9b3230be-attachment.txt", "type": "text/plain"}], "start": 1761732136156, "stop": 1761732136157}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "562cb0c5-c858-4d83-b246-14accd562b98-attachment.txt", "type": "text/plain"}], "start": 1761732136157, "stop": 1761732136157}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "21705684-1c1d-4358-a4af-48dde58c0e0f-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "29669c01-3d27-49d7-9cb7-2ff792dd9ab3-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "fc883265-e93d-4b52-a9aa-24421d8ac8d5-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "123f25d2-495c-402a-b356-1c2ff373f59a-attachment.txt", "type": "text/plain"}], "start": 1761732136157, "stop": 1761732136159}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "545ffb9e-e1e1-4820-9248-96ed85283d01-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ac6ba630-4ed7-4a23-a62a-c79b33e5570f-attachment.txt", "type": "text/plain"}], "start": 1761732138206, "stop": 1761732138261}], "attachments": [{"name": "查询条件", "source": "fcf4ba85-1f11-41ce-98f8-2f1bd7e1d1c5-attachment.txt", "type": "text/plain"}], "start": 1761732138206, "stop": 1761732138261}, {"name": "轮询中（已等待19.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "10a9e9fd-4058-426c-b492-8ca9f56d2e9b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c2f6fcbf-ef37-4c0a-a1b2-8fcf81b94cf8-attachment.txt", "type": "text/plain"}], "start": 1761732138261, "stop": 1761732138262}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "58c9ae53-58cd-442f-a485-ebcc73f81f53-attachment.txt", "type": "text/plain"}], "start": 1761732138262, "stop": 1761732138263}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "23e20ea5-0a9f-43d8-b3e6-d57ce9f9cf1c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "e65c5235-1faa-42b2-8416-c811b5ec0942-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "3353b973-b39b-4145-b69c-f7500887af65-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "c9acdd04-8c87-4ecb-ad6a-7194bbd88510-attachment.txt", "type": "text/plain"}], "start": 1761732138263, "stop": 1761732138264}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f33c2749-0086-436d-8b63-d4a5e9c2891a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "3a98e0af-085e-4246-95a4-4b2eb4c997e8-attachment.txt", "type": "text/plain"}], "start": 1761732140331, "stop": 1761732140387}], "attachments": [{"name": "查询条件", "source": "6cf30b3d-68d8-458c-a5ea-f42a4181b06a-attachment.txt", "type": "text/plain"}], "start": 1761732140330, "stop": 1761732140387}, {"name": "轮询中（已等待21.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b1ec45f6-b43d-40a9-9af6-ba04c5a86810-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "bcc10c96-bfef-4855-8e02-53074776ce2f-attachment.txt", "type": "text/plain"}], "start": 1761732140387, "stop": 1761732140388}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "454af864-e5f3-4097-bb01-9ab092158fb1-attachment.txt", "type": "text/plain"}], "start": 1761732140388, "stop": 1761732140389}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f5c0e8c8-46c5-48f6-bcda-7b211a090b07-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "29ed66eb-f925-48c8-997c-927d6ef68992-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "c774ca05-8c65-400d-b05e-d2b19d7ec31a-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "2fd5abc4-5690-4451-ab1a-0145914fdeb6-attachment.txt", "type": "text/plain"}], "start": 1761732140389, "stop": 1761732140390}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "e98704fd-3901-4917-b5f7-5bd2b44f76a4-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a1555ca1-5a0c-4be1-9cad-261d67f2439a-attachment.txt", "type": "text/plain"}], "start": 1761732142449, "stop": 1761732142509}], "attachments": [{"name": "查询条件", "source": "188e41f4-75bf-4247-97f1-db45593c5f6e-attachment.txt", "type": "text/plain"}], "start": 1761732142449, "stop": 1761732142509}, {"name": "轮询中（已等待23.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "8f94577f-69dd-4a4a-8f3f-4284ce0bf351-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "14e92c46-5891-4cad-8738-cbb0267cfc12-attachment.txt", "type": "text/plain"}], "start": 1761732142509, "stop": 1761732142510}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "e7d737d1-222f-48e3-bb5f-1b433c3dcf06-attachment.txt", "type": "text/plain"}], "start": 1761732142510, "stop": 1761732142510}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "a713f74e-d3d6-48ae-91b5-a51ad488ce24-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "e2714f91-7518-455a-97c2-f5184c5320b1-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "218a968c-ffad-4b45-86a7-d611509b6d85-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "efc993c0-1d68-4efa-93ac-436dadcab5b9-attachment.txt", "type": "text/plain"}], "start": 1761732142510, "stop": 1761732142512}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "7b3c9269-9e88-491c-bb21-62187a6d551c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "020df6b0-8628-447f-8349-84413b87b3d5-attachment.txt", "type": "text/plain"}], "start": 1761732144572, "stop": 1761732144637}], "attachments": [{"name": "查询条件", "source": "83acea49-67c0-4d1c-943d-46280748cc02-attachment.txt", "type": "text/plain"}], "start": 1761732144572, "stop": 1761732144637}, {"name": "轮询中（已等待25.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "1fb1163a-3d8f-41d3-a75f-093602c3db94-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "a92b087a-06e4-4eb7-b12f-8db8ed1bd77a-attachment.txt", "type": "text/plain"}], "start": 1761732144637, "stop": 1761732144637}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "81620f46-f37e-478c-9d0f-15be77cbd7c2-attachment.txt", "type": "text/plain"}], "start": 1761732144637, "stop": 1761732144638}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "6762f50b-25c4-48b5-9f6b-f6718e4dc6fb-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "bc84f329-8814-4c89-b9e9-ef49c4920b26-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "ac5f610b-a599-43f0-95c7-0aa4f417f953-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "958a6e17-936b-4543-a850-13a039460890-attachment.txt", "type": "text/plain"}], "start": 1761732144638, "stop": 1761732144639}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "04ef3fff-6cdb-4c93-97dd-cdfd24271e8c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d251895e-eeca-41af-bdf7-1c4f8d56170b-attachment.txt", "type": "text/plain"}], "start": 1761732146693, "stop": 1761732146750}], "attachments": [{"name": "查询条件", "source": "e38ac9c0-4f19-412b-9d3c-b6bff3e67c24-attachment.txt", "type": "text/plain"}], "start": 1761732146693, "stop": 1761732146750}, {"name": "轮询中（已等待27.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "be18618d-b51a-48ea-a77d-6cfc54299be7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "9bd330b5-6b94-4798-8c63-159011f3ac8a-attachment.txt", "type": "text/plain"}], "start": 1761732146750, "stop": 1761732146752}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "f7f34fe4-420c-45a5-8bf0-cb6845746f41-attachment.txt", "type": "text/plain"}], "start": 1761732146752, "stop": 1761732146752}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "ecefaa6b-e7a6-4a02-8fed-6e3cb8033433-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "68e06048-8452-475e-bac0-53c71d7f1317-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "28de8815-6cf8-48e4-af38-27c6cc303301-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "2a5387b3-8020-42d5-8f37-7f16515c1ced-attachment.txt", "type": "text/plain"}], "start": 1761732146752, "stop": 1761732146753}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "efb049e1-7010-4e2f-a6d6-8b7d7911b76e-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "2c65dd01-7396-4b5e-ade8-40eda8002198-attachment.txt", "type": "text/plain"}], "start": 1761732148824, "stop": 1761732148882}], "attachments": [{"name": "查询条件", "source": "4a2123ec-e0fc-421f-8075-44766b332448-attachment.txt", "type": "text/plain"}], "start": 1761732148822, "stop": 1761732148882}, {"name": "轮询中（已等待30.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "fc92cc1f-371a-4ab0-bb34-eb03e1a9e8c6-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "18fef960-db8b-447d-b069-f9ec65e43ec9-attachment.txt", "type": "text/plain"}], "start": 1761732148882, "stop": 1761732148883}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "a8b332cf-d930-441b-9a90-fdaf2999250f-attachment.txt", "type": "text/plain"}], "start": 1761732148884, "stop": 1761732148885}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "c443f63b-0cec-474b-9eb3-25e7e011e82d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "0439a0bf-4602-4ff9-9f98-d021e9156c4b-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "b6623c2e-8ca8-46e2-b481-84bca3743ad4-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "335cf6f9-5507-4202-95fc-d935547eb56d-attachment.txt", "type": "text/plain"}], "start": 1761732148885, "stop": 1761732148888}, {"name": "轮询超时处理", "status": "passed", "attachments": [{"name": "处理说明", "source": "147f0274-f76a-4c0b-83ca-ae10f69089c8-attachment.txt", "type": "text/plain"}], "start": 1761732150897, "stop": 1761732150897}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "0b590615-8b05-47d0-811d-5f33fd062f84-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a9472c32-af28-4d69-8b0b-40a43f000daa-attachment.txt", "type": "text/plain"}, {"name": "查询结果（共5条，显示前50条）", "source": "f1fa5f62-daeb-4293-8087-cb475c61f9ab-attachment.json", "type": "application/json"}], "start": 1761732150897, "stop": 1761732150954}], "attachments": [{"name": "查询条件", "source": "0326c3ce-c71a-446d-8227-9c1e54ce25e2-attachment.txt", "type": "text/plain"}], "start": 1761732150897, "stop": 1761732150954}, {"name": "数据库查询结果（最终稳定结果）", "status": "passed", "attachments": [{"name": "查询结果（共5条，显示前50条）", "source": "869ef500-308f-4d6f-861e-3990c4a37970-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "22727248-3ce7-493a-9dd4-cf10c5d7eadc-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "59ea9df6-619c-4ce5-822c-890afac88381-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "34d08db6-bd6a-441f-b567-5f441dc28c09-attachment.txt", "type": "text/plain"}], "start": 1761732150954, "stop": 1761732150955}], "start": 1761732118809, "stop": 1761732150955}], "start": 1761732118809, "stop": 1761732150955}, {"name": "验证备注信息", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取自身备注\n\n实际: ceshiceluebeizhuiikq2075\n操作: ==\n预期: ceshigendanbeizhuwwhv2114\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\test_cloudTrader\\test_cloudfixed_annotations.py\", line 860, in test_scenario2_verify_remark\n    self.verify_data(\n  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 1398, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "steps": [{"name": "校验: 预期：跟单取自身备注", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取自身备注\n\n实际: ceshiceluebeizhuiikq2075\n操作: ==\n预期: ceshigendanbeizhuwwhv2114\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 1398, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "attachments": [{"name": "备注详情", "source": "40b766c4-5d11-41d9-af3b-8c98ea64a1fc-attachment.attach", "type": "text/plain"}], "start": 1761732150955, "stop": 1761732150955}], "start": 1761732150955, "stop": 1761732150956}], "attachments": [{"name": "log", "source": "a1700869-0923-47ba-8c70-f7c070c8936a-attachment.txt", "type": "text/plain"}], "start": 1761732118809, "stop": 1761732150956, "uuid": "45d3d950-879b-4aad-a584-e36249e306e2", "historyId": "51f502f846779186f5521b54f11d63d4", "testCaseId": "51f502f846779186f5521b54f11d63d4", "fullName": "test_cloudTrader.test_cloudfixed_annotations.TestCloudStrategyOrderRemark5#test_scenario2_verify_remark", "labels": [{"name": "feature", "value": "跟随云策略账号订单备注的场景校验"}, {"name": "story", "value": "场景5：策略有固定注释，跟单有固定注释"}, {"name": "parentSuite", "value": "test_cloudTrader"}, {"name": "suite", "value": "test_cloudfixed_annotations"}, {"name": "subSuite", "value": "TestCloudremark"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "80100-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cloudTrader.test_cloudfixed_annotations"}]}