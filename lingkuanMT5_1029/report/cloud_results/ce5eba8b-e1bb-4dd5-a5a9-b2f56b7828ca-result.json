{"name": "数据库校验-开仓备注生效", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取开仓备注\n\n实际: ceshigendanbeizhuwwhv2114\n操作: ==\n预期: ceshikaicangbeizhuwivo2152", "trace": "self = <lingkuanMT5_1029.test_cloudTrader.test_cloudfixed_annotations.TestCloudremark.TestCloudStrategyOrderRemark6 object at 0x000001DABD1FED60>\nclass_random_str = 'wivo2152'\nvar_manager = <lingkuanMT5_1029.commons.variable_manager.VariableManager object at 0x000001DABD234670>\ndb_transaction = <pymysql.connections.Connection object at 0x000001DABD3A2550>\n\n    @allure.title(\"数据库校验-开仓备注生效\")\n    def test_scenario3_verify_remark(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"查询订单备注信息\"):\n            MT5cloudTrader_user_accounts_4 = var_manager.get_variable(\"MT5cloudTrader_user_accounts_4\")\n            sql = \"\"\"\n                SELECT fod.account, fod.comment, foi.operation_type, foi.create_time\n                FROM follow_order_detail fod\n                INNER JOIN follow_order_instruct foi\n                    ON foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci\n                WHERE foi.operation_type = %s AND fod.account = %s\n            \"\"\"\n            params = ('0', MT5cloudTrader_user_accounts_4)\n    \n            db_data = self.query_database_with_time(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"foi.create_time\"\n            )\n    \n        with allure.step(\"验证备注信息\"):\n            comment = db_data[0][\"comment\"]\n>           self.verify_data(\n                actual_value=comment,\n                expected_value=f\"ceshikaicangbeizhu{class_random_str}\",\n                op=CompareOp.EQ,\n                use_isclose=False,\n                message=\"预期：跟单取开仓备注\",\n                attachment_name=\"备注详情\"\n            )\n\ntest_cloudTrader\\test_cloudfixed_annotations.py:1028: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuanMT5_1029.test_cloudTrader.test_cloudfixed_annotations.TestCloudremark.TestCloudStrategyOrderRemark6 object at 0x000001DABD1FED60>\nactual_value = 'ceshigendanbeizhuwwhv2114'\nexpected_value = 'ceshikaicangbeizhuwivo2152', op = <CompareOp.EQ: '=='>\nmessage = '预期：跟单取开仓备注', attachment_name = '备注详情', attachment_type = 'text/plain'\nuse_isclose = False, rel_tol = 1e-09, abs_tol = 0\n\n    def verify_data(\n            self,\n            actual_value,\n            expected_value,\n            op: CompareOp,\n            message: str,\n            attachment_name: str,\n            attachment_type=\"text/plain\",\n            use_isclose=True,  # 新增参数：是否启用math.isclose容错（默认启用）\n            rel_tol=1e-9,  # 相对容差（仅当use_isclose=True时生效）\n            abs_tol=0  # 绝对容差（仅当use_isclose=True时生效）\n    ):\n        \"\"\"\n        通用数据校验函数，支持浮点容错比较\n        :param actual_value: 实际值\n        :param expected_value: 预期值\n        :param op: 比较操作，CompareOp 枚举\n        :param message: 校验失败时的提示信息\n        :param attachment_name: Allure 附件名称\n        :param attachment_type: Allure 附件类型，默认文本\n        :param use_isclose: 是否使用math.isclose进行浮点容错比较\n        :param rel_tol: 相对容差（默认1e-9）\n        :param abs_tol: 绝对容差（默认0.0）\n        其他参数同前\n        \"\"\"\n        with allure.step(f\"校验: {message}\"):\n            result = False\n            try:\n                # 处理浮点容错比较（仅对EQ/NE操作生效）\n                if use_isclose and op in (CompareOp.EQ, CompareOp.NE):\n                    if not (isinstance(actual_value, (int, float)) and\n                            isinstance(expected_value, (int, float))):\n                        # 非数字类型自动禁用isclose，避免报错\n                        use_isclose = False\n                        logging.warning(f\"自动禁用isclose：非数字类型比较（实际值类型：{type(actual_value)}）\")\n    \n                    # 计算isclose结果\n                    is_close = math.isclose(\n                        actual_value,\n                        expected_value,\n                        rel_tol=rel_tol,\n                        abs_tol=abs_tol\n                    )\n                    # 根据操作类型取反\n                    result = is_close if op == CompareOp.EQ else not is_close\n    \n                # 普通比较逻辑\n                else:\n                    if op == CompareOp.EQ:\n                        result = actual_value == expected_value\n                    elif op == CompareOp.NE:\n                        result = actual_value != expected_value\n                    elif op == CompareOp.GT:\n                        result = actual_value > expected_value\n                    elif op == CompareOp.LT:\n                        result = actual_value < expected_value\n                    elif op == CompareOp.GE:\n                        result = actual_value >= expected_value\n                    elif op == CompareOp.LE:\n                        result = actual_value <= expected_value\n                    elif op == CompareOp.IN:\n                        result = actual_value in expected_value\n                    elif op == CompareOp.NOT_IN:\n                        result = actual_value not in expected_value\n    \n            except TypeError as e:\n                pytest.fail(\n                    f\"校验类型错误: {str(e)}\\n实际值类型: {type(actual_value)}, 预期值类型: {type(expected_value)}\")\n    \n            # 生成详细提示信息（包含容差参数）\n            detail_msg = (\n                f\"\\n实际: {actual_value}\\n\"\n                f\"操作: {op.value}\\n\"\n                f\"预期: {expected_value}\\n\"\n            )\n    \n            # 添加allure.attach，将信息写入报告\n            allure.attach(\n                detail_msg,  # 附件内容\n                name=attachment_name,  # 附件名称（来自参数）\n                attachment_type=attachment_type  # 附件类型\n            )\n    \n            if not result:\n>               pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\nE               Failed: 校验失败: 预期：跟单取开仓备注\nE               \nE               实际: ceshigendanbeizhuwwhv2114\nE               操作: ==\nE               预期: ceshikaicangbeizhuwivo2152\n\ncommons\\api_base.py:1398: Failed"}, "description": "\n        ### 测试说明\n        - 前置条件：有云策略和云跟单\n          1. 修改云策略信息-开启跟单备注\n          2. 修改跟单账号-无固定注释\n          3. 云策略账号复制下单\n          4. 数据库校验-策略备注生效\n          5. 策略账号平仓\n        - 预期结果：跟单取开仓备注\n        ", "steps": [{"name": "查询订单备注信息", "status": "passed", "steps": [{"name": "轮询等待数据稳定（超时: 30秒，稳定期: 2秒）", "status": "passed", "steps": [{"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "b294e238-64a3-4d2f-b980-f03ceffaec76-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "62e0dd4c-cc88-4c63-82db-50e1cf0a76c7-attachment.txt", "type": "text/plain"}], "start": 1761732156665, "stop": 1761732156726}], "attachments": [{"name": "查询条件", "source": "76d76b81-90cc-4ea7-9b9e-4ca312bb29ab-attachment.txt", "type": "text/plain"}], "start": 1761732156664, "stop": 1761732156726}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "1a613f85-c668-4955-a203-da5bcf9bca9b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "52f8b02e-8f3f-4bae-88f7-069d4681d2e0-attachment.txt", "type": "text/plain"}], "start": 1761732156726, "stop": 1761732156726}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "判断结果", "source": "63ebcaed-4de9-40ba-a719-47d429b61642-attachment.txt", "type": "text/plain"}], "start": 1761732156726, "stop": 1761732156727}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "43431cd2-eceb-4bf4-8ff4-d6222b851c6a-attachment.txt", "type": "text/plain"}], "start": 1761732156727, "stop": 1761732156727}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "c155c28f-d7cf-4b3d-9a2b-aca59dc8d675-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "520f345f-e295-4434-8452-57f0c8b74bd8-attachment.txt", "type": "text/plain"}], "start": 1761732158782, "stop": 1761732158840}], "attachments": [{"name": "查询条件", "source": "c25f562a-efcb-4895-a76d-6139989a6746-attachment.txt", "type": "text/plain"}], "start": 1761732158781, "stop": 1761732158840}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "99bb0281-aa97-441f-88b5-fff25dad55ab-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "05fb36b5-c5e7-4e69-8b47-3bd9df9582f3-attachment.txt", "type": "text/plain"}], "start": 1761732158840, "stop": 1761732158842}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "45743d10-e8cd-4b52-bfef-6618e958a1ca-attachment.txt", "type": "text/plain"}], "start": 1761732158842, "stop": 1761732158842}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "d684cee2-a42c-42c8-a9e5-df12a05adea9-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "111ae953-3e70-451f-ba26-b6431589f09e-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "0290ed1f-8c08-4c5d-96bc-87fd4ef45b3c-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "c7a58bb9-2d56-4b52-bef9-8e626bc6a99a-attachment.txt", "type": "text/plain"}], "start": 1761732158842, "stop": 1761732158843}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "6033c2b3-b4f5-4359-9ae9-c7499fc6ac06-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c87f0fa3-2dc0-45de-95a6-96052f6e9644-attachment.txt", "type": "text/plain"}], "start": 1761732160958, "stop": 1761732161019}], "attachments": [{"name": "查询条件", "source": "0ebec6fb-34f9-4077-80fa-fe34e54a21d1-attachment.txt", "type": "text/plain"}], "start": 1761732160958, "stop": 1761732161019}, {"name": "轮询中（已等待4.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "e33b3616-7027-4e68-840f-992187df07dd-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "a4238dd1-3686-4c50-aeb6-5114b2476a10-attachment.txt", "type": "text/plain"}], "start": 1761732161019, "stop": 1761732161020}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "58b17cd5-36ae-4b54-9b1c-b76a8399c6d6-attachment.txt", "type": "text/plain"}], "start": 1761732161020, "stop": 1761732161020}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "22be3993-7636-4bac-aea6-9d43e32be6bd-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "43aeb055-f70b-47d5-9cfd-ea94c9851830-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "fb9b2247-5f95-4b5d-a271-f65ce5969c2a-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "54eed261-fa1a-4cec-a99b-dfb3898c5f6f-attachment.txt", "type": "text/plain"}], "start": 1761732161020, "stop": 1761732161021}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "b502ca08-9a0c-4fed-b4cc-c8b0e43a712d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "897085fa-d4cd-4e59-8b70-c785ffe41ff1-attachment.txt", "type": "text/plain"}], "start": 1761732163077, "stop": 1761732163137}], "attachments": [{"name": "查询条件", "source": "a0a5a838-f6ea-43d0-8d27-c6a2b65cc684-attachment.txt", "type": "text/plain"}], "start": 1761732163076, "stop": 1761732163137}, {"name": "轮询中（已等待6.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ca3ebdae-5d72-46e6-80f5-aff896aff2fb-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "8024cb60-4a57-4cca-ae97-5f40801746bc-attachment.txt", "type": "text/plain"}], "start": 1761732163137, "stop": 1761732163138}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "eac23d8d-ccd7-4d53-adcc-e29fd9e01d20-attachment.txt", "type": "text/plain"}], "start": 1761732163138, "stop": 1761732163138}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "6681c53d-f72e-407a-a64c-f1304486f7d0-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "47a93e33-2f67-4b40-be0e-3722eb7f5c13-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "609d9b8e-b79d-487a-aeb2-e3a384a03c80-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "239efe0e-d0c2-409c-ad23-db51f65975a2-attachment.txt", "type": "text/plain"}], "start": 1761732163138, "stop": 1761732163139}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "5fdd1b2d-7412-4343-bc29-789d5ddeaf31-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "8393c347-8087-449d-a737-a4a1dae36fb5-attachment.txt", "type": "text/plain"}], "start": 1761732165186, "stop": 1761732165244}], "attachments": [{"name": "查询条件", "source": "d9f80586-8830-4a29-b392-c91e203f8601-attachment.txt", "type": "text/plain"}], "start": 1761732165185, "stop": 1761732165244}, {"name": "轮询中（已等待8.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "be1a77b7-0364-4ec2-bc9e-0af4f3a03728-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "239cba45-318e-468c-9f88-f90b5f4a064c-attachment.txt", "type": "text/plain"}], "start": 1761732165244, "stop": 1761732165245}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "6b1446b2-0b33-4e29-bc2a-75f43482b467-attachment.txt", "type": "text/plain"}], "start": 1761732165245, "stop": 1761732165245}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f1bff7d7-96e7-41c5-8fa9-6a98141f7721-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a47bbea0-13b8-4e45-9e06-016f41bc8bd1-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "8216d738-401e-44bb-8b24-60679e9661d5-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "4f8b3850-3e99-4216-a670-bab5f16ae22c-attachment.txt", "type": "text/plain"}], "start": 1761732165246, "stop": 1761732165247}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "efc4a4f4-decb-4f43-8911-ab4f1fbfe79c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "506e4e0a-197a-4f2e-9113-58498e67f9a3-attachment.txt", "type": "text/plain"}], "start": 1761732167302, "stop": 1761732167360}], "attachments": [{"name": "查询条件", "source": "dd295b9e-8721-4556-b1a0-9d2283b29499-attachment.txt", "type": "text/plain"}], "start": 1761732167301, "stop": 1761732167360}, {"name": "轮询中（已等待10.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "acd49324-6280-44f6-a7e6-37a8a74ba7dc-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2e14d925-4fe6-4d06-a848-e489a042ec29-attachment.txt", "type": "text/plain"}], "start": 1761732167360, "stop": 1761732167360}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "8979ef0d-7df2-44ae-9e13-0f81d9e78197-attachment.txt", "type": "text/plain"}], "start": 1761732167360, "stop": 1761732167361}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "16f237ff-fbf2-430c-88fa-5c8f9451a9b1-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "e81133df-b66c-4c40-ac1e-a6f55e3a1fe8-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "fb8ddd23-7bfe-40f7-b9b2-e1034803943c-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "88112608-5a29-4204-bcd2-90134741f105-attachment.txt", "type": "text/plain"}], "start": 1761732167361, "stop": 1761732167362}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "4d8834f7-3d4a-403b-b3f9-10448ac95f74-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "623ba9ad-3a82-4bfa-b51d-f64f9f4f6b10-attachment.txt", "type": "text/plain"}], "start": 1761732169411, "stop": 1761732169488}], "attachments": [{"name": "查询条件", "source": "8fb5b023-4f86-44a6-83c6-8e1b7899ee79-attachment.txt", "type": "text/plain"}], "start": 1761732169410, "stop": 1761732169488}, {"name": "轮询中（已等待12.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "f8f17aab-badc-4150-b405-fc58d1a30fc5-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "fcd91bcd-a646-4317-905f-453b711ce78b-attachment.txt", "type": "text/plain"}], "start": 1761732169488, "stop": 1761732169490}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "c2a8cc5d-562c-4cba-ba8f-d419deee256a-attachment.txt", "type": "text/plain"}], "start": 1761732169490, "stop": 1761732169490}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "dec883aa-d473-4eb5-853f-2b9661c46a74-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "bd108fa6-782a-4d1e-849d-3438c1319eb6-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "0abfdb89-22be-447e-a78c-8a2bad3aba38-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "a0953586-67f2-4c33-a87f-bf1a8f20784a-attachment.txt", "type": "text/plain"}], "start": 1761732169490, "stop": 1761732169493}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "c85aa51a-6fe1-4b58-b2c6-b7426acfd470-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5ef2b3be-3fc7-4142-8e72-ff537238caff-attachment.txt", "type": "text/plain"}], "start": 1761732171552, "stop": 1761732171882}], "attachments": [{"name": "查询条件", "source": "b1cdda87-a702-4a8d-9e1e-a00de90c6514-attachment.txt", "type": "text/plain"}], "start": 1761732171551, "stop": 1761732171882}, {"name": "轮询中（已等待15.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "69de3285-9fe4-48fa-beeb-334b484df071-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "94622ac6-7cf5-4294-979f-c6faeaf622e6-attachment.txt", "type": "text/plain"}], "start": 1761732171882, "stop": 1761732171883}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "3811cc46-945b-43a4-ac22-19abe1a6a906-attachment.txt", "type": "text/plain"}], "start": 1761732171883, "stop": 1761732171883}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "26978c5a-1e74-4d18-bb04-d53758f55bb4-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5c7256c3-af90-4df4-a6d2-995dd2fff9da-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "a1adac67-b98a-4b21-b77f-da53a2d5c968-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "6a146e3a-9ae7-4f90-8247-39cbe1b40d85-attachment.txt", "type": "text/plain"}], "start": 1761732171883, "stop": 1761732171885}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "38f8b3bc-1f33-470d-aef4-afc83e3d06c2-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "b0071c39-d968-4411-b72c-ce4f8a43af12-attachment.txt", "type": "text/plain"}], "start": 1761732173942, "stop": 1761732174001}], "attachments": [{"name": "查询条件", "source": "456f325b-6895-4fc1-a2a1-ee3bf2aa5bac-attachment.txt", "type": "text/plain"}], "start": 1761732173941, "stop": 1761732174001}, {"name": "轮询中（已等待17.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "742a0fb2-e68e-4d1f-8476-7b8e4ff2d23d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "7c7910eb-ff4d-4fb7-a52d-9560983e8ff4-attachment.txt", "type": "text/plain"}], "start": 1761732174001, "stop": 1761732174002}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "f4b2f923-8cd5-45cb-afe7-775d1ef06d8b-attachment.txt", "type": "text/plain"}], "start": 1761732174002, "stop": 1761732174003}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f4bbc784-a7cc-4842-bdeb-6692592fb419-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "131b6b38-bfe9-495b-a29d-56e06d18a1eb-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "1b274b80-34ea-4522-9ce7-cf9ff8bc1d8e-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "b40222fa-2f24-44ee-bd96-631d68e32e21-attachment.txt", "type": "text/plain"}], "start": 1761732174003, "stop": 1761732174004}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "e6d51a94-7c17-4a5b-8a29-a15743f1a381-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "8a40c58e-1f4b-48f2-9ea3-f50af6958ab6-attachment.txt", "type": "text/plain"}], "start": 1761732176062, "stop": 1761732176119}], "attachments": [{"name": "查询条件", "source": "8d3700c8-29f8-4c51-b116-9a18c760adf8-attachment.txt", "type": "text/plain"}], "start": 1761732176061, "stop": 1761732176119}, {"name": "轮询中（已等待19.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "384fb3c1-d910-4444-841d-b672dbcb21fa-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "b03a18e8-7b4e-4dc3-ae0c-5e47a21cfe4d-attachment.txt", "type": "text/plain"}], "start": 1761732176119, "stop": 1761732176119}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "4720a8b9-9b50-4c87-833f-d6b4812921d8-attachment.txt", "type": "text/plain"}], "start": 1761732176119, "stop": 1761732176120}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "2e582706-77a4-4a7c-a69f-d01208c54504-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a510817c-89a8-46bb-ad36-78f56699b774-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "6879db3e-381b-425d-b289-944b0f2b7ee1-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "8b54671f-2725-41d4-a9d7-362bf6a4532e-attachment.txt", "type": "text/plain"}], "start": 1761732176120, "stop": 1761732176120}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "ddf99fbb-1cdf-41d0-aa52-2d39101f739c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "618001d5-5e2d-43e0-870c-535e89a5f4d2-attachment.txt", "type": "text/plain"}], "start": 1761732178179, "stop": 1761732178243}], "attachments": [{"name": "查询条件", "source": "8c4b34ab-c60f-474a-8a02-279798d41190-attachment.txt", "type": "text/plain"}], "start": 1761732178179, "stop": 1761732178243}, {"name": "轮询中（已等待21.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "44b8cb17-6467-4ab3-b9eb-f805331fccba-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d2acbb2e-f0e7-4298-823b-2f08a355c3a3-attachment.txt", "type": "text/plain"}], "start": 1761732178243, "stop": 1761732178244}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "0dba4a6e-9f02-479c-977d-85b6464421ec-attachment.txt", "type": "text/plain"}], "start": 1761732178244, "stop": 1761732178244}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "de74090e-6bdc-405f-b746-5a417e00ce7d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5b8f959f-4238-485d-b373-11e7cfd68b42-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "711dc5c9-8a07-4305-adbc-086e06629d29-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "1ce2a026-38cb-4d4b-9872-5881cb7ce3fb-attachment.txt", "type": "text/plain"}], "start": 1761732178245, "stop": 1761732178246}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "3a91a0a4-aafb-471c-bf82-ca20ed40faf3-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "6fda9825-3a39-4fe9-8165-5d64a08ae84c-attachment.txt", "type": "text/plain"}], "start": 1761732180301, "stop": 1761732180358}], "attachments": [{"name": "查询条件", "source": "3f2c7de2-c65a-4250-907c-d063e265f4e5-attachment.txt", "type": "text/plain"}], "start": 1761732180301, "stop": 1761732180358}, {"name": "轮询中（已等待23.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "91c6d37c-f800-46e2-9feb-0c8955132c3f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c71d378e-2ade-4c32-8844-2eec211433a7-attachment.txt", "type": "text/plain"}], "start": 1761732180358, "stop": 1761732180359}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "640da375-1ba0-4a12-a5ff-f734fdea4b97-attachment.txt", "type": "text/plain"}], "start": 1761732180359, "stop": 1761732180359}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "411aa7b2-6d0f-44e2-ba1b-ce7245c22539-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "9bd738af-e12d-44ab-a354-402aef62bfee-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "04fd6763-db42-4f4c-96b5-255f40b22fbf-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "97e6651a-760e-4847-ba47-6d4110742af4-attachment.txt", "type": "text/plain"}], "start": 1761732180359, "stop": 1761732180360}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f0f1fcdc-98b6-452c-a53f-e7de1de70d03-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "fa063bb6-a610-4a9f-8014-d08a875c104e-attachment.txt", "type": "text/plain"}], "start": 1761732182408, "stop": 1761732182465}], "attachments": [{"name": "查询条件", "source": "696e6230-9b80-4abe-8cd8-42f455f98dbf-attachment.txt", "type": "text/plain"}], "start": 1761732182408, "stop": 1761732182465}, {"name": "轮询中（已等待25.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "357c6031-2b73-4007-be16-512b51e282d3-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "b20bd767-f64a-4367-8abf-9d6948b104f2-attachment.txt", "type": "text/plain"}], "start": 1761732182465, "stop": 1761732182466}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "95115c29-25a1-4809-a120-3457eda36eeb-attachment.txt", "type": "text/plain"}], "start": 1761732182466, "stop": 1761732182466}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "7d76ea5b-6226-4637-89c5-7dd1c29580ab-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "1d7ad48a-484f-46b3-9a3e-3497f9801cd6-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "bdf7e9af-f7ce-475f-9646-ff93a255d782-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "d44690fa-b2e2-4433-ada8-f37d62710064-attachment.txt", "type": "text/plain"}], "start": 1761732182467, "stop": 1761732182468}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "a0bcdd81-573d-4947-afdf-f5f2c90374db-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5cdf4ab8-7056-4f76-906e-955ffa95bab1-attachment.txt", "type": "text/plain"}], "start": 1761732184528, "stop": 1761732184590}], "attachments": [{"name": "查询条件", "source": "98328dfd-7260-4435-a35d-39bf6a9db131-attachment.txt", "type": "text/plain"}], "start": 1761732184528, "stop": 1761732184590}, {"name": "轮询中（已等待28.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "0a6b8e7b-f43c-4d9a-afe2-4331e8603c0b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ab779322-2c69-47b5-8c93-1436c3db5c7b-attachment.txt", "type": "text/plain"}], "start": 1761732184590, "stop": 1761732184590}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "7d0ee44a-2462-4768-a13f-f567cd1666b7-attachment.txt", "type": "text/plain"}], "start": 1761732184590, "stop": 1761732184591}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "8f480058-7f0e-4457-bb49-fca7041adccb-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5bcb77fb-10bd-4282-93ba-6a7ecc59b620-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "1eab1348-2041-4727-833d-8bb0290721b5-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "6289e4a5-4917-4f38-821c-40b1eaf51973-attachment.txt", "type": "text/plain"}], "start": 1761732184591, "stop": 1761732184592}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "934ee524-87ab-411c-988d-ce4e22abedd4-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "28e21c9a-0c42-4006-91ab-6d96bcf5e5d4-attachment.txt", "type": "text/plain"}], "start": 1761732186639, "stop": 1761732186700}], "attachments": [{"name": "查询条件", "source": "9820ddcc-76e2-4375-ae2e-3ba23a8b827b-attachment.txt", "type": "text/plain"}], "start": 1761732186639, "stop": 1761732186700}, {"name": "轮询中（已等待30.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "0e527680-e56c-4c13-b8b5-4d1855cd3de7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "b5d87cfe-b274-4eb6-b8ab-711fc6d91f01-attachment.txt", "type": "text/plain"}], "start": 1761732186700, "stop": 1761732186701}, {"name": "判断结果稳定性", "status": "broken", "statusDetails": {"message": "ValueError: 未识别到唯一键（候选键: ['order_no', 'send_no', 'close_no', 'foi.order_no', 'fod.send_no', 'fod.close_no', 'id']，结果字段: ['account', 'comment', 'operation_type', 'create_time']）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 744, in _is_result_stable\n    raise ValueError(err_msg)\n"}, "attachments": [{"name": "判断异常", "source": "5b76dee3-f9e9-4837-b8bf-c0f0562b0655-attachment.txt", "type": "text/plain"}], "start": 1761732186701, "stop": 1761732186701}, {"name": "轮询查询异常（单次查询失败）", "status": "passed", "attachments": [{"name": "执行SQL", "source": "a68b59be-015c-4c72-9c7a-a649e600a302-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "534da3b1-c7ef-414e-82a4-8cac27451d81-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "a67280c7-7c3c-4d15-9401-5b1d73aedb54-attachment.txt", "type": "text/plain"}, {"name": "错误详情", "source": "6bfd9293-d88a-46bd-947d-676919ad912b-attachment.txt", "type": "text/plain"}], "start": 1761732186701, "stop": 1761732186702}, {"name": "轮询超时处理", "status": "passed", "attachments": [{"name": "处理说明", "source": "52faae2e-759b-4a32-a5d4-de1a67115769-attachment.txt", "type": "text/plain"}], "start": 1761732188715, "stop": 1761732188715}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "45fff57a-026d-460c-b233-6e4ce7df677b-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ab2ea22d-6104-47ef-8ca3-19a384bf5de7-attachment.txt", "type": "text/plain"}, {"name": "查询结果（共5条，显示前50条）", "source": "63b8212b-58fb-4327-9244-25d1847ccc61-attachment.json", "type": "application/json"}], "start": 1761732188716, "stop": 1761732188784}], "attachments": [{"name": "查询条件", "source": "a62640fe-b8bb-4759-8d15-dfe32c676d03-attachment.txt", "type": "text/plain"}], "start": 1761732188715, "stop": 1761732188784}, {"name": "数据库查询结果（最终稳定结果）", "status": "passed", "attachments": [{"name": "查询结果（共5条，显示前50条）", "source": "b1e2d675-1b09-468c-b02d-2c79900f51e0-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "da2758f2-f3ef-4c05-afaf-8cc6a690d226-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "82c12bb2-d351-45df-822d-41063d6b5217-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "70a08055-7087-4b49-ba49-02788342ebc6-attachment.txt", "type": "text/plain"}], "start": 1761732188784, "stop": 1761732188785}], "start": 1761732156618, "stop": 1761732188785}], "start": 1761732156618, "stop": 1761732188785}, {"name": "验证备注信息", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取开仓备注\n\n实际: ceshigendanbeizhuwwhv2114\n操作: ==\n预期: ceshikaicangbeizhuwivo2152\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\test_cloudTrader\\test_cloudfixed_annotations.py\", line 1028, in test_scenario3_verify_remark\n    self.verify_data(\n  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 1398, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "steps": [{"name": "校验: 预期：跟单取开仓备注", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 预期：跟单取开仓备注\n\n实际: ceshigendanbeizhuwwhv2114\n操作: ==\n预期: ceshikaicangbeizhuwivo2152\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1029\\commons\\api_base.py\", line 1398, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "attachments": [{"name": "备注详情", "source": "5ed6b3e0-b067-45e2-8303-64ed3cc15830-attachment.attach", "type": "text/plain"}], "start": 1761732188785, "stop": 1761732188785}], "start": 1761732188785, "stop": 1761732188786}], "attachments": [{"name": "log", "source": "a77e7331-3671-432c-8ba2-e44eba919cad-attachment.txt", "type": "text/plain"}], "start": 1761732156618, "stop": 1761732188786, "uuid": "3fa45fdf-9af6-4da6-a93a-39d4023b6826", "historyId": "1979c8e58c5cd2aff37764fab13c915e", "testCaseId": "1979c8e58c5cd2aff37764fab13c915e", "fullName": "test_cloudTrader.test_cloudfixed_annotations.TestCloudStrategyOrderRemark6#test_scenario3_verify_remark", "labels": [{"name": "feature", "value": "跟随云策略账号订单备注的场景校验"}, {"name": "story", "value": "场景6：交易下单-策略开启订单备注，跟单无固定注释"}, {"name": "parentSuite", "value": "test_cloudTrader"}, {"name": "suite", "value": "test_cloudfixed_annotations"}, {"name": "subSuite", "value": "TestCloudremark"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "80100-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cloudTrader.test_cloudfixed_annotations"}]}