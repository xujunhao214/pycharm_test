{"name": "数据库校验-策略开仓-MT5账号跟单指令及订单详情数据检查", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）", "trace": "self = <lingkuan_1127.test_vps.test_lianxi2.TestVPSOrdersendbuy.TestVPSOrderSend1 object at 0x00000152B2334820>\nclass_random_str = 'zdhpn2443'\nvar_manager = <lingkuan_1127.commons.variable_manager.VariableManager object at 0x00000152B23CDB50>\ndb_transaction = <DBUtils.PooledDB.PooledDedicatedDBConnection object at 0x00000152B257AAF0>\n\n    @allure.title(\"数据库校验-策略开仓-MT5账号跟单指令及订单详情数据检查\")\n    def test_dbquery_addsalve_MT5orderSend(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"1. 获取订单详情表账号数据\"):\n            addVPS_MT5Slave = var_manager.get_variable(\"addVPS_MT5Slave\")\n            account = addVPS_MT5Slave[\"account\"]\n            sql = f\"\"\"\n                        SELECT\n                            fod.size,\n                            fod.comment,\n                            fod.send_no,\n                            fod.magical,\n                            fod.open_price,\n                            fod.symbol,\n                            fod.order_no,\n                            foi.true_total_lots,\n                            foi.order_no,\n                            foi.operation_type,\n                            foi.create_time,\n                            foi.status,\n                            foi.total_lots,\n                            foi.total_orders\n                        FROM\n                            follow_order_detail fod\n                        INNER JOIN\n                            follow_order_instruct foi\n                        ON\n                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci\n                        WHERE foi.operation_type = %s\n                            AND fod.account = %s\n                            AND fod.comment = %s\n                            \"\"\"\n            params = (\n                '0',\n                account,\n                class_random_str\n            )\n    \n            # 调用轮询等待方法（带时间范围过滤）\n>           db_data = self.query_database_with_time_with_timezone(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"fod.open_time\"\n            )\n\ntest_vps\\test_lianxi2.py:401: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuan_1127.test_vps.test_lianxi2.TestVPSOrdersendbuy.TestVPSOrderSend1 object at 0x00000152B2334820>\ndb_transaction = <DBUtils.PooledDB.PooledDedicatedDBConnection object at 0x00000152B257AAF0>\nsql = '\\n                            SELECT \\n                                fod.size,\\n                                fod...          AND fod.account = %s\\n                                AND fod.comment = %s\\n                                '\nparams = ('0', '66938909', 'zdhpn2443'), time_field = 'fod.open_time'\ntime_range = 3, order_by = 'create_time DESC', timeout = 30, poll_interval = 2\nstable_period = 2, timezone_offset = 6, attach_to_allure = True\n\n    def query_database_with_time_with_timezone(\n            self,\n            db_transaction: pymysql.connections.Connection,\n            sql: str,\n            params: tuple = (),\n            time_field: Optional[str] = None,\n            time_range: int = MYSQL_TIME,\n            order_by: str = \"create_time DESC\",\n            timeout: int = WAIT_TIMEOUT,\n            poll_interval: int = POLL_INTERVAL,\n            stable_period: int = STBLE_PERIOD,\n            timezone_offset: int = TIMEZONE_OFFSET,\n            attach_to_allure: bool = True\n    ) -> List[Dict[str, Any]]:\n        \"\"\"带时区转换的轮询查询（带Allure分层提示）\"\"\"\n        offset_str = f\"{timezone_offset:+03d}:00\"  # 转换为时区字符串（如+08:00）\n        start_time = time.time()\n        last_result = None\n        stable_start_time = None\n        final_result = None\n    \n        # 生成固定时间范围（轮询开始时计算一次）\n        poll_start_datetime = datetime.datetime.now()\n        fixed_time_start = (poll_start_datetime - datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        fixed_time_end = (poll_start_datetime + datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n    \n        logger.info(f\"[{self._get_current_time()}] 开始轮询（时区{offset_str}）| 超时: {timeout}秒\")\n    \n        with allure.step(f\"轮询等待数据稳定（时区{offset_str}，超时{timeout}秒）\"):\n            while time.time() - start_time < timeout:\n                try:\n                    db_transaction.commit()\n                    # 执行带时区转换的单次查询\n                    result = self._execute_query_with_timezone(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=params,\n                        time_field=time_field,\n                        order_by=order_by,\n                        fixed_time_start=fixed_time_start,  # 传递固定时间参数\n                        fixed_time_end=fixed_time_end,\n                        timezone_offset=offset_str,\n                        attach_to_allure=False\n                    )\n    \n                    # 记录轮询状态\n                    elapsed = time.time() - start_time\n                    with allure.step(f\"轮询中（已等待{elapsed:.1f}秒）\"):\n                        allure.attach(f\"结果数量: {len(result)}\", \"当前状态\", allure.attachment_type.TEXT)\n                        allure.attach(f\"剩余时间: {timeout - elapsed:.1f}秒\", \"超时倒计时\", allure.attachment_type.TEXT)\n    \n                    # 复用数据稳定判断逻辑\n                    if len(result) > 0 and self._is_result_stable(result, last_result):\n                        if stable_start_time is None:\n                            stable_start_time = time.time()\n                            with allure.step(\"数据首次稳定\"):\n                                allure.attach(f\"开始稳定期计时（需保持{stable_period}秒）\", \"状态说明\",\n                                              allure.attachment_type.TEXT)\n                        elif time.time() - stable_start_time >= stable_period:\n                            final_result = result\n                            logger.info(f\"[{self._get_current_time()}] 数据稳定，轮询结束\")\n                            with allure.step(\"数据稳定达标\"):\n                                allure.attach(f\"已稳定{stable_period}秒（总耗时{time.time() - start_time:.1f}秒）\",\n                                              \"结果说明\", allure.attachment_type.TEXT)\n                            break\n                    else:\n                        stable_start_time = None\n                        with allure.step(\"数据发生变化\"):\n                            allure.attach(\"重置稳定期计时器\", \"状态说明\", allure.attachment_type.TEXT)\n    \n                    last_result = result\n                    time.sleep(poll_interval)\n    \n                except Exception as e:\n                    with allure.step(\"时区查询轮询异常\"):\n                        allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                        allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                        allure.attach(str(e), \"错误详情\", allure.attachment_type.TEXT)\n                    logger.warning(f\"[{self._get_current_time()}] 轮询异常: {str(e)} \\n继续等待\")\n                    time.sleep(poll_interval)\n    \n            # 超时处理\n            if final_result is None:\n                with allure.step(\"时区查询轮询超时\"):\n                    allure.attach(f\"超过{timeout}秒未达到稳定状态，获取最终结果\", \"处理说明\",\n                                  allure.attachment_type.TEXT)\n                final_result = self._execute_query_with_timezone(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    time_field=time_field,\n                    order_by=order_by,\n                    fixed_time_start=fixed_time_start,\n                    fixed_time_end=fixed_time_end,\n                    timezone_offset=offset_str,\n                    attach_to_allure=True\n                )\n    \n            # 附加结果到报告\n            if final_result and attach_to_allure:\n                with allure.step(\"带时区查询最终结果\"):\n                    display_result = min(len(final_result), 50)\n                    allure.attach(self.serialize_data(final_result[:display_result]),\n                                  f\"查询结果（共{len(final_result)}条，显示前50条）\", allure.attachment_type.JSON)\n                    allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                    allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                    allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n                    allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                  allure.attachment_type.TEXT)\n    \n            if not final_result:\n                with allure.step(\"时区查询无结果\"):\n                    allure.attach(f\"轮询{timeout}秒后仍无查询结果\", \"异常详情\", allure.attachment_type.TEXT)\n                    allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                    allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                    allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n                    allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                  allure.attachment_type.TEXT)\n>               raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\nE               TimeoutError: Failed: 时区查询超时（30秒）\n\ncommons\\api_base.py:1239: TimeoutError"}, "description": "\n    ### 测试说明\n    - 前置条件：有vps策略和vps跟单\n      1. 进行开仓，手数范围0.1-1，总订单3，总手数1\n      2. 校验账号的数据是否正确\n      3. 进行平仓\n      4. 校验账号的数据是否正确\n    - 预期结果：账号的数据正确\n    ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_1127\\test_vps\\test_lianxi2.py\", line 401, in test_dbquery_addsalve_MT5orderSend\n    db_data = self.query_database_with_time_with_timezone(\n  File \"D:\\pycharm_test\\lingkuan_1127\\commons\\api_base.py\", line 1239, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "轮询等待数据稳定（时区+06:00，超时30秒）", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_1127\\commons\\api_base.py\", line 1239, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552461595, "stop": 1764552461645}], "attachments": [{"name": "时区处理", "source": "eb3c0757-05ca-47b3-9c05-57f6364e769f-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "996163d7-8528-4c4a-b00e-cc3236b8a6ea-attachment.txt", "type": "text/plain"}], "start": 1764552461594, "stop": 1764552461645}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "9efe6b6e-9efb-423e-8e94-727c700b6087-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "69a76904-7ca6-41d0-99fb-5cbbf793f62b-attachment.txt", "type": "text/plain"}], "start": 1764552461645, "stop": 1764552461646}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "b86281d2-f4ce-4d98-bf9b-a2746baa6116-attachment.txt", "type": "text/plain"}], "start": 1764552461646, "stop": 1764552461647}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552463706, "stop": 1764552463757}], "attachments": [{"name": "时区处理", "source": "8333079d-b433-47b7-87be-5168fc2fb5a5-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "a88ad4b2-5e73-4ac7-8426-ab1cf80a79cd-attachment.txt", "type": "text/plain"}], "start": 1764552463706, "stop": 1764552463757}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "de126d01-9332-4372-bcd7-0ac01aa8bc2a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "81702b6f-f332-4de6-944e-835a53adc208-attachment.txt", "type": "text/plain"}], "start": 1764552463757, "stop": 1764552463757}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "1f2c4f7e-3580-4e67-be4c-12b7bf6e80bc-attachment.txt", "type": "text/plain"}], "start": 1764552463757, "stop": 1764552463757}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552465806, "stop": 1764552465856}], "attachments": [{"name": "时区处理", "source": "0a8a8ed4-ad73-4aef-b8d3-9ce12e1496f0-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "9c6e2dfe-f160-4280-b493-ea362ed99f87-attachment.txt", "type": "text/plain"}], "start": 1764552465806, "stop": 1764552465856}, {"name": "轮询中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "d1526274-0ed9-4214-845a-67bc2f9ff991-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "bafed85f-269d-49af-b61d-4d8ecdbd9567-attachment.txt", "type": "text/plain"}], "start": 1764552465856, "stop": 1764552465857}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "b3247861-3831-4e68-a38c-f30bd48bb5b7-attachment.txt", "type": "text/plain"}], "start": 1764552465857, "stop": 1764552465857}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552467914, "stop": 1764552467963}], "attachments": [{"name": "时区处理", "source": "2fc469b9-f069-4171-a714-808ce33aeed9-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "0ad28d61-4e0a-4774-aafc-ee50c6df0f70-attachment.txt", "type": "text/plain"}], "start": 1764552467912, "stop": 1764552467963}, {"name": "轮询中（已等待6.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "eb7193d9-91b7-40c7-afdb-6ec7f0ccd292-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "5a869c80-3538-4a46-9ffc-3f577bad1fe4-attachment.txt", "type": "text/plain"}], "start": 1764552467963, "stop": 1764552467965}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "4f99bafa-d15b-422c-95fe-2ac8630f65d2-attachment.txt", "type": "text/plain"}], "start": 1764552467965, "stop": 1764552467965}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552470021, "stop": 1764552470071}], "attachments": [{"name": "时区处理", "source": "1a26f8b2-f0eb-462f-819f-68e001fa063f-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "8d29c872-23be-424f-b884-05b8a6349984-attachment.txt", "type": "text/plain"}], "start": 1764552470020, "stop": 1764552470071}, {"name": "轮询中（已等待8.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "8ec58f90-5827-4aa4-ad2f-d4ac9e9a3418-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "fe8aa298-93eb-426f-9060-4a353cad58cf-attachment.txt", "type": "text/plain"}], "start": 1764552470071, "stop": 1764552470072}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "fe63ca14-d6b6-402a-b58c-6fa186becbfe-attachment.txt", "type": "text/plain"}], "start": 1764552470072, "stop": 1764552470072}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552472121, "stop": 1764552472174}], "attachments": [{"name": "时区处理", "source": "e744acf8-42a0-48ae-98e5-d468df570a57-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "c9b258bf-f171-4be8-8eb6-07d861121fe6-attachment.txt", "type": "text/plain"}], "start": 1764552472120, "stop": 1764552472174}, {"name": "轮询中（已等待10.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "352eab4c-9783-4d00-9a51-c0ab999dcad2-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e07bd1ac-4abb-49ae-82ca-1b0992c14c2a-attachment.txt", "type": "text/plain"}], "start": 1764552472174, "stop": 1764552472175}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "c7a62ebd-ed5a-46b7-b4ce-aa82eb1a6542-attachment.txt", "type": "text/plain"}], "start": 1764552472175, "stop": 1764552472175}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552474227, "stop": 1764552474277}], "attachments": [{"name": "时区处理", "source": "b52052e3-ebfa-4ce5-8ee6-fbb81cc77fda-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "9043163c-d403-4627-a8e8-86b9cc9646b9-attachment.txt", "type": "text/plain"}], "start": 1764552474226, "stop": 1764552474277}, {"name": "轮询中（已等待12.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "5954ba47-c801-44a0-95a8-b9715b186f58-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "64cad4a6-3cd4-4a30-a668-e0cc433cf1c6-attachment.txt", "type": "text/plain"}], "start": 1764552474277, "stop": 1764552474278}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "7753f391-087d-4898-af45-0d02c38b70cc-attachment.txt", "type": "text/plain"}], "start": 1764552474278, "stop": 1764552474278}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552476331, "stop": 1764552476381}], "attachments": [{"name": "时区处理", "source": "a1fe411c-cb9c-4f3b-8227-0614892def9b-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "04af3747-b773-4b65-9b7b-1ef90224caf6-attachment.txt", "type": "text/plain"}], "start": 1764552476330, "stop": 1764552476381}, {"name": "轮询中（已等待14.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "d4382db6-0c17-46b2-8991-4dcfe29c221d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "5ee956d4-5bd9-400d-b3f5-878976944669-attachment.txt", "type": "text/plain"}], "start": 1764552476381, "stop": 1764552476382}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "e4fbbcd0-4c25-4042-b0d5-89e3e54f7aef-attachment.txt", "type": "text/plain"}], "start": 1764552476382, "stop": 1764552476382}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552478440, "stop": 1764552478490}], "attachments": [{"name": "时区处理", "source": "7d4cb476-1655-4102-8294-f2b630114d65-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "98292023-aaf8-41aa-96ab-3905a757bb9c-attachment.txt", "type": "text/plain"}], "start": 1764552478440, "stop": 1764552478490}, {"name": "轮询中（已等待16.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "099e7ce4-84ef-4e6f-b684-3c929fe39bc0-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e886323a-dafc-494a-89b6-ce5cedd0d4a1-attachment.txt", "type": "text/plain"}], "start": 1764552478490, "stop": 1764552478491}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "a3a714ea-8830-4510-845d-9cceebf0ae61-attachment.txt", "type": "text/plain"}], "start": 1764552478491, "stop": 1764552478491}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552480539, "stop": 1764552480590}], "attachments": [{"name": "时区处理", "source": "c50f3cbb-b133-4292-ae29-11bf4458ca2a-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "2ae85890-129c-4a36-8812-6d5aadebab08-attachment.txt", "type": "text/plain"}], "start": 1764552480538, "stop": 1764552480590}, {"name": "轮询中（已等待19.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "40b4a7f3-e986-4a3a-bfb9-6d1c16584df9-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "19bd4236-cfd3-4b81-86fc-c25ab4eadcd9-attachment.txt", "type": "text/plain"}], "start": 1764552480590, "stop": 1764552480591}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "0e6fd698-1644-48dd-b3be-85bd7ffdeac8-attachment.txt", "type": "text/plain"}], "start": 1764552480591, "stop": 1764552480591}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552482645, "stop": 1764552482699}], "attachments": [{"name": "时区处理", "source": "27373e84-aa17-4c75-aeab-95a760c23c60-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "1166f573-37f8-4334-8a5a-299796a4ca6b-attachment.txt", "type": "text/plain"}], "start": 1764552482644, "stop": 1764552482699}, {"name": "轮询中（已等待21.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "dde006a5-8a30-45a4-a2e6-8353ff149e1f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "cbf16dac-0e6c-439c-9c17-c48da9f41d7a-attachment.txt", "type": "text/plain"}], "start": 1764552482699, "stop": 1764552482700}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "a7fd2dea-eef7-4a92-9b27-cd74aa94f2e2-attachment.txt", "type": "text/plain"}], "start": 1764552482700, "stop": 1764552482700}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552484757, "stop": 1764552484810}], "attachments": [{"name": "时区处理", "source": "4258e148-fdbd-4597-98fb-d5d454866be0-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "2711dcf7-9316-4e72-8f43-d949eeac4a8d-attachment.txt", "type": "text/plain"}], "start": 1764552484756, "stop": 1764552484810}, {"name": "轮询中（已等待23.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b9f384d9-c9d1-44c2-b591-aebeb75c841b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d973e2a1-aaf7-4c2d-989e-afbcbe2277aa-attachment.txt", "type": "text/plain"}], "start": 1764552484810, "stop": 1764552484810}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "3452aa7d-3076-41d5-a6a5-ef22bae2c1e7-attachment.txt", "type": "text/plain"}], "start": 1764552484810, "stop": 1764552484811}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552486872, "stop": 1764552486921}], "attachments": [{"name": "时区处理", "source": "27dac027-2ddc-4800-a59b-9872a9716f93-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "c7548e1c-67dd-46d0-83ec-2a3ff677e2dc-attachment.txt", "type": "text/plain"}], "start": 1764552486871, "stop": 1764552486921}, {"name": "轮询中（已等待25.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "fc547e53-5583-4abd-901e-7fa8a563e3cd-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "7407903a-4bc5-4219-8b1c-7a997ad20974-attachment.txt", "type": "text/plain"}], "start": 1764552486921, "stop": 1764552486921}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "f212ff7b-b0ab-4257-bdd0-b6b22b57996e-attachment.txt", "type": "text/plain"}], "start": 1764552486921, "stop": 1764552486922}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552488973, "stop": 1764552489023}], "attachments": [{"name": "时区处理", "source": "ac7f41a2-60f1-41b9-85be-70f1141707d1-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "be7fd9e7-8393-4d59-92be-fef33f3f1111-attachment.txt", "type": "text/plain"}], "start": 1764552488972, "stop": 1764552489023}, {"name": "轮询中（已等待27.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ff0b00b9-229c-4ea0-8586-cac7c52672fb-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2d4b50cf-4a2b-45c1-9ba7-ca35ee36b0db-attachment.txt", "type": "text/plain"}], "start": 1764552489023, "stop": 1764552489024}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "8522a317-bcab-4c1f-b68e-7c5a1040046f-attachment.txt", "type": "text/plain"}], "start": 1764552489024, "stop": 1764552489024}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764552491076, "stop": 1764552491135}], "attachments": [{"name": "时区处理", "source": "65e805b2-5eee-43de-a366-a5b445e7d792-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "bc096dc6-51fc-4742-9f40-c28212c538be-attachment.txt", "type": "text/plain"}], "start": 1764552491075, "stop": 1764552491135}, {"name": "轮询中（已等待29.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "06457a6c-ec16-4b4d-9f39-8e82aa2e1c8d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e3e3ba7f-28be-4389-9a9a-47c43282985a-attachment.txt", "type": "text/plain"}], "start": 1764552491135, "stop": 1764552491136}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "cf194603-5b81-4fd5-8ca9-31ed5d2c25ef-attachment.txt", "type": "text/plain"}], "start": 1764552491136, "stop": 1764552491136}, {"name": "时区查询轮询超时", "status": "passed", "attachments": [{"name": "处理说明", "source": "d2dca838-c5b2-4e37-8c46-d2708fb1780a-attachment.txt", "type": "text/plain"}], "start": 1764552493138, "stop": 1764552493138}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "73384b59-7df7-44aa-9393-9181bcdeef57-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "343aae65-c3c5-4ff5-9a07-bcf71bfb0b05-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "862a7bee-0854-4d68-a806-3d54b1885318-attachment.txt", "type": "text/plain"}], "start": 1764552493189, "stop": 1764552493190}], "start": 1764552493139, "stop": 1764552493190}], "attachments": [{"name": "时区处理", "source": "26a4c618-20ae-483f-bc77-f058544ae1bb-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "c750de97-16a2-43e4-8e78-0c21657affc5-attachment.txt", "type": "text/plain"}], "start": 1764552493138, "stop": 1764552493190}, {"name": "时区查询无结果", "status": "passed", "attachments": [{"name": "异常详情", "source": "9a38b9bb-3652-4381-83ce-1fa80d59a4f8-attachment.txt", "type": "text/plain"}, {"name": "执行SQL", "source": "09759844-1b14-4a15-a4ba-1fb5f8c894c0-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d3bf059c-fc20-44e7-abac-fa76e6ff4648-attachment.txt", "type": "text/plain"}, {"name": "时区偏移量（小时）", "source": "7b95880e-c59f-4860-9536-1f52e4953856-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "907d8f77-7e03-4187-af3e-23afbf72957a-attachment.txt", "type": "text/plain"}], "start": 1764552493190, "stop": 1764552493192}], "start": 1764552461549, "stop": 1764552493192}], "start": 1764552461549, "stop": 1764552493192}], "attachments": [{"name": "log", "source": "f8f7e634-6c97-41c7-a92c-3766df8d2bea-attachment.txt", "type": "text/plain"}], "start": 1764552461549, "stop": 1764552493192, "uuid": "53eb48b7-5730-498d-8bd6-18a7ed3e5912", "historyId": "ee22f4e3f38b389f4bb90b07f29a6cd0", "testCaseId": "ee22f4e3f38b389f4bb90b07f29a6cd0", "fullName": "test_vps.test_lianxi2.TestVPSOrderSend1#test_dbquery_addsalve_MT5orderSend", "labels": [{"name": "feature", "value": "VPS策略下单-开仓的场景校验-buy"}, {"name": "story", "value": "场景1：复制下单-手数0.1-1，总订单3，总手数1"}, {"name": "tag", "value": "@pytest.mark.usefixtures('class_random_str')"}, {"name": "tag", "value": "flaky(reruns=0, reruns_delay=0)"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_lianxi2"}, {"name": "subSuite", "value": "TestVPSOrdersendbuy"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "10688-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_lianxi2"}]}