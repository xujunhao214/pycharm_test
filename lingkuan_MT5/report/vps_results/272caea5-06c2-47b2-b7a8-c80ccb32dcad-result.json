{"name": "数据库校验-策略开仓-跟单指令及订单详情数据检查", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）", "trace": "self = <lingkuan_MT5.test_vps.test_lianxi.TestLeakageopen_level.TestLeakageopen object at 0x000001C1DB320760>\nvar_manager = <lingkuan_MT5.commons.variable_manager.VariableManager object at 0x000001C1DB3263A0>\ndb_transaction = <pymysql.connections.Connection object at 0x000001C1DB4744C0>\n\n    @allure.title(\"数据库校验-策略开仓-跟单指令及订单详情数据检查\")\n    def test_dbquery_addsalve_orderSend(self, var_manager, db_transaction):\n        with allure.step(\"1. 获取订单详情表账号数据\"):\n            MT5vps_user_accounts_1 = var_manager.get_variable(\"MT5vps_user_accounts_1\")\n            sql = f\"\"\"\n                SELECT\n                    fod.size,\n                    fod.comment,\n                    fod.send_no,\n                    fod.magical,\n                    fod.open_price,\n                    fod.symbol,\n                    fod.order_no,\n                    foi.true_total_lots,\n                    foi.order_no,\n                    foi.operation_type,\n                    foi.create_time,\n                    foi.status,\n                    foi.total_lots,\n                    foi.total_orders\n                FROM\n                    follow_order_detail fod\n                INNER JOIN\n                    follow_order_instruct foi\n                ON\n                    foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci\n                WHERE foi.operation_type = %s\n                    AND fod.account = %s\n                    AND fod.comment = %s\n                    \"\"\"\n            params = (\n                '0',\n                MT5vps_user_accounts_1,\n                \"changjing1\"\n            )\n    \n            # 调用轮询等待方法（带时间范围过滤）\n>           db_data = self.query_database_with_time_with_timezone(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"fod.open_time\"\n            )\n\ntest_vps\\test_lianxi.py:529: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuan_MT5.test_vps.test_lianxi.TestLeakageopen_level.TestLeakageopen object at 0x000001C1DB320760>\ndb_transaction = <pymysql.connections.Connection object at 0x000001C1DB4744C0>\nsql = '\\n                    SELECT \\n                        fod.size,\\n                        fod.comment,\\n             ...\\n                        AND fod.account = %s\\n                        AND fod.comment = %s\\n                        '\nparams = ('0', '31492', 'changjing1'), time_field = 'fod.open_time'\ntime_range = 1, order_by = 'create_time DESC', timeout = 30, poll_interval = 2\nstable_period = 2, timezone_offset = 5, attach_to_allure = True\n\n    def query_database_with_time_with_timezone(\n            self,\n            db_transaction: pymysql.connections.Connection,\n            sql: str,\n            params: tuple = (),\n            time_field: Optional[str] = None,\n            time_range: int = MYSQL_TIME,\n            order_by: str = \"create_time DESC\",\n            timeout: int = WAIT_TIMEOUT,\n            poll_interval: int = POLL_INTERVAL,\n            stable_period: int = STBLE_PERIOD,\n            timezone_offset: int = TIMEZONE_OFFSET,\n            attach_to_allure: bool = True\n    ) -> List[Dict[str, Any]]:\n        \"\"\"带时区转换的轮询查询（带Allure分层提示）\"\"\"\n        offset_str = f\"{timezone_offset:+03d}:00\"  # 转换为时区字符串（如+08:00）\n        start_time = time.time()\n        last_result = None\n        stable_start_time = None\n        final_result = None\n    \n        # 生成固定时间范围（轮询开始时计算一次）\n        poll_start_datetime = datetime.datetime.now()\n        fixed_time_start = (poll_start_datetime - datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        fixed_time_end = (poll_start_datetime + datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n    \n        logger.info(f\"[{self._get_current_time()}] 开始轮询（时区{offset_str}）| 超时: {timeout}秒\")\n    \n        with allure.step(f\"轮询等待数据稳定（时区{offset_str}，超时{timeout}秒）\"):\n            allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n            allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n            allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n            allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                          allure.attachment_type.TEXT)\n    \n            while time.time() - start_time < timeout:\n                try:\n                    db_transaction.commit()\n                    # 执行带时区转换的单次查询\n                    result = self._execute_query_with_timezone(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=params,\n                        time_field=time_field,\n                        order_by=order_by,\n                        fixed_time_start=fixed_time_start,  # 传递固定时间参数\n                        fixed_time_end=fixed_time_end,\n                        timezone_offset=offset_str,\n                        attach_to_allure=False\n                    )\n    \n                    # 记录轮询状态\n                    elapsed = time.time() - start_time\n                    with allure.step(f\"轮询中（已等待{elapsed:.1f}秒）\"):\n                        allure.attach(f\"结果数量: {len(result)}\", \"当前状态\", allure.attachment_type.TEXT)\n                        allure.attach(f\"剩余时间: {timeout - elapsed:.1f}秒\", \"超时倒计时\", allure.attachment_type.TEXT)\n    \n                    # 复用数据稳定判断逻辑\n                    if len(result) > 0 and self._is_result_stable(result, last_result):\n                        if stable_start_time is None:\n                            stable_start_time = time.time()\n                            with allure.step(\"数据首次稳定\"):\n                                allure.attach(f\"开始稳定期计时（需保持{stable_period}秒）\", \"状态说明\",\n                                              allure.attachment_type.TEXT)\n                        elif time.time() - stable_start_time >= stable_period:\n                            final_result = result\n                            logger.info(f\"[{self._get_current_time()}] 数据稳定，轮询结束\")\n                            with allure.step(\"数据稳定达标\"):\n                                allure.attach(f\"已稳定{stable_period}秒（总耗时{time.time() - start_time:.1f}秒）\",\n                                              \"结果说明\", allure.attachment_type.TEXT)\n                            break\n                    else:\n                        stable_start_time = None\n                        with allure.step(\"数据发生变化\"):\n                            allure.attach(\"重置稳定期计时器\", \"状态说明\", allure.attachment_type.TEXT)\n    \n                    last_result = result\n                    time.sleep(poll_interval)\n    \n                except Exception as e:\n                    with allure.step(\"时区查询轮询异常\"):\n                        allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                        allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                        allure.attach(str(e), \"错误详情\", allure.attachment_type.TEXT)\n                    logger.warning(f\"[{self._get_current_time()}] 轮询异常: {str(e)} | 继续等待\")\n                    time.sleep(poll_interval)\n    \n            # 超时处理\n            if final_result is None:\n                with allure.step(\"时区查询轮询超时\"):\n                    allure.attach(f\"超过{timeout}秒未达到稳定状态，获取最终结果\", \"处理说明\",\n                                  allure.attachment_type.TEXT)\n                final_result = self._execute_query_with_timezone(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    time_field=time_field,\n                    order_by=order_by,\n                    fixed_time_start=fixed_time_start,\n                    fixed_time_end=fixed_time_end,\n                    timezone_offset=offset_str,\n                    attach_to_allure=True\n                )\n    \n            # 附加结果到报告\n            if final_result and attach_to_allure:\n                with allure.step(\"带时区查询最终结果\"):\n                    allure.attach(self.serialize_data(final_result[:50]), \"结果预览\", allure.attachment_type.JSON)\n    \n            if not final_result:\n                with allure.step(\"时区查询无结果\"):\n                    allure.attach(f\"轮询{timeout}秒后仍无查询结果\", \"异常详情\", allure.attachment_type.TEXT)\n>               raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\nE               TimeoutError: Failed: 时区查询超时（30秒）\n\ncommons\\api_base.py:1114: TimeoutError"}, "description": "\n        ### 用例说明\n        - 前置条件：有vps策略和vps跟单\n        - 操作步骤：\n          1. 修改vps跟单账号开仓-关闭\n          2. 进行开仓\n          3. 跟单账号开仓失败，有漏单数据，把redis数据和MySQL数据进行校验\n          4. 修改vps跟单账号开仓-开启\n          5. 进行补单操作，然后平仓\n        - 预期结果：vps跟单账号开仓-关闭，有漏单数据\n        ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_MT5\\test_vps\\test_lianxi.py\", line 529, in test_dbquery_addsalve_orderSend\n    db_data = self.query_database_with_time_with_timezone(\n  File \"D:\\pycharm_test\\lingkuan_MT5\\commons\\api_base.py\", line 1114, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "轮询等待数据稳定（时区+05:00，超时30秒）", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_MT5\\commons\\api_base.py\", line 1114, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "3b8c13d4-27c4-46e0-b158-2a17fe22d79d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "f601f366-bf7e-4c16-9f6f-1b77055de64a-attachment.txt", "type": "text/plain"}], "start": 1761270201780, "stop": 1761270201829}], "attachments": [{"name": "时区处理", "source": "367e7c96-bbf0-48b5-b88a-f9e9994d6ba2-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "92c9219c-17f7-4dbb-ae73-628603e9ecb2-attachment.txt", "type": "text/plain"}], "start": 1761270201780, "stop": 1761270201829}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "9954685f-9acf-42c4-855e-edbbc1da23d7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "540bf772-ad7e-49c2-8b93-0c79e740aac2-attachment.txt", "type": "text/plain"}], "start": 1761270201829, "stop": 1761270201830}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "9d1e8b33-186a-45aa-a6d0-ff2c3f6e2432-attachment.txt", "type": "text/plain"}], "start": 1761270201830, "stop": 1761270201830}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "7a4b9083-beba-425f-a455-477a78769abe-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "b01f0b14-5d88-4cec-a635-3966eb5fe15a-attachment.txt", "type": "text/plain"}], "start": 1761270203887, "stop": 1761270203934}], "attachments": [{"name": "时区处理", "source": "3a15b1a8-0415-41c4-82e8-c2d4c7de0e36-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "f374f50c-3423-4d33-88fd-1e289ca693b3-attachment.txt", "type": "text/plain"}], "start": 1761270203886, "stop": 1761270203934}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "639aa8dc-7fad-442f-bfde-fe27d7df389d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2d65fecf-b207-488b-8384-6f184f9f09d1-attachment.txt", "type": "text/plain"}], "start": 1761270203934, "stop": 1761270203935}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "6c885b67-1814-4769-bed2-ff7d509758ec-attachment.txt", "type": "text/plain"}], "start": 1761270203935, "stop": 1761270203936}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "e063ac90-9084-438b-9a6d-ad5f456cf8e1-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d4af93f1-6885-453e-9c58-d9ee3f7c08c0-attachment.txt", "type": "text/plain"}], "start": 1761270205991, "stop": 1761270206040}], "attachments": [{"name": "时区处理", "source": "900ec89c-19f1-404d-907e-bb47042091a7-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "2a7c0970-7c1e-4973-acca-f61e12f69569-attachment.txt", "type": "text/plain"}], "start": 1761270205990, "stop": 1761270206040}, {"name": "轮询中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "9aa52c6b-9eb5-4619-99a1-9ffe192fe50a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "7cf52293-2c51-4034-b378-67050cc49db6-attachment.txt", "type": "text/plain"}], "start": 1761270206040, "stop": 1761270206041}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "ec650ed3-b36f-462f-b5b8-d40b8686433e-attachment.txt", "type": "text/plain"}], "start": 1761270206041, "stop": 1761270206041}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "a6ac0910-790b-4c68-ab02-4d34f299c4c3-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "718895aa-9949-4196-a372-fe2d53c93ae9-attachment.txt", "type": "text/plain"}], "start": 1761270208103, "stop": 1761270208158}], "attachments": [{"name": "时区处理", "source": "4f52210e-6972-4a4f-ac13-ffc24c4b0feb-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "fb554f52-97f3-4857-94c2-7aff54bc67d0-attachment.txt", "type": "text/plain"}], "start": 1761270208102, "stop": 1761270208158}, {"name": "轮询中（已等待6.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "eb8e31b7-7468-453e-a491-0a5edd567709-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "6880e90f-e0ef-494f-abe8-6ce19c8b5f22-attachment.txt", "type": "text/plain"}], "start": 1761270208158, "stop": 1761270208159}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "d0025345-c51f-4368-969c-fe95504d2da5-attachment.txt", "type": "text/plain"}], "start": 1761270208159, "stop": 1761270208159}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f7ffe1f4-8e7f-488d-85b0-f325de7279bb-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ca3cba1c-4c5e-4d71-9f16-76f96506f469-attachment.txt", "type": "text/plain"}], "start": 1761270210216, "stop": 1761270210265}], "attachments": [{"name": "时区处理", "source": "cec64b3b-06c1-42d9-8157-a844e5b499c5-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "7ff47042-edce-4744-9cb3-534d07c21b84-attachment.txt", "type": "text/plain"}], "start": 1761270210215, "stop": 1761270210265}, {"name": "轮询中（已等待8.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "4366ab06-c3c3-4c1b-9887-7e189af6fd28-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "5a5ad52b-af49-4e26-91fa-af3ce83bca1d-attachment.txt", "type": "text/plain"}], "start": 1761270210265, "stop": 1761270210266}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "b113f35a-0288-46cf-bf28-463cf8fe26c2-attachment.txt", "type": "text/plain"}], "start": 1761270210266, "stop": 1761270210266}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "8fcd9604-9bb6-4df2-80f0-f60487aeeb20-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c52d6cb3-fca1-4eda-9f8a-5403da13d7da-attachment.txt", "type": "text/plain"}], "start": 1761270212326, "stop": 1761270212374}], "attachments": [{"name": "时区处理", "source": "53b13873-0269-4d72-bdab-72ffe6fa4b99-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "1771947e-c96e-4b50-80f9-4c28344b3fc1-attachment.txt", "type": "text/plain"}], "start": 1761270212325, "stop": 1761270212374}, {"name": "轮询中（已等待10.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "97b081d5-e378-40cc-950c-6c4a7a95688f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d6c9a717-4850-4b75-8329-675c49e9e0ec-attachment.txt", "type": "text/plain"}], "start": 1761270212375, "stop": 1761270212375}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "037048b2-0f8e-4461-88cb-8e6bd1dbd99f-attachment.txt", "type": "text/plain"}], "start": 1761270212375, "stop": 1761270212376}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "a0c835c8-e855-4c48-9481-43df57be2599-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "08fc462d-fe34-4689-bb75-bdd29aed9337-attachment.txt", "type": "text/plain"}], "start": 1761270214433, "stop": 1761270214485}], "attachments": [{"name": "时区处理", "source": "b45d2ab7-5e10-4e1a-af08-19312d0f1970-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "b3a615bc-f210-4c71-879c-359655f066a2-attachment.txt", "type": "text/plain"}], "start": 1761270214433, "stop": 1761270214485}, {"name": "轮询中（已等待12.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "3b4d05b8-6537-4edd-8832-ed9003b426a8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "336b68dc-c53a-45d5-b445-3173de87321c-attachment.txt", "type": "text/plain"}], "start": 1761270214485, "stop": 1761270214486}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "0b827d19-e4e5-408c-a3cd-00dbd78cdb0b-attachment.txt", "type": "text/plain"}], "start": 1761270214486, "stop": 1761270214486}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "819ea073-fd45-41dc-ad46-f5934d625124-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a03d7018-ca69-4344-8a7c-62105f0ee2d7-attachment.txt", "type": "text/plain"}], "start": 1761270216542, "stop": 1761270216592}], "attachments": [{"name": "时区处理", "source": "8ea8beb1-1d7e-4565-8f6c-490e247bb4c2-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "80fddd88-dc11-4845-a7e1-6da2245ab62b-attachment.txt", "type": "text/plain"}], "start": 1761270216541, "stop": 1761270216592}, {"name": "轮询中（已等待14.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "819269fb-ba3c-4fdb-ac89-ac4693a1b6a5-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d2e2c6ca-b9d7-480b-84c6-f1d3ebd95461-attachment.txt", "type": "text/plain"}], "start": 1761270216592, "stop": 1761270216593}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "cdd4ee63-0cdd-4573-b156-48a372fafc3f-attachment.txt", "type": "text/plain"}], "start": 1761270216593, "stop": 1761270216594}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "95a41a9a-9b97-4b09-a84c-4e3792bb3c2a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "fd39f7fc-ce82-4715-9ed6-496555687be4-attachment.txt", "type": "text/plain"}], "start": 1761270218653, "stop": 1761270218710}], "attachments": [{"name": "时区处理", "source": "865ee8c2-c909-4be8-8270-2435c2ede02d-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "b0fdd9c0-ccaf-4fac-b89c-304555eff07c-attachment.txt", "type": "text/plain"}], "start": 1761270218653, "stop": 1761270218710}, {"name": "轮询中（已等待17.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "05f4a6d9-2b1e-4210-9bdd-3ef4841151d8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "a73e0381-0aa3-4ff3-9cca-7568d4e0fa61-attachment.txt", "type": "text/plain"}], "start": 1761270218710, "stop": 1761270218710}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "afb38dd4-f93f-4e4d-9b4b-01d4a2480c82-attachment.txt", "type": "text/plain"}], "start": 1761270218710, "stop": 1761270218711}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "656a35c3-1d15-4680-b6a5-49bb3801e987-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "0e62a157-17db-4f93-88cd-6dd588f61fc1-attachment.txt", "type": "text/plain"}], "start": 1761270220768, "stop": 1761270220816}], "attachments": [{"name": "时区处理", "source": "b3677684-1759-4cab-86f9-1467d78fcc1e-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "c0c3c9df-b736-4550-885f-efa21ac20a94-attachment.txt", "type": "text/plain"}], "start": 1761270220766, "stop": 1761270220816}, {"name": "轮询中（已等待19.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "8c0a19aa-5fc2-45c4-a6da-2929915ec935-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ae68ff27-43c6-4d41-b151-529a69c17b73-attachment.txt", "type": "text/plain"}], "start": 1761270220816, "stop": 1761270220816}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "e467ba40-bc51-4f69-8cd1-091244c28f8d-attachment.txt", "type": "text/plain"}], "start": 1761270220817, "stop": 1761270220817}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "c4d17afd-f73c-41ee-8896-3811b5e6dbd3-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "9903958d-a828-45fa-b69d-153dd7471f65-attachment.txt", "type": "text/plain"}], "start": 1761270222865, "stop": 1761270222923}], "attachments": [{"name": "时区处理", "source": "da9aba56-4549-4bf1-8a89-6e53626a1792-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "6b09eeb9-fdc5-4a3c-b535-c0fe18e41d64-attachment.txt", "type": "text/plain"}], "start": 1761270222864, "stop": 1761270222923}, {"name": "轮询中（已等待21.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b6b61f4b-b434-4116-9b16-85bcf669f8b8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "650b6129-6119-4bcd-8764-6b8c371cd6fa-attachment.txt", "type": "text/plain"}], "start": 1761270222923, "stop": 1761270222924}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "b63ea91b-45fd-452b-a461-b4ecfe6908d1-attachment.txt", "type": "text/plain"}], "start": 1761270222924, "stop": 1761270222924}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "09c01f7a-06ce-433a-a968-8069fc4480f8-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "cbe7cec5-1838-47fa-8847-1b48b248b026-attachment.txt", "type": "text/plain"}], "start": 1761270224976, "stop": 1761270225026}], "attachments": [{"name": "时区处理", "source": "03eab9df-9c5c-4f6a-91b2-4e63be11e54a-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "03986064-b2a7-477d-a84b-146dd1b08b77-attachment.txt", "type": "text/plain"}], "start": 1761270224975, "stop": 1761270225026}, {"name": "轮询中（已等待23.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "65c6a3a4-c320-49fa-8091-8e5aa63f5772-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c31e99cd-398e-49bd-b48b-7b8e1cd1eb7a-attachment.txt", "type": "text/plain"}], "start": 1761270225026, "stop": 1761270225027}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "5d12a1f0-a289-4257-b79d-d151c8cf5735-attachment.txt", "type": "text/plain"}], "start": 1761270225027, "stop": 1761270225027}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "1aebbb66-9eb9-4494-9aeb-c6fa4950a81f-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "be6e3a85-21da-4b2e-b5dd-c81e795009dd-attachment.txt", "type": "text/plain"}], "start": 1761270227086, "stop": 1761270227133}], "attachments": [{"name": "时区处理", "source": "d30a5a52-cc06-447d-b538-da97ae71946d-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "0aa30ebc-271b-4e52-a922-23b7392714e8-attachment.txt", "type": "text/plain"}], "start": 1761270227086, "stop": 1761270227133}, {"name": "轮询中（已等待25.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "dea84954-5139-4ba0-a30d-26189d57bcb6-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "a997657a-720b-458d-b56c-8935932b767a-attachment.txt", "type": "text/plain"}], "start": 1761270227133, "stop": 1761270227134}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "22e8cca9-d2c5-4f9b-bfcb-74200df8128a-attachment.txt", "type": "text/plain"}], "start": 1761270227134, "stop": 1761270227134}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "87b24f5a-6b90-4244-9470-1e7ad9698795-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "2d7f3fa1-3da3-4c3d-9cfc-f742b14aac1c-attachment.txt", "type": "text/plain"}], "start": 1761270229210, "stop": 1761270229259}], "attachments": [{"name": "时区处理", "source": "a20d239e-3d7e-4e93-886f-61fadad9462a-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "d2f5e743-31b5-4787-ad09-911856fce680-attachment.txt", "type": "text/plain"}], "start": 1761270229207, "stop": 1761270229259}, {"name": "轮询中（已等待27.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "d63df0f0-6fda-43b8-a723-ac7a784eddf5-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1a647e6f-bbfd-41d9-bf53-d5b18b520463-attachment.txt", "type": "text/plain"}], "start": 1761270229259, "stop": 1761270229262}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "da97da87-6728-4ba0-abec-07055b1ddecf-attachment.txt", "type": "text/plain"}], "start": 1761270229262, "stop": 1761270229262}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "258a729b-d26c-4347-9108-2ccfb1c633fe-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c91a7cc8-53ad-4a1e-8372-c494f07c5aaf-attachment.txt", "type": "text/plain"}], "start": 1761270231323, "stop": 1761270231372}], "attachments": [{"name": "时区处理", "source": "6a0a7d80-94a7-4eec-bcdd-7434f4456d13-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "bf243d99-540e-4baf-ab50-ab27067a0ad7-attachment.txt", "type": "text/plain"}], "start": 1761270231322, "stop": 1761270231372}, {"name": "轮询中（已等待29.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "dd116cbc-f645-4197-baa5-e344d745e768-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2788bbab-db49-4bf9-bc60-1172bba2861e-attachment.txt", "type": "text/plain"}], "start": 1761270231372, "stop": 1761270231372}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "f65a764e-4d3b-4f6c-9a7e-80d48953d4d3-attachment.txt", "type": "text/plain"}], "start": 1761270231372, "stop": 1761270231373}, {"name": "时区查询轮询超时", "status": "passed", "attachments": [{"name": "处理说明", "source": "88939c21-2973-4d01-bf01-bba89a1f0226-attachment.txt", "type": "text/plain"}], "start": 1761270233380, "stop": 1761270233381}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "d9087ac0-4d58-42f2-9d6d-af4d7312e0fe-attachment.json", "type": "application/json"}], "start": 1761270233432, "stop": 1761270233433}], "attachments": [{"name": "执行SQL", "source": "b55eb4fa-881c-49d3-b3ad-6a3574f31f87-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "84346be7-6677-450e-9abd-72dcb90a16f6-attachment.txt", "type": "text/plain"}], "start": 1761270233382, "stop": 1761270233433}], "attachments": [{"name": "时区处理", "source": "44da567f-1dbe-4467-bbf0-a44bd41f9dff-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "c665cec5-c648-43b8-82cf-7e92b5f95dc1-attachment.txt", "type": "text/plain"}], "start": 1761270233381, "stop": 1761270233433}, {"name": "时区查询无结果", "status": "passed", "attachments": [{"name": "异常详情", "source": "17473a61-d4ee-4dd2-9fc7-96c123a9a8f0-attachment.txt", "type": "text/plain"}], "start": 1761270233433, "stop": 1761270233434}], "attachments": [{"name": "执行SQL", "source": "8b1cc381-a0cf-4e37-a907-e4c9027a90ec-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "39616e4a-d886-4a4a-b2ec-a2d661c156bd-attachment.txt", "type": "text/plain"}, {"name": "时区偏移量（小时）", "source": "571b6166-21a6-4b33-b14e-57726da0dd8b-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "47b3555d-0aaa-4d3f-8999-906a8824cfe3-attachment.txt", "type": "text/plain"}], "start": 1761270201732, "stop": 1761270233434}], "start": 1761270201732, "stop": 1761270233435}], "attachments": [{"name": "log", "source": "78a54dd2-39b7-4ad9-be0e-538400c7d3b0-attachment.txt", "type": "text/plain"}], "start": 1761270201732, "stop": 1761270233436, "uuid": "e3c6595a-f9d5-4769-8f2c-b930075f53ba", "historyId": "43545371d930b130ca3c989e18525ce9", "testCaseId": "43545371d930b130ca3c989e18525ce9", "fullName": "test_vps.test_lianxi.TestLeakageopen#test_dbquery_addsalve_orderSend", "labels": [{"name": "story", "value": "场景1：VPS策略下单-漏开"}, {"name": "feature", "value": "VPS策略下单-漏单场景"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_lianxi"}, {"name": "subSuite", "value": "TestLeakageopen_level"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "15992-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_lianxi"}]}