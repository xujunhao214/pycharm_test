{"name": "数据库校验-策略平仓-跟单指令及订单详情数据检查", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）", "trace": "self = <lingkuan_MT5.test_vps.test_lianxi.TestLeakageopen_level.TestLeakageopen object at 0x000001C1DB326190>\nvar_manager = <lingkuan_MT5.commons.variable_manager.VariableManager object at 0x000001C1DB3263A0>\ndb_transaction = <pymysql.connections.Connection object at 0x000001C1DB3F67F0>\n\n    @allure.title(\"数据库校验-策略平仓-跟单指令及订单详情数据检查\")\n    def test_dbquery_addsalve_orderSendclose(self, var_manager, db_transaction):\n        with allure.step(\"1. 获取订单详情表账号数据\"):\n            MT5vps_user_accounts_1 = var_manager.get_variable(\"MT5vps_user_accounts_1\")\n            MT5vps_addslave_id = var_manager.get_variable(\"MT5vps_addslave_id\")\n            sql = f\"\"\"\n                SELECT\n                    fod.size,\n                    fod.comment,\n                    fod.close_no,\n                    fod.magical,\n                    fod.open_price,\n                    fod.symbol,\n                    fod.order_no,\n                    foi.true_total_lots,\n                    foi.order_no,\n                    foi.operation_type,\n                    foi.create_time,\n                    foi.status,\n                    foi.min_lot_size,\n                    foi.max_lot_size,\n                    foi.total_lots,\n                    foi.master_order,\n                    foi.total_orders\n                FROM\n                    follow_order_detail fod\n                INNER JOIN\n                    follow_order_instruct foi\n                ON\n                    foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci\n                WHERE foi.operation_type = %s\n                    AND fod.account = %s\n                    AND fod.trader_id = %s\n                    AND fod.comment = %s\n                    \"\"\"\n            params = (\n                '1',\n                MT5vps_user_accounts_1,\n                MT5vps_addslave_id,\n                \"changjing1\"\n            )\n    \n            # 调用轮询等待方法（带时间范围过滤）\n>           db_data = self.query_database_with_time_with_timezone(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"fod.close_time\"\n            )\n\ntest_vps\\test_lianxi.py:717: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuan_MT5.test_vps.test_lianxi.TestLeakageopen_level.TestLeakageopen object at 0x000001C1DB326190>\ndb_transaction = <pymysql.connections.Connection object at 0x000001C1DB3F67F0>\nsql = '\\n                    SELECT \\n                        fod.size,\\n                        fod.comment,\\n             ...                        AND fod.trader_id = %s\\n                        AND fod.comment = %s\\n                        '\nparams = ('1', '31492', 12970, 'changjing1'), time_field = 'fod.close_time'\ntime_range = 1, order_by = 'create_time DESC', timeout = 30, poll_interval = 2\nstable_period = 2, timezone_offset = 5, attach_to_allure = True\n\n    def query_database_with_time_with_timezone(\n            self,\n            db_transaction: pymysql.connections.Connection,\n            sql: str,\n            params: tuple = (),\n            time_field: Optional[str] = None,\n            time_range: int = MYSQL_TIME,\n            order_by: str = \"create_time DESC\",\n            timeout: int = WAIT_TIMEOUT,\n            poll_interval: int = POLL_INTERVAL,\n            stable_period: int = STBLE_PERIOD,\n            timezone_offset: int = TIMEZONE_OFFSET,\n            attach_to_allure: bool = True\n    ) -> List[Dict[str, Any]]:\n        \"\"\"带时区转换的轮询查询（带Allure分层提示）\"\"\"\n        offset_str = f\"{timezone_offset:+03d}:00\"  # 转换为时区字符串（如+08:00）\n        start_time = time.time()\n        last_result = None\n        stable_start_time = None\n        final_result = None\n    \n        # 生成固定时间范围（轮询开始时计算一次）\n        poll_start_datetime = datetime.datetime.now()\n        fixed_time_start = (poll_start_datetime - datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        fixed_time_end = (poll_start_datetime + datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n    \n        logger.info(f\"[{self._get_current_time()}] 开始轮询（时区{offset_str}）| 超时: {timeout}秒\")\n    \n        with allure.step(f\"轮询等待数据稳定（时区{offset_str}，超时{timeout}秒）\"):\n            allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n            allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n            allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n            allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                          allure.attachment_type.TEXT)\n    \n            while time.time() - start_time < timeout:\n                try:\n                    db_transaction.commit()\n                    # 执行带时区转换的单次查询\n                    result = self._execute_query_with_timezone(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=params,\n                        time_field=time_field,\n                        order_by=order_by,\n                        fixed_time_start=fixed_time_start,  # 传递固定时间参数\n                        fixed_time_end=fixed_time_end,\n                        timezone_offset=offset_str,\n                        attach_to_allure=False\n                    )\n    \n                    # 记录轮询状态\n                    elapsed = time.time() - start_time\n                    with allure.step(f\"轮询中（已等待{elapsed:.1f}秒）\"):\n                        allure.attach(f\"结果数量: {len(result)}\", \"当前状态\", allure.attachment_type.TEXT)\n                        allure.attach(f\"剩余时间: {timeout - elapsed:.1f}秒\", \"超时倒计时\", allure.attachment_type.TEXT)\n    \n                    # 复用数据稳定判断逻辑\n                    if len(result) > 0 and self._is_result_stable(result, last_result):\n                        if stable_start_time is None:\n                            stable_start_time = time.time()\n                            with allure.step(\"数据首次稳定\"):\n                                allure.attach(f\"开始稳定期计时（需保持{stable_period}秒）\", \"状态说明\",\n                                              allure.attachment_type.TEXT)\n                        elif time.time() - stable_start_time >= stable_period:\n                            final_result = result\n                            logger.info(f\"[{self._get_current_time()}] 数据稳定，轮询结束\")\n                            with allure.step(\"数据稳定达标\"):\n                                allure.attach(f\"已稳定{stable_period}秒（总耗时{time.time() - start_time:.1f}秒）\",\n                                              \"结果说明\", allure.attachment_type.TEXT)\n                            break\n                    else:\n                        stable_start_time = None\n                        with allure.step(\"数据发生变化\"):\n                            allure.attach(\"重置稳定期计时器\", \"状态说明\", allure.attachment_type.TEXT)\n    \n                    last_result = result\n                    time.sleep(poll_interval)\n    \n                except Exception as e:\n                    with allure.step(\"时区查询轮询异常\"):\n                        allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                        allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                        allure.attach(str(e), \"错误详情\", allure.attachment_type.TEXT)\n                    logger.warning(f\"[{self._get_current_time()}] 轮询异常: {str(e)} | 继续等待\")\n                    time.sleep(poll_interval)\n    \n            # 超时处理\n            if final_result is None:\n                with allure.step(\"时区查询轮询超时\"):\n                    allure.attach(f\"超过{timeout}秒未达到稳定状态，获取最终结果\", \"处理说明\",\n                                  allure.attachment_type.TEXT)\n                final_result = self._execute_query_with_timezone(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    time_field=time_field,\n                    order_by=order_by,\n                    fixed_time_start=fixed_time_start,\n                    fixed_time_end=fixed_time_end,\n                    timezone_offset=offset_str,\n                    attach_to_allure=True\n                )\n    \n            # 附加结果到报告\n            if final_result and attach_to_allure:\n                with allure.step(\"带时区查询最终结果\"):\n                    allure.attach(self.serialize_data(final_result[:50]), \"结果预览\", allure.attachment_type.JSON)\n    \n            if not final_result:\n                with allure.step(\"时区查询无结果\"):\n                    allure.attach(f\"轮询{timeout}秒后仍无查询结果\", \"异常详情\", allure.attachment_type.TEXT)\n>               raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\nE               TimeoutError: Failed: 时区查询超时（30秒）\n\ncommons\\api_base.py:1114: TimeoutError"}, "description": "\n        ### 用例说明\n        - 前置条件：有vps策略和vps跟单\n        - 操作步骤：\n          1. 修改vps跟单账号开仓-关闭\n          2. 进行开仓\n          3. 跟单账号开仓失败，有漏单数据，把redis数据和MySQL数据进行校验\n          4. 修改vps跟单账号开仓-开启\n          5. 进行补单操作，然后平仓\n        - 预期结果：vps跟单账号开仓-关闭，有漏单数据\n        ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_MT5\\test_vps\\test_lianxi.py\", line 717, in test_dbquery_addsalve_orderSendclose\n    db_data = self.query_database_with_time_with_timezone(\n  File \"D:\\pycharm_test\\lingkuan_MT5\\commons\\api_base.py\", line 1114, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "轮询等待数据稳定（时区+05:00，超时30秒）", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_MT5\\commons\\api_base.py\", line 1114, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "02dfe57c-e1f9-44fb-b893-5979b3a52a5c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "8f265135-212a-4f4c-982f-deaa10cee573-attachment.txt", "type": "text/plain"}], "start": 1761270242292, "stop": 1761270242344}], "attachments": [{"name": "时区处理", "source": "c6111787-a899-4109-89ad-e827eb4cf838-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "b74fac76-f031-4e9f-ad98-e69aa155133e-attachment.txt", "type": "text/plain"}], "start": 1761270242291, "stop": 1761270242344}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "a93ea788-8861-43eb-b4fb-5009154a4187-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "bf79148b-45c8-4be1-af69-91164017334e-attachment.txt", "type": "text/plain"}], "start": 1761270242344, "stop": 1761270242344}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "984c17da-4dfa-4a28-ab15-1d5b475cb494-attachment.txt", "type": "text/plain"}], "start": 1761270242344, "stop": 1761270242345}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "3d84cf6e-2f7c-46ab-a6c5-c3e486d87441-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "cd840618-a31b-4954-b32c-d93344e019a0-attachment.txt", "type": "text/plain"}], "start": 1761270244396, "stop": 1761270244463}], "attachments": [{"name": "时区处理", "source": "41b32f4e-b81a-41bc-a6b8-92fdba17e006-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "097eaa93-c61b-4abb-9ae0-4b32a93e6358-attachment.txt", "type": "text/plain"}], "start": 1761270244395, "stop": 1761270244463}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "0b04afa8-d083-40a8-9933-beeff2f607a2-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "b99b2049-4eca-4bfc-b6c7-442ac22911ae-attachment.txt", "type": "text/plain"}], "start": 1761270244463, "stop": 1761270244464}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "d5499f0d-9190-4fdf-b452-4ef3fa575010-attachment.txt", "type": "text/plain"}], "start": 1761270244464, "stop": 1761270244464}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "4ab0c4aa-efd3-4934-a318-e987254acc93-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "dd667e9f-45a3-4261-8242-c03040f1e454-attachment.txt", "type": "text/plain"}], "start": 1761270246527, "stop": 1761270246578}], "attachments": [{"name": "时区处理", "source": "bcda5fbc-902d-45ae-90d9-93a55b1d122b-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "6a06dc5d-1f66-44df-9e81-dde9a3bc2cc5-attachment.txt", "type": "text/plain"}], "start": 1761270246526, "stop": 1761270246578}, {"name": "轮询中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "37c24d1a-8d06-402e-a717-4b5a7b9b98d7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "b3af95c3-7a0f-41cd-b2fd-8f56c51d129d-attachment.txt", "type": "text/plain"}], "start": 1761270246578, "stop": 1761270246579}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "fe59094c-157f-43dc-96ef-9ac04a0c5d18-attachment.txt", "type": "text/plain"}], "start": 1761270246579, "stop": 1761270246579}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "43f58bb2-22b1-4040-a6d4-ec381fe5895f-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "89bdf97e-5804-4d50-80fd-2cef8409af28-attachment.txt", "type": "text/plain"}], "start": 1761270248631, "stop": 1761270248684}], "attachments": [{"name": "时区处理", "source": "6d301f76-e6d0-4986-bffc-792aa99c57a5-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "8e1f4af8-bf12-4131-90bd-c28212541d47-attachment.txt", "type": "text/plain"}], "start": 1761270248631, "stop": 1761270248684}, {"name": "轮询中（已等待6.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "d5ed1b8d-f6ad-4c1b-a4e3-270f4751d06e-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "8757afd4-fd3e-4502-a708-25bdc5f98666-attachment.txt", "type": "text/plain"}], "start": 1761270248684, "stop": 1761270248684}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "cb9e99e4-b3f1-4cb2-a23b-8c7fee049c9f-attachment.txt", "type": "text/plain"}], "start": 1761270248684, "stop": 1761270248685}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "6ca3d542-aac9-484d-bb90-19fc3bd7e53d-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "81ab97e1-46d0-4fe6-be78-aa8517668008-attachment.txt", "type": "text/plain"}], "start": 1761270250739, "stop": 1761270250791}], "attachments": [{"name": "时区处理", "source": "6f706f4b-8711-431c-974c-f7c428b26542-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "3f9489e7-d971-453b-aab2-22b3af743782-attachment.txt", "type": "text/plain"}], "start": 1761270250739, "stop": 1761270250791}, {"name": "轮询中（已等待8.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "da2741f2-c0e0-40ac-88f9-52cd26982e76-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "cf49e589-4fc8-4fe3-a2a6-8290d40367d0-attachment.txt", "type": "text/plain"}], "start": 1761270250791, "stop": 1761270250791}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "17dd66c2-2372-4593-ba73-b417c03eb1e7-attachment.txt", "type": "text/plain"}], "start": 1761270250791, "stop": 1761270250792}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "95874986-c0dd-42f1-941b-eac2fd00780a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "4d103380-8b23-4e0c-8133-248d5926b456-attachment.txt", "type": "text/plain"}], "start": 1761270252848, "stop": 1761270252901}], "attachments": [{"name": "时区处理", "source": "08771f68-df25-472e-91a3-d1535f797ed8-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "5059524c-95ad-4a0a-b830-65f9adf40e15-attachment.txt", "type": "text/plain"}], "start": 1761270252847, "stop": 1761270252901}, {"name": "轮询中（已等待10.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "14dcd352-01ae-4262-b841-0f66a1550fe7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "6a2583a8-9b5f-49d9-ba00-f9b993c63750-attachment.txt", "type": "text/plain"}], "start": 1761270252901, "stop": 1761270252902}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "f277232b-0aea-47cb-9893-3b75246b489f-attachment.txt", "type": "text/plain"}], "start": 1761270252902, "stop": 1761270252902}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "7068dc3d-e92c-4fba-99ad-983c6b52d742-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "2c433dfe-3b59-4b4e-98b3-9477d80a8c0d-attachment.txt", "type": "text/plain"}], "start": 1761270254966, "stop": 1761270255016}], "attachments": [{"name": "时区处理", "source": "47783dc6-5620-4cc1-af41-26a7a5bf4811-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "1ef3ed59-b992-47c9-927d-983110a8384c-attachment.txt", "type": "text/plain"}], "start": 1761270254965, "stop": 1761270255016}, {"name": "轮询中（已等待12.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "3e99ee48-913b-4688-97eb-12f9cab61414-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2dab2b1c-7acc-45cc-a5c2-93dfa08133bc-attachment.txt", "type": "text/plain"}], "start": 1761270255016, "stop": 1761270255017}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "5d6a17da-a42c-4740-bbf8-c09918065ee2-attachment.txt", "type": "text/plain"}], "start": 1761270255017, "stop": 1761270255018}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "d46e410b-89a1-4ec1-811b-2cebb8543785-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "9d8b317f-c5b7-46ec-bd6a-13a9599a1961-attachment.txt", "type": "text/plain"}], "start": 1761270257086, "stop": 1761270257135}], "attachments": [{"name": "时区处理", "source": "1fac0df3-138d-40e1-9204-447bd13d145d-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "eb8e3524-f7a3-4681-9c90-0eaf437777ec-attachment.txt", "type": "text/plain"}], "start": 1761270257085, "stop": 1761270257135}, {"name": "轮询中（已等待14.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "a689b538-9b76-4314-aa8c-bb9b9ac5c56b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "06164a66-df12-487f-9753-479627ec0e77-attachment.txt", "type": "text/plain"}], "start": 1761270257135, "stop": 1761270257136}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "1410acb3-84db-4146-a52f-9d58465fd0b1-attachment.txt", "type": "text/plain"}], "start": 1761270257136, "stop": 1761270257136}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "43f7f76f-7a20-4a77-a641-639e157448ea-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "88de3f2a-bf98-4cf9-bd92-5d807adb4b86-attachment.txt", "type": "text/plain"}], "start": 1761270259199, "stop": 1761270259249}], "attachments": [{"name": "时区处理", "source": "367973bc-c7f1-426b-8b25-53aec7c4eb74-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "2afdc6ff-112f-47cd-a1de-452c17f53f47-attachment.txt", "type": "text/plain"}], "start": 1761270259199, "stop": 1761270259249}, {"name": "轮询中（已等待17.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "3abd4031-c31f-4cfe-abaa-548946d96a2d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "808bb5eb-43b2-48ab-9186-003719e45186-attachment.txt", "type": "text/plain"}], "start": 1761270259249, "stop": 1761270259250}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "0af13f88-9613-47cf-aa46-6cb8f7aace75-attachment.txt", "type": "text/plain"}], "start": 1761270259250, "stop": 1761270259250}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "07f5d3e3-d0c6-4b8f-8d74-b8838fb3bcf9-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a0102a30-b32d-4099-bc5e-a33b9fc0f178-attachment.txt", "type": "text/plain"}], "start": 1761270261305, "stop": 1761270261361}], "attachments": [{"name": "时区处理", "source": "772df2ed-8202-4b73-bded-5677686cb84a-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "06dead39-662c-432c-b438-8f6d22ccbfeb-attachment.txt", "type": "text/plain"}], "start": 1761270261304, "stop": 1761270261361}, {"name": "轮询中（已等待19.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ad179123-9c19-4859-8912-9f4f5169e3d7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "837c0330-addd-48cc-8a09-c317eb4db755-attachment.txt", "type": "text/plain"}], "start": 1761270261361, "stop": 1761270261362}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "d40a984b-e57f-4d03-aa4f-842cf918167c-attachment.txt", "type": "text/plain"}], "start": 1761270261362, "stop": 1761270261363}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "e73f6862-a693-47c4-9c72-f8f69348f7a2-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d1927429-41b3-4c58-a35b-a4bfdd7b6627-attachment.txt", "type": "text/plain"}], "start": 1761270263418, "stop": 1761270263475}], "attachments": [{"name": "时区处理", "source": "21ed927d-db48-458c-9725-3237cdeb8a13-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "320b01f7-2e50-49ae-acc3-31dfbabda9bb-attachment.txt", "type": "text/plain"}], "start": 1761270263417, "stop": 1761270263475}, {"name": "轮询中（已等待21.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "195f9ea8-1514-4143-b70d-9d0ff76053b0-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "395f36d5-461a-4d3f-8a14-89c508f068de-attachment.txt", "type": "text/plain"}], "start": 1761270263475, "stop": 1761270263475}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "ba9e3829-995b-4aa7-b362-cfef127b9dc1-attachment.txt", "type": "text/plain"}], "start": 1761270263475, "stop": 1761270263476}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f33bb543-334c-4a89-bfdd-bbd177bb34bb-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "617ef4c2-3862-4630-87a2-caca5aa7386c-attachment.txt", "type": "text/plain"}], "start": 1761270265529, "stop": 1761270265581}], "attachments": [{"name": "时区处理", "source": "fadd248e-ab53-4590-8753-0f456aed3b5f-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "9bac690f-0705-488d-96a6-0e046cb34c18-attachment.txt", "type": "text/plain"}], "start": 1761270265528, "stop": 1761270265581}, {"name": "轮询中（已等待23.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "66af1845-cda7-4ba1-b472-6a12b59e8143-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "5ad08e3b-5c83-416f-8bdc-bb43d118099e-attachment.txt", "type": "text/plain"}], "start": 1761270265581, "stop": 1761270265582}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "e4fdcc06-0a32-4ea2-a44b-003c09a03ba1-attachment.txt", "type": "text/plain"}], "start": 1761270265582, "stop": 1761270265582}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "099b2cf0-8035-4abd-b75a-a22035fb1736-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "32eb04d5-2670-469c-9965-0243eabf5a9b-attachment.txt", "type": "text/plain"}], "start": 1761270267638, "stop": 1761270267691}], "attachments": [{"name": "时区处理", "source": "7f216c19-cabc-45b4-b535-9326a3c1e7c3-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "cf20e209-1e82-44ce-85d5-eeed8ff7948c-attachment.txt", "type": "text/plain"}], "start": 1761270267637, "stop": 1761270267691}, {"name": "轮询中（已等待25.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "62165c18-bcf3-4b5d-95ca-ffa18f510baa-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1028be1d-4144-461c-9b1a-afe5d0293494-attachment.txt", "type": "text/plain"}], "start": 1761270267691, "stop": 1761270267691}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "48ec6e3b-6320-481d-a56e-47447d322f83-attachment.txt", "type": "text/plain"}], "start": 1761270267692, "stop": 1761270267692}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "2fa9d793-e48f-4b2b-b211-c616f6049dc1-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "01bb7039-8957-4b9b-865f-83d401c8df9a-attachment.txt", "type": "text/plain"}], "start": 1761270269742, "stop": 1761270269791}], "attachments": [{"name": "时区处理", "source": "f6554917-ab5f-4fe5-a30a-cc9d7a3d9b65-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "5d1f29c6-e551-4f6c-8709-fe07ad8c7bfe-attachment.txt", "type": "text/plain"}], "start": 1761270269741, "stop": 1761270269791}, {"name": "轮询中（已等待27.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "c0602813-d966-4d8a-a25e-6520d30bc9a6-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c7261bee-99e1-4f49-817a-79d185c53e7f-attachment.txt", "type": "text/plain"}], "start": 1761270269791, "stop": 1761270269791}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "bdac926d-a865-4856-878e-ad1898db7926-attachment.txt", "type": "text/plain"}], "start": 1761270269791, "stop": 1761270269792}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "174e1b35-e5ff-44c8-9646-48c03f78b10e-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "58e640e9-b5d2-44fb-bf4e-8b2e4e518252-attachment.txt", "type": "text/plain"}], "start": 1761270271852, "stop": 1761270271905}], "attachments": [{"name": "时区处理", "source": "b9e2808c-6f78-4d9c-97a5-74fe547546a9-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "485c75d6-4097-4781-9f7f-4a24994fed9f-attachment.txt", "type": "text/plain"}], "start": 1761270271851, "stop": 1761270271905}, {"name": "轮询中（已等待29.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "9cb4b3c6-8e0f-43ef-b783-15927f300436-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "19936d0a-fcc7-4b42-a8f9-b2963c48f3e0-attachment.txt", "type": "text/plain"}], "start": 1761270271905, "stop": 1761270271906}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "becf5482-9640-484b-aa82-ccdb99d0a3f3-attachment.txt", "type": "text/plain"}], "start": 1761270271906, "stop": 1761270271906}, {"name": "时区查询轮询超时", "status": "passed", "attachments": [{"name": "处理说明", "source": "2007b0ee-6dce-403f-a8a2-e9e6afcab3af-attachment.txt", "type": "text/plain"}], "start": 1761270273909, "stop": 1761270273909}, {"name": "带时区转换查询（目标时区: +05:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "f88b080a-78d2-4480-88bf-d5a9cef69132-attachment.json", "type": "application/json"}], "start": 1761270273958, "stop": 1761270273959}], "attachments": [{"name": "执行SQL", "source": "9d9a6320-8825-463b-862d-02fd6467129e-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "af131132-3a6c-4a78-b04f-0a63eb3beb11-attachment.txt", "type": "text/plain"}], "start": 1761270273910, "stop": 1761270273959}], "attachments": [{"name": "时区处理", "source": "397f8156-92e8-40eb-ab7b-2fb078eca809-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "c4c39ac6-ee54-43a9-9e82-ef9a0a085cb6-attachment.txt", "type": "text/plain"}], "start": 1761270273909, "stop": 1761270273959}, {"name": "时区查询无结果", "status": "passed", "attachments": [{"name": "异常详情", "source": "dc725fe0-bc04-46cd-870b-f3d7fa7c9a81-attachment.txt", "type": "text/plain"}], "start": 1761270273959, "stop": 1761270273959}], "attachments": [{"name": "执行SQL", "source": "a6aadd7d-1659-4656-b5ad-c288d7902852-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "01ba6ce4-f517-4f89-b650-51790c5242c1-attachment.txt", "type": "text/plain"}, {"name": "时区偏移量（小时）", "source": "6ca1c1c2-71fb-44b0-9344-19176f9117f8-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "44d34d6f-aaeb-4c13-949f-c114bd8d3bb4-attachment.txt", "type": "text/plain"}], "start": 1761270242242, "stop": 1761270273959}], "start": 1761270242242, "stop": 1761270273960}], "attachments": [{"name": "log", "source": "3901a202-e6c4-4e2a-8f52-d87fa96977cb-attachment.txt", "type": "text/plain"}], "start": 1761270242242, "stop": 1761270273960, "uuid": "cfa08419-f970-4d5f-9548-66ea525b83dc", "historyId": "0daf7d03189f3d364ae4be71272d8fd3", "testCaseId": "0daf7d03189f3d364ae4be71272d8fd3", "fullName": "test_vps.test_lianxi.TestLeakageopen#test_dbquery_addsalve_orderSendclose", "labels": [{"name": "story", "value": "场景1：VPS策略下单-漏开"}, {"name": "feature", "value": "VPS策略下单-漏单场景"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_lianxi"}, {"name": "subSuite", "value": "TestLeakageopen_level"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "15992-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_lianxi"}]}