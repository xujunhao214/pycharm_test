{"name": "数据库校验-VPS数据-验证账号是否下架成功（后9个账号）", "status": "failed", "statusDetails": {"message": "Failed: 下架失败: Failed: 等待记录删除超时（5秒）", "trace": "self = <lingkuan_MT5DE.test_cloudTrader.test_delete.TestDelete_MT5cloudTrader object at 0x0000020AA30753A0>\nvar_manager = <lingkuan_MT5DE.commons.variable_manager.VariableManager object at 0x0000020AA309D280>\ndb_transaction = <pymysql.connections.Connection object at 0x0000020AA3258760>\n\n    @allure.title(\"数据库校验-VPS数据-验证账号是否下架成功（后9个账号）\")\n    def test_dbdelete_belowVps(self, var_manager, db_transaction):\n        # 1. 获取账号总数和所有账号信息\n        MT5cloudTrader_user_count = var_manager.get_variable(\"MT5cloudTrader_user_count\", 0)\n        if MT5cloudTrader_user_count < 10:  # 修改条件为至少10个账号\n            print(f\"用户总数需至少为10，当前为{MT5cloudTrader_user_count}，无法提取后9个数据进行校验\")\n    \n        # 2. 循环验证后9个账号的下架状态\n        for i in range(2, MT5cloudTrader_user_count + 1):  # 循环索引2-10（共9次）\n            with allure.step(f\"验证第{i}个账号是否下架成功\"):\n                # 获取单个账号（与下架的ID对应）\n                account = var_manager.get_variable(f\"MT5cloudTrader_user_accounts_{i}\")\n                if not account:\n                    print(f\"未找到需要验证的账号：MT5cloudTrader_user_accounts_{i}\")\n    \n                # 查询数据库（检查删除标记或记录是否存在）\n                sql = f\"SELECT * FROM follow_trader WHERE account = %s\"\n    \n                # 调用轮询等待方法，验证记录是否被删除\n                try:\n>                   self.wait_for_database_deletion(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=(account,)\n                    )\n\ntest_cloudTrader\\test_delete.py:297: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuan_MT5DE.test_cloudTrader.test_delete.TestDelete_MT5cloudTrader object at 0x0000020AA30753A0>\ndb_transaction = <pymysql.connections.Connection object at 0x0000020AA3258760>\nsql = 'SELECT * FROM follow_trader WHERE account = %s', params = ('66938840',)\ntime_field = None, time_range = 1, order_by = 'create_time DESC', timeout = 5\npoll_interval = 2\n\n    def wait_for_database_deletion(self, db_transaction: pymysql.connections.Connection,\n                                   sql: str,\n                                   params: tuple = (),\n                                   time_field: Optional[str] = None,\n                                   time_range: int = MYSQL_TIME,\n                                   order_by: str = \"create_time DESC\",\n                                   timeout: int = DELETE_WAIT_TIMEOUT,\n                                   poll_interval: int = POLL_INTERVAL) -> None:\n        \"\"\"轮询等待数据库记录删除（带Allure分层提示）\"\"\"\n        start_time = time.time()\n    \n        # 生成固定时间范围（轮询开始时计算一次）\n        poll_start_datetime = datetime.datetime.now()\n        fixed_time_start = (poll_start_datetime - datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        fixed_time_end = (poll_start_datetime + datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n    \n        logger.info(f\"[{self._get_current_time()}] 开始等待数据库记录删除 | SQL: {sql[:200]} | 超时: {timeout}秒\")\n    \n        with allure.step(f\"等待数据库记录删除（超时: {timeout}秒）\"):\n            allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n            allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n            allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                          allure.attachment_type.TEXT)\n    \n            while time.time() - start_time < timeout:\n                try:\n                    db_transaction.commit()\n    \n                    if time_field:\n                        result = self._execute_query(\n                            db_transaction=db_transaction,\n                            sql=sql,\n                            params=params,\n                            time_field=time_field,\n                            order_by=order_by,\n                            fixed_time_start=fixed_time_start,\n                            fixed_time_end=fixed_time_end,\n                            attach_to_allure=False\n                        )\n                    else:\n                        result = self.query_database(\n                            db_transaction=db_transaction,\n                            sql=sql,\n                            params=params,\n                            order_by=order_by,\n                            attach_to_allure=False\n                        )\n    \n                    elapsed = time.time() - start_time\n                    with allure.step(f\"等待中（已等待{elapsed:.1f}秒）\"):\n                        allure.attach(f\"剩余记录数: {len(result)}\", \"当前状态\", allure.attachment_type.TEXT)\n                        allure.attach(f\"剩余时间: {timeout - elapsed:.1f}秒\", \"超时倒计时\", allure.attachment_type.TEXT)\n    \n                    if not result:\n                        logger.info(\n                            f\"[{self._get_current_time()}] 删除成功（耗时{time.time() - start_time:.1f}秒）| SQL: {sql[:200]}\")\n                        with allure.step(\"删除验证成功\"):\n                            allure.attach(f\"耗时{time.time() - start_time:.1f}秒，记录已删除\", \"结果说明\",\n                                          allure.attachment_type.TEXT)\n                        return\n    \n                    logger.info(\n                        f\"[{self._get_current_time()}] 记录仍存在（已等待{elapsed:.1f}秒）| 剩余时间: {timeout - elapsed:.1f}秒 | 结果数: {len(result)}\")\n                    time.sleep(poll_interval)\n    \n                except Exception as e:\n                    with allure.step(\"删除等待异常\"):\n                        allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                        allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                        allure.attach(str(e), \"错误详情\", allure.attachment_type.TEXT)\n                    logger.warning(f\"[{self._get_current_time()}] 轮询查询异常: {str(e)} | 继续等待...\")\n                    time.sleep(poll_interval)\n    \n            # 超时处理\n            db_transaction.commit()\n            if time_field:\n                final_result = self._execute_query(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    time_field=time_field,\n                    order_by=order_by,\n                    fixed_time_start=fixed_time_start,\n                    fixed_time_end=fixed_time_end,\n                    attach_to_allure=True\n                )\n            else:\n                final_result = self.query_database(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    order_by=order_by,\n                    attach_to_allure=True\n                )\n    \n            display_count = min(len(final_result), 50)\n            with allure.step(\"等待删除超时\"):\n                allure.attach(f\"超过{timeout}秒仍有{len(final_result)}条记录未删除\", \"超时说明\",\n                              allure.attachment_type.TEXT)\n                allure.attach(\n                    self.serialize_data(final_result[:display_count]),\n                    f\"剩余记录（共{len(final_result)}条）\",\n                    allure.attachment_type.JSON\n                )\n    \n>           raise TimeoutError(f\"Failed: 等待记录删除超时（{timeout}秒）\")\nE           TimeoutError: Failed: 等待记录删除超时（5秒）\n\ncommons\\api_base.py:887: TimeoutError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <lingkuan_MT5DE.test_cloudTrader.test_delete.TestDelete_MT5cloudTrader object at 0x0000020AA30753A0>\nvar_manager = <lingkuan_MT5DE.commons.variable_manager.VariableManager object at 0x0000020AA309D280>\ndb_transaction = <pymysql.connections.Connection object at 0x0000020AA3258760>\n\n    @allure.title(\"数据库校验-VPS数据-验证账号是否下架成功（后9个账号）\")\n    def test_dbdelete_belowVps(self, var_manager, db_transaction):\n        # 1. 获取账号总数和所有账号信息\n        MT5cloudTrader_user_count = var_manager.get_variable(\"MT5cloudTrader_user_count\", 0)\n        if MT5cloudTrader_user_count < 10:  # 修改条件为至少10个账号\n            print(f\"用户总数需至少为10，当前为{MT5cloudTrader_user_count}，无法提取后9个数据进行校验\")\n    \n        # 2. 循环验证后9个账号的下架状态\n        for i in range(2, MT5cloudTrader_user_count + 1):  # 循环索引2-10（共9次）\n            with allure.step(f\"验证第{i}个账号是否下架成功\"):\n                # 获取单个账号（与下架的ID对应）\n                account = var_manager.get_variable(f\"MT5cloudTrader_user_accounts_{i}\")\n                if not account:\n                    print(f\"未找到需要验证的账号：MT5cloudTrader_user_accounts_{i}\")\n    \n                # 查询数据库（检查删除标记或记录是否存在）\n                sql = f\"SELECT * FROM follow_trader WHERE account = %s\"\n    \n                # 调用轮询等待方法，验证记录是否被删除\n                try:\n                    self.wait_for_database_deletion(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=(account,)\n                    )\n                    allure.attach(f\"\n账号 {account} 已成功下架vps\", \"验证结果\")\n                    print(f\"\n账号 {account} 已成功下架vps\")\n                except TimeoutError as e:\n                    allure.attach(f\"下架超时: {str(e)}\", \"验证结果\")\n>                   print(f\"下架失败: {str(e)}\")\nE                   Failed: 下架失败: Failed: 等待记录删除超时（5秒）\n\ntest_cloudTrader\\test_delete.py:306: Failed"}, "steps": [{"name": "验证第2个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "c19e35df-a41b-4d68-a1aa-247f617fdb39-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "99fccb62-0bb3-4a86-b2cb-0a5f8f35c624-attachment.txt", "type": "text/plain"}], "start": 1762742786079, "stop": 1762742786131}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "82f49fd1-9416-47ef-b73d-ca1503625719-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "edeed0f7-5f84-48f9-9383-86888ed7b2f5-attachment.txt", "type": "text/plain"}], "start": 1762742786132, "stop": 1762742786132}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "5463f0dd-1de4-43d5-babe-a723301b41e6-attachment.txt", "type": "text/plain"}], "start": 1762742786132, "stop": 1762742786133}], "attachments": [{"name": "执行SQL", "source": "4e3580fe-a6c1-4fd1-83f5-238e3d22a413-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ba27cb02-5fbd-43d8-b09d-59b9764aff34-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "1f820cff-d7a6-44ae-b6f8-7b4d8c808757-attachment.txt", "type": "text/plain"}], "start": 1762742786028, "stop": 1762742786133}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "a16160d3-3834-4f95-bc8c-8b238da61637-attachment.json", "type": "application/json"}], "start": 1762742786183, "stop": 1762742786184}], "attachments": [{"name": "执行SQL", "source": "fd4c012a-65d0-45aa-8569-ddd3e718d573-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "b7c0fa07-6615-4941-8715-936f00c51bfd-attachment.txt", "type": "text/plain"}], "start": 1762742786133, "stop": 1762742786184}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "45b65c03-9746-4112-a292-78603fd12d6f-attachment.attach"}], "start": 1762742786028, "stop": 1762742786184}, {"name": "验证第3个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "63cad7dc-d3b5-4a4c-914a-3ac1ee20c6d7-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "31e29584-4ad9-4494-9481-4cdc87cb2383-attachment.txt", "type": "text/plain"}], "start": 1762742786235, "stop": 1762742786285}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "16d976de-5205-4ef6-8b09-485c8c835ba6-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "deb77f31-55ab-4e7d-a8c0-b87269150e21-attachment.txt", "type": "text/plain"}], "start": 1762742786285, "stop": 1762742786286}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "f10d2314-f211-4360-b2e5-f3cf89f1bc98-attachment.txt", "type": "text/plain"}], "start": 1762742786286, "stop": 1762742786286}], "attachments": [{"name": "执行SQL", "source": "e0eb8d33-f388-4384-b475-82398526b8ca-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "7d07bf32-4cf6-4c82-bda3-b34bab540154-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "564367fd-656b-4487-9774-d79bd6d811fd-attachment.txt", "type": "text/plain"}], "start": 1762742786184, "stop": 1762742786286}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "758bf144-5b23-4125-8310-d773213a2e70-attachment.json", "type": "application/json"}], "start": 1762742786337, "stop": 1762742786338}], "attachments": [{"name": "执行SQL", "source": "e05c3c4c-cc9c-4208-92da-8480ed053def-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "07b13d80-788a-4d7f-9ded-0267e37b8c23-attachment.txt", "type": "text/plain"}], "start": 1762742786286, "stop": 1762742786338}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "81b8cb96-6b37-4d01-9988-463b5139a401-attachment.attach"}], "start": 1762742786184, "stop": 1762742786338}, {"name": "验证第4个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "1c0c876c-92eb-4d50-a7fa-e1cb501f2839-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "22ed53b0-36b4-4c34-99a3-0858b61d3480-attachment.txt", "type": "text/plain"}], "start": 1762742786390, "stop": 1762742786439}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "904a7a25-c845-41ab-9164-e13745c643fd-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "fea3e98c-f1be-4d70-83e4-9e6dd5a608c7-attachment.txt", "type": "text/plain"}], "start": 1762742786439, "stop": 1762742786440}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "f2d19e54-e842-43c3-aa2a-6f1a3de7a23f-attachment.txt", "type": "text/plain"}], "start": 1762742786440, "stop": 1762742786441}], "attachments": [{"name": "执行SQL", "source": "18e643ce-89b5-4701-a60d-562c482a4120-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "f43f70de-163b-4fec-accb-f4bea2598d39-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "36ccc7e3-4b17-4cd4-b73f-24147530f1b2-attachment.txt", "type": "text/plain"}], "start": 1762742786338, "stop": 1762742786441}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "4b69caa2-a360-47ec-8fad-ee68d50a89e5-attachment.json", "type": "application/json"}], "start": 1762742786490, "stop": 1762742786490}], "attachments": [{"name": "执行SQL", "source": "2b1f3795-225b-4eda-bec8-c50b11dba290-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c5c72a37-ea37-45b2-a143-b748fdc60407-attachment.txt", "type": "text/plain"}], "start": 1762742786441, "stop": 1762742786490}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "2352d455-626c-4872-9a8b-2fe6cb24756d-attachment.attach"}], "start": 1762742786338, "stop": 1762742786490}, {"name": "验证第5个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "73e6447e-486d-4d6e-9ddd-a2df9432194f-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a15b2585-f4d2-45da-8b05-86431d5a59bd-attachment.txt", "type": "text/plain"}], "start": 1762742786540, "stop": 1762742786590}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "1e4b278f-0e6f-447f-a4ba-531e82dfe2b7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "14a7b1f0-459d-4453-acc5-1f633ecf6e82-attachment.txt", "type": "text/plain"}], "start": 1762742786590, "stop": 1762742786591}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "2f66a88c-012c-4b22-afda-f47618743061-attachment.txt", "type": "text/plain"}], "start": 1762742786591, "stop": 1762742786591}], "attachments": [{"name": "执行SQL", "source": "c8d82990-c4e2-4a30-80bc-2f2c2c1160da-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "38480ac8-b15a-4eec-8bb3-3612f60bee85-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "106f861e-0dde-4943-8e0e-8876c20f84d9-attachment.txt", "type": "text/plain"}], "start": 1762742786490, "stop": 1762742786591}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "d44dd357-05bc-49a4-8d4f-8def710a39be-attachment.json", "type": "application/json"}], "start": 1762742786644, "stop": 1762742786644}], "attachments": [{"name": "执行SQL", "source": "0734b63c-bb16-437f-a92c-73e7826f3443-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "e171e1e2-3ef2-4353-85de-2999a8ab93b0-attachment.txt", "type": "text/plain"}], "start": 1762742786592, "stop": 1762742786644}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "6803a114-dd7b-4ab5-a1ee-6cc6d3fad296-attachment.attach"}], "start": 1762742786490, "stop": 1762742786644}, {"name": "验证第6个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "efec0ec8-fe46-41be-b45d-44714c39c4a8-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "9974ddef-110a-43a0-86c0-b6927c2b68a5-attachment.txt", "type": "text/plain"}], "start": 1762742786693, "stop": 1762742786745}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "c9158830-98ee-44f2-915c-d64d6d219816-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "f8e090b9-07a5-415f-a993-2f1d140a6bf6-attachment.txt", "type": "text/plain"}], "start": 1762742786745, "stop": 1762742786746}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "75b9df96-085f-4af1-ae55-ae9640e85205-attachment.txt", "type": "text/plain"}], "start": 1762742786746, "stop": 1762742786746}], "attachments": [{"name": "执行SQL", "source": "459b7551-73da-4609-b476-6dd4262d9d6a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "f3173566-5b75-474d-8712-f51873209be2-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "86fa626d-3b54-49bd-904d-bb7c16cfb53a-attachment.txt", "type": "text/plain"}], "start": 1762742786644, "stop": 1762742786746}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "ce55c63e-ee86-4c7a-84ed-2e3cd1c1979b-attachment.json", "type": "application/json"}], "start": 1762742786796, "stop": 1762742786797}], "attachments": [{"name": "执行SQL", "source": "ef28c2cf-ba7d-48df-9b25-4c9f470fac18-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "483147d5-fc50-46bd-b30b-18bf0c9f7d16-attachment.txt", "type": "text/plain"}], "start": 1762742786747, "stop": 1762742786797}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "f3acc081-9fa4-4bf4-ab95-3fa5e672f157-attachment.attach"}], "start": 1762742786644, "stop": 1762742786797}, {"name": "验证第7个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "f3264733-d1df-4475-8b2d-7d7aa2dbf636-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "099d0014-14ea-44cd-bcbc-6ae917002556-attachment.txt", "type": "text/plain"}], "start": 1762742786846, "stop": 1762742786896}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "8cf9f4bc-10f2-44c4-aa90-c44cbfc6d463-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "87938411-6709-411f-911d-6cf2f03022b1-attachment.txt", "type": "text/plain"}], "start": 1762742786896, "stop": 1762742786897}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "e6a749d3-ed3e-44bf-9379-96f568ed5757-attachment.txt", "type": "text/plain"}], "start": 1762742786897, "stop": 1762742786897}], "attachments": [{"name": "执行SQL", "source": "c12e767c-149a-45ae-8985-f19db4a536f9-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "37abe14e-7679-46bd-9887-f30a35c10005-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "31b39428-9d6d-4bbf-a1ae-06311c7d8313-attachment.txt", "type": "text/plain"}], "start": 1762742786797, "stop": 1762742786897}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "45ca35d6-4e12-4955-afa0-c7575bc2c18a-attachment.json", "type": "application/json"}], "start": 1762742786948, "stop": 1762742786948}], "attachments": [{"name": "执行SQL", "source": "cb45710e-e35b-4cde-ab61-03523d238169-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "fe419fc7-bf26-4b47-ae2f-1f37b65a4332-attachment.txt", "type": "text/plain"}], "start": 1762742786898, "stop": 1762742786948}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "716c988a-5885-4462-86f9-96840691829b-attachment.attach"}], "start": 1762742786797, "stop": 1762742786948}, {"name": "验证第8个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "c1c72d15-e820-4545-a482-58bc58bd7a65-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "a01ca6c5-2e8e-4e8f-a4d1-6d1b2e2a1e0c-attachment.txt", "type": "text/plain"}], "start": 1762742786997, "stop": 1762742787048}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b41973cc-8aa8-4629-8f93-056c314c531a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c0127510-a0f9-430f-9315-fffa8bbce586-attachment.txt", "type": "text/plain"}], "start": 1762742787048, "stop": 1762742787048}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "b5259b63-5ed2-4395-bde9-d96fe91d017f-attachment.txt", "type": "text/plain"}], "start": 1762742787049, "stop": 1762742787049}], "attachments": [{"name": "执行SQL", "source": "414cb4fb-6829-43d4-91c9-54d602ff4aa3-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "cf58b9b9-0a39-42ed-a52f-6c22d5cf9c82-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "895e1dd6-76eb-446b-ba88-84a07073a679-attachment.txt", "type": "text/plain"}], "start": 1762742786948, "stop": 1762742787049}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "da54855e-30a5-4670-84c9-045e0ecc60b1-attachment.json", "type": "application/json"}], "start": 1762742787100, "stop": 1762742787101}], "attachments": [{"name": "执行SQL", "source": "d56077ed-7f12-4d58-a233-4caaf4221309-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "1222d21f-f0f8-4ae2-8b20-f2e8adfc31d2-attachment.txt", "type": "text/plain"}], "start": 1762742787049, "stop": 1762742787101}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "f831f469-e9bf-4b02-b4d7-837f42a5f5c6-attachment.attach"}], "start": 1762742786948, "stop": 1762742787101}, {"name": "验证第9个账号是否下架成功", "status": "passed", "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "eb3aeee8-92da-43f8-83a5-726975798365-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "8b436c2c-0649-45c3-bc67-526047a7fa38-attachment.txt", "type": "text/plain"}], "start": 1762742787149, "stop": 1762742787199}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "e692375c-672b-45a6-a683-414fb1baf307-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "011b45bb-6865-4776-9ccf-4d24196ff208-attachment.txt", "type": "text/plain"}], "start": 1762742787199, "stop": 1762742787200}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "4aacb4dc-8f8d-43f0-b20e-80283c3e74fc-attachment.txt", "type": "text/plain"}], "start": 1762742787200, "stop": 1762742787200}], "attachments": [{"name": "执行SQL", "source": "2e82dc8d-99e9-48db-ad86-152545a4aca1-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "85f555bb-3385-416b-899f-64e8a7b1feb5-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "92205154-3a54-477c-80de-d70d94242149-attachment.txt", "type": "text/plain"}], "start": 1762742787101, "stop": 1762742787200}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "10d9d1bd-81d0-4cdb-9cbd-8fa8b0104955-attachment.json", "type": "application/json"}], "start": 1762742787250, "stop": 1762742787250}], "attachments": [{"name": "执行SQL", "source": "7196f350-a692-45bc-83a5-0552b77454fb-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "4880b3ef-56cc-4f85-ba1d-e9b290c9c476-attachment.txt", "type": "text/plain"}], "start": 1762742787201, "stop": 1762742787250}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "2cead9ab-c78e-403f-b80e-941d9a6d56b4-attachment.attach"}], "start": 1762742787101, "stop": 1762742787250}, {"name": "验证第10个账号是否下架成功", "status": "failed", "statusDetails": {"message": "Failed: 下架失败: Failed: 等待记录删除超时（5秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_MT5DE\\test_cloudTrader\\test_delete.py\", line 306, in test_dbdelete_belowVps\n    print(f\"下架失败: {str(e)}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 等待记录删除超时（5秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_MT5DE\\commons\\api_base.py\", line 887, in wait_for_database_deletion\n    raise TimeoutError(f\"Failed: 等待记录删除超时（{timeout}秒）\")\n"}, "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "196c198d-9fa2-44f2-8368-9ad927364d3c-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "ca1ee505-9fa8-427f-b347-a3c9c01e5e26-attachment.txt", "type": "text/plain"}], "start": 1762742787301, "stop": 1762742787350}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "2aaa96bc-5789-4ef0-b2fd-984a2b93dd37-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "f10fe5fd-2cbd-433b-945d-89a47aae00d2-attachment.txt", "type": "text/plain"}], "start": 1762742787350, "stop": 1762742787351}, {"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "2e479ffb-2949-4e68-8826-f92035214c32-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "c2f722d4-642b-4099-bcfd-3c8352c30e24-attachment.txt", "type": "text/plain"}], "start": 1762742789403, "stop": 1762742789453}, {"name": "等待中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "3d0b467e-3ce8-4b9c-9e3a-61f934908274-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2bcf31c3-56f0-4cab-856e-c4ccf19982b8-attachment.txt", "type": "text/plain"}], "start": 1762742789453, "stop": 1762742789454}, {"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "cdcd0956-3911-477f-8cef-267467a39bb9-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "0f913ba7-6701-4b07-a65b-20bac9c7c4d4-attachment.txt", "type": "text/plain"}], "start": 1762742791507, "stop": 1762742791557}, {"name": "等待中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "5b8034a6-793e-450c-b7ed-7fc0e3c62823-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1cbd740f-9a70-4e6c-8097-2d499f7c395c-attachment.txt", "type": "text/plain"}], "start": 1762742791557, "stop": 1762742791558}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共1条，显示前50条）", "source": "00d40b46-7f9b-443d-abe7-0a8161cf6534-attachment.json", "type": "application/json"}], "start": 1762742793682, "stop": 1762742793683}], "attachments": [{"name": "执行SQL", "source": "db1e1f79-51e9-48b6-8f9f-b062d418e8ac-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "3b7aa44d-d6c2-4758-aca4-78545e0c0859-attachment.txt", "type": "text/plain"}], "start": 1762742793632, "stop": 1762742793683}, {"name": "等待删除超时", "status": "passed", "attachments": [{"name": "超时说明", "source": "24d0afb9-ff1a-4317-a3d2-a6666d423641-attachment.txt", "type": "text/plain"}, {"name": "剩余记录（共1条）", "source": "f8624023-cd45-4a81-a670-b95f32cafe2c-attachment.json", "type": "application/json"}], "start": 1762742793683, "stop": 1762742793684}], "attachments": [{"name": "执行SQL", "source": "28151aab-4e07-45bc-b837-6599e25e2a0a-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "48ef95ce-e72a-4f78-90eb-4bc6c0d4c2f5-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "391476fb-ea60-4cfd-acb6-8086c7b67867-attachment.txt", "type": "text/plain"}], "start": 1762742787251, "stop": 1762742793684}], "attachments": [{"name": "验证结果", allure.attachment_type.TEXT, "source": "baf3b45b-1a00-450f-9018-79bdbe038aa1-attachment.attach"}], "start": 1762742787250, "stop": 1762742793685}], "attachments": [{"name": "log", "source": "8eaa3e23-127b-4076-b149-f59a28533f44-attachment.txt", "type": "text/plain"}], "start": 1762742786028, "stop": 1762742793686, "uuid": "4ffcf374-0e54-4fec-9b48-e266a7e35f79", "historyId": "2511059ecd01bfd290a15a3feebe1364", "testCaseId": "2511059ecd01bfd290a15a3feebe1364", "fullName": "test_cloudTrader.test_delete.TestDelete_MT5cloudTrader#test_dbdelete_belowVps", "labels": [{"name": "feature", "value": "数据管理-删除云策略测试数据"}, {"name": "parentSuite", "value": "test_cloudTrader"}, {"name": "suite", "value": "test_delete"}, {"name": "subSuite", "value": "TestDelete_MT5cloudTrader"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "26052-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cloudTrader.test_delete"}]}