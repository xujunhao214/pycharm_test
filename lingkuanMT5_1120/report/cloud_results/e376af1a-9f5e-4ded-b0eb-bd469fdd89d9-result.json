{"name": "数据库校验-交易平仓-跟单指令及订单详情数据检查", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）", "trace": "self = <lingkuanMT5_1120.test_cloudTrader.test_cloud_masOrderSend.TestCloudMasOrdersend.TestCloudtradingOrders7 object at 0x0000023672B7DFD0>\nclass_random_str = 'zdhh53776'\nvar_manager = <lingkuanMT5_1120.commons.variable_manager.VariableManager object at 0x0000023672EAC0D0>\ndb_transaction = <DBUtils.PooledDB.PooledDedicatedDBConnection object at 0x0000023672BC0580>\n\n    @allure.title(\"数据库校验-交易平仓-跟单指令及订单详情数据检查\")\n    def test_dbquery_addsalve_orderSendclose(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"1. 获取订单详情表账号数据\"):\n            MT5cloudTrader_user_accounts_4 = var_manager.get_variable(\"MT5cloudTrader_user_accounts_4\")\n            MT5cloudTrader_MT5vps_ids_3 = var_manager.get_variable(\"MT5cloudTrader_MT5vps_ids_3\")\n            sql = f\"\"\"\n                    SELECT\n                        fod.size,\n                        fod.comment,\n                        fod.close_no,\n                        fod.magical,\n                        fod.open_price,\n                        fod.symbol,\n                        fod.order_no,\n                        foi.true_total_lots,\n                        foi.order_no,\n                        foi.operation_type,\n                        foi.create_time,\n                        foi.status,\n                        foi.min_lot_size,\n                        foi.max_lot_size,\n                        foi.total_lots,\n                        foi.master_order,\n                        foi.total_orders\n                    FROM\n                        follow_order_detail fod\n                    INNER JOIN\n                        follow_order_instruct foi\n                    ON\n                        foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci\n                    WHERE foi.operation_type = %s\n                        AND fod.account = %s\n                        AND fod.trader_id = %s\n                        AND fod.comment = %s\n                        \"\"\"\n            params = (\n                '1',\n                MT5cloudTrader_user_accounts_4,\n                MT5cloudTrader_MT5vps_ids_3,\n                class_random_str\n            )\n    \n            # 调用轮询等待方法（带时间范围过滤）\n>           db_data = self.query_database_with_time_with_timezone(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"fod.close_time\"\n            )\n\ntest_cloudTrader\\test_cloud_masOrderSend.py:2873: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuanMT5_1120.test_cloudTrader.test_cloud_masOrderSend.TestCloudMasOrdersend.TestCloudtradingOrders7 object at 0x0000023672B7DFD0>\ndb_transaction = <DBUtils.PooledDB.PooledDedicatedDBConnection object at 0x0000023672BC0580>\nsql = '\\n                        SELECT \\n                            fod.size,\\n                            fod.comment,\\n ...                AND fod.trader_id = %s\\n                            AND fod.comment = %s\\n                            '\nparams = ('1', '66938833', 15635, 'zdhh53776'), time_field = 'fod.close_time'\ntime_range = 3, order_by = 'create_time DESC', timeout = 30, poll_interval = 2\nstable_period = 2, timezone_offset = 6, attach_to_allure = True\n\n    def query_database_with_time_with_timezone(\n            self,\n            db_transaction: pymysql.connections.Connection,\n            sql: str,\n            params: tuple = (),\n            time_field: Optional[str] = None,\n            time_range: int = MYSQL_TIME,\n            order_by: str = \"create_time DESC\",\n            timeout: int = WAIT_TIMEOUT,\n            poll_interval: int = POLL_INTERVAL,\n            stable_period: int = STBLE_PERIOD,\n            timezone_offset: int = TIMEZONE_OFFSET,\n            attach_to_allure: bool = True\n    ) -> List[Dict[str, Any]]:\n        \"\"\"带时区转换的轮询查询（带Allure分层提示）\"\"\"\n        offset_str = f\"{timezone_offset:+03d}:00\"  # 转换为时区字符串（如+08:00）\n        start_time = time.time()\n        last_result = None\n        stable_start_time = None\n        final_result = None\n    \n        # 生成固定时间范围（轮询开始时计算一次）\n        poll_start_datetime = datetime.datetime.now()\n        fixed_time_start = (poll_start_datetime - datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        fixed_time_end = (poll_start_datetime + datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n    \n        logger.info(f\"[{self._get_current_time()}] 开始轮询（时区{offset_str}）| 超时: {timeout}秒\")\n    \n        with allure.step(f\"轮询等待数据稳定（时区{offset_str}，超时{timeout}秒）\"):\n            while time.time() - start_time < timeout:\n                try:\n                    db_transaction.commit()\n                    # 执行带时区转换的单次查询\n                    result = self._execute_query_with_timezone(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=params,\n                        time_field=time_field,\n                        order_by=order_by,\n                        fixed_time_start=fixed_time_start,  # 传递固定时间参数\n                        fixed_time_end=fixed_time_end,\n                        timezone_offset=offset_str,\n                        attach_to_allure=False\n                    )\n    \n                    # 记录轮询状态\n                    elapsed = time.time() - start_time\n                    with allure.step(f\"轮询中（已等待{elapsed:.1f}秒）\"):\n                        allure.attach(f\"结果数量: {len(result)}\", \"当前状态\", allure.attachment_type.TEXT)\n                        allure.attach(f\"剩余时间: {timeout - elapsed:.1f}秒\", \"超时倒计时\", allure.attachment_type.TEXT)\n    \n                    # 复用数据稳定判断逻辑\n                    if len(result) > 0 and self._is_result_stable(result, last_result):\n                        if stable_start_time is None:\n                            stable_start_time = time.time()\n                            with allure.step(\"数据首次稳定\"):\n                                allure.attach(f\"开始稳定期计时（需保持{stable_period}秒）\", \"状态说明\",\n                                              allure.attachment_type.TEXT)\n                        elif time.time() - stable_start_time >= stable_period:\n                            final_result = result\n                            logger.info(f\"[{self._get_current_time()}] 数据稳定，轮询结束\")\n                            with allure.step(\"数据稳定达标\"):\n                                allure.attach(f\"已稳定{stable_period}秒（总耗时{time.time() - start_time:.1f}秒）\",\n                                              \"结果说明\", allure.attachment_type.TEXT)\n                            break\n                    else:\n                        stable_start_time = None\n                        with allure.step(\"数据发生变化\"):\n                            allure.attach(\"重置稳定期计时器\", \"状态说明\", allure.attachment_type.TEXT)\n    \n                    last_result = result\n                    time.sleep(poll_interval)\n    \n                except Exception as e:\n                    with allure.step(\"时区查询轮询异常\"):\n                        allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                        allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                        allure.attach(str(e), \"错误详情\", allure.attachment_type.TEXT)\n                    logger.warning(f\"[{self._get_current_time()}] 轮询异常: {str(e)} \\n继续等待\")\n                    time.sleep(poll_interval)\n    \n            # 超时处理\n            if final_result is None:\n                with allure.step(\"时区查询轮询超时\"):\n                    allure.attach(f\"超过{timeout}秒未达到稳定状态，获取最终结果\", \"处理说明\",\n                                  allure.attachment_type.TEXT)\n                final_result = self._execute_query_with_timezone(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    time_field=time_field,\n                    order_by=order_by,\n                    fixed_time_start=fixed_time_start,\n                    fixed_time_end=fixed_time_end,\n                    timezone_offset=offset_str,\n                    attach_to_allure=True\n                )\n    \n            # 附加结果到报告\n            if final_result and attach_to_allure:\n                with allure.step(\"带时区查询最终结果\"):\n                    display_result = min(len(final_result), 50)\n                    allure.attach(self.serialize_data(final_result[:display_result]),\n                                  f\"查询结果（共{len(final_result)}条，显示前50条）\", allure.attachment_type.JSON)\n                    allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                    allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                    allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n                    allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                  allure.attachment_type.TEXT)\n    \n            if not final_result:\n                with allure.step(\"时区查询无结果\"):\n                    allure.attach(f\"轮询{timeout}秒后仍无查询结果\", \"异常详情\", allure.attachment_type.TEXT)\n                    allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                    allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                    allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n                    allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                  allure.attachment_type.TEXT)\n>               raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\nE               TimeoutError: Failed: 时区查询超时（30秒）\n\ncommons\\api_base.py:1109: TimeoutError"}, "description": "\n    ### 测试说明\n    - 前置条件：有云策略和云跟单\n      1. 修改跟单账号下单比例0.25，手数取余-取小数，合约比例0.5\n      2. 进行开仓，手数范围0.01-1，总手数0.3\n      3. 校验账号的数据是否正确-下单手数是0.3*0.25*0.5=0.0375，取小数是0.03\n      4. 进行平仓\n      5. 校验账号的数据是否正确\n    - 预期结果：账号的数据正确\n    ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1120\\test_cloudTrader\\test_cloud_masOrderSend.py\", line 2873, in test_dbquery_addsalve_orderSendclose\n    db_data = self.query_database_with_time_with_timezone(\n  File \"D:\\pycharm_test\\lingkuanMT5_1120\\commons\\api_base.py\", line 1109, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "轮询等待数据稳定（时区+06:00，超时30秒）", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1120\\commons\\api_base.py\", line 1109, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033794866, "stop": 1764033794924}], "attachments": [{"name": "时区处理", "source": "8df90dd8-abb6-4d56-8b3a-00fd741b3c9d-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "b1907a01-254f-438b-8153-932fc692bf0e-attachment.txt", "type": "text/plain"}], "start": 1764033794866, "stop": 1764033794924}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "8d33f317-c45d-45f7-a7d2-be2959f92fa8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ad778393-8995-4d37-a844-b7e49be02c06-attachment.txt", "type": "text/plain"}], "start": 1764033794924, "stop": 1764033794924}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "beed8bb9-dd13-4bc1-9e25-623cf927120d-attachment.txt", "type": "text/plain"}], "start": 1764033794924, "stop": 1764033794925}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033796982, "stop": 1764033797040}], "attachments": [{"name": "时区处理", "source": "318793b2-029f-4326-953d-a5beee636cd2-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "4a460392-e10d-429d-bffb-8f265148bbb5-attachment.txt", "type": "text/plain"}], "start": 1764033796981, "stop": 1764033797040}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "77019fc7-13f8-4da0-a33a-a01adf217732-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "a9523e24-752f-41da-90ab-498a33f93f18-attachment.txt", "type": "text/plain"}], "start": 1764033797040, "stop": 1764033797040}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "b74b1c33-89ed-4cbb-af1c-0ccfe1b5b88c-attachment.txt", "type": "text/plain"}], "start": 1764033797040, "stop": 1764033797041}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033799095, "stop": 1764033799153}], "attachments": [{"name": "时区处理", "source": "a4b75445-7be5-42db-a455-e40ee6da698f-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "dd552121-088c-49b0-9240-5a1da6c055ff-attachment.txt", "type": "text/plain"}], "start": 1764033799094, "stop": 1764033799153}, {"name": "轮询中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "a40645b6-5af9-430c-bca3-849e103281de-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2ef198df-ce54-480e-aa55-233846ede0ac-attachment.txt", "type": "text/plain"}], "start": 1764033799153, "stop": 1764033799155}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "79def3bd-e3c3-4cad-b689-8394e3659d39-attachment.txt", "type": "text/plain"}], "start": 1764033799155, "stop": 1764033799155}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033801216, "stop": 1764033801275}], "attachments": [{"name": "时区处理", "source": "0292b248-2380-4563-85fe-0861ea00a6b9-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "c1326d56-2c36-4012-919f-799d6fe98576-attachment.txt", "type": "text/plain"}], "start": 1764033801215, "stop": 1764033801275}, {"name": "轮询中（已等待6.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "45b01e45-f68d-4f11-9e78-1b9f8493183b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "55e0a6bc-636a-4499-b98a-b66a62a2fc19-attachment.txt", "type": "text/plain"}], "start": 1764033801275, "stop": 1764033801275}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "74c36008-64a9-4359-b838-06146b24afc7-attachment.txt", "type": "text/plain"}], "start": 1764033801275, "stop": 1764033801276}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033803334, "stop": 1764033803395}], "attachments": [{"name": "时区处理", "source": "45107db0-9f65-47ec-b806-651b17c416d9-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "21b6a290-831a-4e58-bc64-9435d44d0a2b-attachment.txt", "type": "text/plain"}], "start": 1764033803333, "stop": 1764033803395}, {"name": "轮询中（已等待8.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ccb5316b-ea48-4214-8b40-ddcfe19714e7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "f5cdb253-075a-4602-bf9a-991dc958b080-attachment.txt", "type": "text/plain"}], "start": 1764033803396, "stop": 1764033803397}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "95d8f04e-6675-4d42-84d0-12235c441886-attachment.txt", "type": "text/plain"}], "start": 1764033803397, "stop": 1764033803397}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033805448, "stop": 1764033805509}], "attachments": [{"name": "时区处理", "source": "159c2494-c192-41d5-a044-5bbcb491ed8c-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "6b0916dc-2a2b-4b5c-82cc-acc06465c9a1-attachment.txt", "type": "text/plain"}], "start": 1764033805447, "stop": 1764033805509}, {"name": "轮询中（已等待10.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "cfe5f16a-dc0a-454b-911b-ace320fef829-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2683c2a4-fcc1-4666-9733-9c71bffbb8d6-attachment.txt", "type": "text/plain"}], "start": 1764033805509, "stop": 1764033805510}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "2cabfd4a-f6c6-456a-b18d-b7ef34956dc3-attachment.txt", "type": "text/plain"}], "start": 1764033805510, "stop": 1764033805510}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033807568, "stop": 1764033807627}], "attachments": [{"name": "时区处理", "source": "1ccfd82c-771d-4462-81a5-34bce0b6ad07-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "56aeb43c-8ee1-4141-b764-65dd4b0b9fa8-attachment.txt", "type": "text/plain"}], "start": 1764033807567, "stop": 1764033807627}, {"name": "轮询中（已等待12.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "f3f7b1ed-a5b6-455d-afed-cef85e6ee1af-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ad75e0b8-d348-4c98-ab3c-c2da47fbe3b3-attachment.txt", "type": "text/plain"}], "start": 1764033807627, "stop": 1764033807627}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "aa462c81-7b92-4ba3-b495-2b446ff40c6a-attachment.txt", "type": "text/plain"}], "start": 1764033807627, "stop": 1764033807628}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033809677, "stop": 1764033809735}], "attachments": [{"name": "时区处理", "source": "a37632a4-39f7-44ea-859f-6609369378ab-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "f17869fd-dbe0-4939-9873-a0013ccaa862-attachment.txt", "type": "text/plain"}], "start": 1764033809676, "stop": 1764033809735}, {"name": "轮询中（已等待14.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "beee340d-1e12-420d-ac0a-7faaa7ab75a5-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ef3ef76f-d2e4-42e1-84b6-0c11dcb07db2-attachment.txt", "type": "text/plain"}], "start": 1764033809735, "stop": 1764033809736}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "7a2ad21f-ddeb-4242-a55e-c59fd8983e4d-attachment.txt", "type": "text/plain"}], "start": 1764033809736, "stop": 1764033809736}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033811788, "stop": 1764033811847}], "attachments": [{"name": "时区处理", "source": "52a68e94-d594-46b5-b69b-edbcb93c4d62-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "6f56284b-54c5-4ced-ae3d-2ee26020a1e4-attachment.txt", "type": "text/plain"}], "start": 1764033811787, "stop": 1764033811847}, {"name": "轮询中（已等待17.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "7ecc230d-347a-475f-8538-284cc59d1ee2-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "262bb7d9-847c-44dd-a516-0e6b3b57e744-attachment.txt", "type": "text/plain"}], "start": 1764033811847, "stop": 1764033811847}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "aec35441-8a44-42c7-80e4-118561049090-attachment.txt", "type": "text/plain"}], "start": 1764033811847, "stop": 1764033811848}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033813906, "stop": 1764033813963}], "attachments": [{"name": "时区处理", "source": "b8ece4ca-ec7c-4ffb-bb42-e7f6e33ebe81-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "629fb3ef-8de6-41e3-b183-22d543a344c2-attachment.txt", "type": "text/plain"}], "start": 1764033813905, "stop": 1764033813963}, {"name": "轮询中（已等待19.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "30643aca-f044-483e-9f0c-2b670da8ac8a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "97930509-8df2-4129-a15a-3e729f57447e-attachment.txt", "type": "text/plain"}], "start": 1764033813963, "stop": 1764033813963}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "509592ab-e0fd-492b-ad92-6f561becfef1-attachment.txt", "type": "text/plain"}], "start": 1764033813964, "stop": 1764033813964}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033816025, "stop": 1764033816081}], "attachments": [{"name": "时区处理", "source": "ef4985fe-7d7a-4f14-bb33-2e1eeb35579f-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "2beff8b0-8ba0-4377-8631-cc0f94eb9ad7-attachment.txt", "type": "text/plain"}], "start": 1764033816024, "stop": 1764033816081}, {"name": "轮询中（已等待21.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "af9b7d15-6e5f-461b-877d-9ac0d1542fb8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "41324b9f-0776-456e-9629-84ab0373ac3b-attachment.txt", "type": "text/plain"}], "start": 1764033816081, "stop": 1764033816082}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "384184fe-6b21-4bd7-843f-265816c02d71-attachment.txt", "type": "text/plain"}], "start": 1764033816082, "stop": 1764033816083}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033818135, "stop": 1764033818192}], "attachments": [{"name": "时区处理", "source": "5d4bb7e0-3ba2-460d-aea6-d436d20b9919-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "79884eae-f215-43fb-b156-bfc8acbc9a36-attachment.txt", "type": "text/plain"}], "start": 1764033818135, "stop": 1764033818192}, {"name": "轮询中（已等待23.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "d8f7fdd6-a7c3-40dc-847b-a25be3f9e138-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "71684032-6050-4872-b60f-179fd961a5a5-attachment.txt", "type": "text/plain"}], "start": 1764033818192, "stop": 1764033818193}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "b5ca409c-3930-4916-a4c0-372c0c6c1f7d-attachment.txt", "type": "text/plain"}], "start": 1764033818193, "stop": 1764033818193}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033820254, "stop": 1764033820315}], "attachments": [{"name": "时区处理", "source": "eb945ac7-ec4a-4983-a19c-ccfe1d7ef772-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "88a546ae-223e-4387-9ad6-55a63d6430ae-attachment.txt", "type": "text/plain"}], "start": 1764033820253, "stop": 1764033820315}, {"name": "轮询中（已等待25.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "097e01d3-d806-4aaa-a6f1-9f737fc92c04-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "df53efe6-e367-4e35-9d63-278dbdca07d5-attachment.txt", "type": "text/plain"}], "start": 1764033820315, "stop": 1764033820316}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "21d4da84-da99-42a9-9548-40c04e1c0388-attachment.txt", "type": "text/plain"}], "start": 1764033820316, "stop": 1764033820316}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033822378, "stop": 1764033822436}], "attachments": [{"name": "时区处理", "source": "fa3a84bc-87be-4142-a6fd-8708a41a7cce-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "523e311a-57d3-4817-8892-566935246ca7-attachment.txt", "type": "text/plain"}], "start": 1764033822377, "stop": 1764033822436}, {"name": "轮询中（已等待27.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "625a153f-d632-4aed-891e-74545f47f45e-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d276355b-4055-4e55-8d0a-ce73b3fadda5-attachment.txt", "type": "text/plain"}], "start": 1764033822436, "stop": 1764033822436}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "0920db8a-4f65-42d3-9ae0-c71f8b10928f-attachment.txt", "type": "text/plain"}], "start": 1764033822436, "stop": 1764033822437}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1764033824497, "stop": 1764033824553}], "attachments": [{"name": "时区处理", "source": "70b673b6-0169-4ff5-a74c-b3d2dc9118b6-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "ab53d75e-8116-42f0-9408-af0a48c408a7-attachment.txt", "type": "text/plain"}], "start": 1764033824496, "stop": 1764033824553}, {"name": "轮询中（已等待29.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "560ca071-3f4c-4a71-99a7-9c6c59ceacfc-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "9739813f-0564-4e8c-b28f-342166641d12-attachment.txt", "type": "text/plain"}], "start": 1764033824553, "stop": 1764033824554}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "02fe55c0-6d54-4d95-8252-8af1edffca59-attachment.txt", "type": "text/plain"}], "start": 1764033824554, "stop": 1764033824554}, {"name": "时区查询轮询超时", "status": "passed", "attachments": [{"name": "处理说明", "source": "2efb52c5-374b-4041-afd0-7899b105e936-attachment.txt", "type": "text/plain"}], "start": 1764033826555, "stop": 1764033826555}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "b0e144ba-3f5c-4596-a894-66b8d2e40bce-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "3ece45e8-082e-4219-bc73-fc163d71fd0f-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "89ec683d-0434-46d5-a856-857fdcfc8790-attachment.txt", "type": "text/plain"}], "start": 1764033826613, "stop": 1764033826614}], "start": 1764033826556, "stop": 1764033826614}], "attachments": [{"name": "时区处理", "source": "ca6b388e-c0d1-44a9-8cdd-5b86bfdf025b-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "8964b023-a20d-493c-bb98-6b49c4236cee-attachment.txt", "type": "text/plain"}], "start": 1764033826555, "stop": 1764033826614}, {"name": "时区查询无结果", "status": "passed", "attachments": [{"name": "异常详情", "source": "e6cb4254-a4d1-41b5-abf3-413f84efc473-attachment.txt", "type": "text/plain"}, {"name": "执行SQL", "source": "3146e50f-2b7e-4bcd-a47b-45b09abd7bd6-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "cf57d692-3598-4abf-bbdc-a9ec0ccaf958-attachment.txt", "type": "text/plain"}, {"name": "时区偏移量（小时）", "source": "c8ab81fe-dd4a-44d1-8483-6bdcb902b3da-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "2d0d729e-fb84-47e7-9748-4d8f966f4839-attachment.txt", "type": "text/plain"}], "start": 1764033826614, "stop": 1764033826615}], "start": 1764033794819, "stop": 1764033826615}], "start": 1764033794819, "stop": 1764033826616}], "attachments": [{"name": "log", "source": "72b111e8-0c53-4094-9924-686fff9ba158-attachment.txt", "type": "text/plain"}], "start": 1764033794819, "stop": 1764033826617, "uuid": "6c3f0cc8-071e-483f-be0c-b10a0d4da73e", "historyId": "37113a43e483e0aa564e377e5a40a304", "testCaseId": "37113a43e483e0aa564e377e5a40a304", "fullName": "test_cloudTrader.test_cloud_masOrderSend.TestCloudtradingOrders7#test_dbquery_addsalve_orderSendclose", "labels": [{"name": "story", "value": "场景7：分配下单-手数范围0.01-1，总手数0.3"}, {"name": "feature", "value": "云策略-策略账号交易下单-开仓的场景校验"}, {"name": "tag", "value": "@pytest.mark.usefixtures('class_random_str')"}, {"name": "tag", "value": "flaky(reruns=0, reruns_delay=0)"}, {"name": "parentSuite", "value": "test_cloudTrader"}, {"name": "suite", "value": "test_cloud_masOrderSend"}, {"name": "subSuite", "value": "TestCloudMasOrdersend"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "31184-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cloudTrader.test_cloud_masOrderSend"}]}