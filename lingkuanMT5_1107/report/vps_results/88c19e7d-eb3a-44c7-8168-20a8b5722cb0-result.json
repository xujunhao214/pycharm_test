{"name": "数据库校验-交易平仓-跟单指令及订单详情数据检查-有订单", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 等待记录出现超时（30秒）", "trace": "self = <lingkuanMT5_1107.test_vps.test_vps_masOrderClose.TestVPSMasOrderclose.TestVPStradingOrders3 object at 0x000002E3BDBAE7F0>\nclass_random_str = 'x3b28719'\nvar_manager = <lingkuanMT5_1107.commons.variable_manager.VariableManager object at 0x000002E3BDAD1760>\ndb_transaction = <DBUtils.PooledDB.PooledDedicatedDBConnection object at 0x000002E3BDC8BC70>\n\n    @allure.title(\"数据库校验-交易平仓-跟单指令及订单详情数据检查-有订单\")\n    def test_dbquery_addsalve_orderSendclose2(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"1. 获取订单详情表账号数据\"):\n            MT5vps_user_accounts_1 = var_manager.get_variable(\"MT5vps_user_accounts_1\")\n            MT5vps_addslave_id = var_manager.get_variable(\"MT5vps_addslave_id\")\n            sql = f\"\"\"\n                  SELECT\n                      fod.size,\n                      fod.close_no,\n                      fod.magical,\n                      fod.open_price,\n                      fod.symbol,\n                      fod.order_no,\n                      fod.comment,\n                      fod.close_time,\n                      foi.true_total_lots,\n                      foi.order_no,\n                      foi.operation_type,\n                      foi.create_time,\n                      foi.status,\n                      foi.min_lot_size,\n                      foi.max_lot_size,\n                      foi.total_lots,\n                      foi.master_order,\n                      foi.total_orders\n                  FROM\n                      follow_order_detail fod\n                  INNER JOIN\n                      follow_order_instruct foi\n                  ON\n                      foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci\n                  WHERE foi.operation_type = %s\n                      AND fod.account = %s\n                      AND fod.comment = %s\n                      AND fod.trader_id = %s\n                      \"\"\"\n            params = (\n                '1',\n                MT5vps_user_accounts_1,\n                class_random_str,\n                MT5vps_addslave_id,\n            )\n    \n            # 调用轮询等待方法（带时间范围过滤）\n>           db_data = self.query_database_with_time(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"foi.create_time\"\n            )\n\ntest_vps\\test_vps_masOrderClose.py:1016: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuanMT5_1107.test_vps.test_vps_masOrderClose.TestVPSMasOrderclose.TestVPStradingOrders3 object at 0x000002E3BDBAE7F0>\ndb_transaction = <DBUtils.PooledDB.PooledDedicatedDBConnection object at 0x000002E3BDC8BC70>\nsql = '\\n                      SELECT \\n                          fod.size,\\n                          fod.close_no,\\n      ...                    AND fod.comment = %s\\n                          AND fod.trader_id = %s\\n                          '\nparams = ('1', '66938913', 'x3b28719', 15271), time_field = 'foi.create_time'\ntime_range = 3, order_by = 'create_time DESC', timeout = 30, poll_interval = 2\nstable_period = 2, attach_to_allure = True\n\n    def query_database_with_time(\n            self,\n            db_transaction: pymysql.connections.Connection,\n            sql: str,\n            params: tuple = (),\n            time_field: Optional[str] = None,\n            time_range: int = MYSQL_TIME,  # 时间范围（分钟），默认使用你的全局变量\n            order_by: str = \"create_time DESC\",\n            timeout: int = WAIT_TIMEOUT,  # 轮询总超时，默认全局变量\n            poll_interval: int = POLL_INTERVAL,  # 轮询间隔，默认全局变量\n            stable_period: int = STBLE_PERIOD,  # 数据稳定期，默认全局变量\n            attach_to_allure: bool = True\n    ) -> List[Dict[str, Any]]:\n        \"\"\"轮询等待数据库记录稳定（核心改造：使用固定时间范围，避免数据过期）\"\"\"\n        start_time = time.time()\n        last_result = None\n        stable_start_time = None\n        final_result = None\n        has_data = False\n    \n        # 生成固定时间范围（轮询开始时计算一次）\n        poll_start_datetime = datetime.datetime.now()\n        fixed_time_start = (poll_start_datetime - datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        fixed_time_end = (poll_start_datetime + datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        logger.info(\n            f\"[{self._get_current_time()}] 开始轮询等待数据稳定 | \"\n            f\"超时: {timeout}秒 | 稳定期: {stable_period}秒\"\n        )\n    \n        with allure.step(f\"轮询等待数据稳定（超时: {timeout}秒，稳定期: {stable_period}秒）\"):\n            while time.time() - start_time < timeout:\n                try:\n                    db_transaction.commit()  # 刷新事务\n    \n                    # 传入固定时间范围，而非动态计算\n                    result = self._execute_query(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=params,\n                        time_field=time_field,\n                        order_by=order_by,\n                        fixed_time_start=fixed_time_start,  # 传递固定开始时间\n                        fixed_time_end=fixed_time_end,  # 传递固定结束时间\n                        attach_to_allure=False  # 轮询过程中不重复附加报告\n                    )\n    \n                    # 记录轮询状态（原有逻辑不变）\n                    elapsed = time.time() - start_time\n                    with allure.step(f\"轮询中（已等待{elapsed:.1f}秒）\"):\n                        allure.attach(f\"结果数量: {len(result)}\", \"当前状态\", allure.attachment_type.TEXT)\n                        allure.attach(f\"剩余时间: {timeout - elapsed:.1f}秒\", \"超时倒计时\",\n                                      allure.attachment_type.TEXT)\n    \n                    # 检查数据是否稳定（原有逻辑不变）\n                    if len(result) > 0:\n                        has_data = True\n                        if self._is_result_stable(result, last_result):\n                            if stable_start_time is None:\n                                stable_start_time = time.time()\n                                logger.debug(f\"[{self._get_current_time()}] 数据首次稳定，开始计时\")\n                                with allure.step(\"数据首次稳定\"):\n                                    allure.attach(f\"开始稳定期计时（需保持{stable_period}秒）\", \"状态说明\",\n                                                  allure.attachment_type.TEXT)\n                            elif time.time() - stable_start_time >= stable_period:\n                                final_result = result\n                                logger.info(\n                                    f\"[{self._get_current_time()}] 数据已稳定{stable_period}秒（耗时{time.time() - start_time:.1f}秒）| \"\n                                    f\"结果数: {len(result)}\"\n                                )\n                                with allure.step(\"数据稳定达标\"):\n                                    allure.attach(\n                                        f\"已稳定{stable_period}秒（总耗时{time.time() - start_time:.1f}秒）\",\n                                        \"结果说明\", allure.attachment_type.TEXT)\n                                break\n                        else:\n                            stable_start_time = None  # 数据变化，重置计时器\n                            logger.debug(f\"[{self._get_current_time()}] 数据仍在变化，重置稳定计时器\")\n                            with allure.step(\"数据发生变化\"):\n                                allure.attach(\"重置稳定期计时器\", \"状态说明\", allure.attachment_type.TEXT)\n                    else:\n                        stable_start_time = None\n                        has_data = False\n                        logger.debug(\n                            f\"[{self._get_current_time()}] 查询结果为空，继续等待\")\n                        with allure.step(\"查询结果为空\"):\n                            allure.attach(\"继续等待数据出现\", \"状态说明\", allure.attachment_type.TEXT)\n    \n                    last_result = result\n                    time.sleep(poll_interval)\n    \n                except Exception as e:\n                    with allure.step(\"轮询查询异常（单次查询失败）\"):\n                        allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                        allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                        allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                      allure.attachment_type.TEXT)\n                        allure.attach(str(e), \"错误详情\", allure.attachment_type.TEXT)\n                    logger.warning(f\"[{self._get_current_time()}] 轮询查询异常: {str(e)} \\n继续等待...\")\n                    time.sleep(poll_interval)\n    \n            # 超时处理：获取最终结果（仍使用固定时间范围）\n            if final_result is None:\n                with allure.step(\"轮询超时处理\"):\n                    allure.attach(\n                        f\"超过{timeout}秒未达到稳定状态，获取最终结果\",\n                        \"处理说明\",\n                        allure.attachment_type.TEXT)\n                final_result = self._execute_query(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    time_field=time_field,\n                    order_by=order_by,\n                    fixed_time_start=fixed_time_start,\n                    fixed_time_end=fixed_time_end,\n                    attach_to_allure=attach_to_allure\n                )\n    \n            # 附加最终结果到报告（原有逻辑不变）\n            if attach_to_allure:\n                display_count = min(len(final_result), 50)\n                with allure.step(\"数据库查询结果（最终稳定结果）\"):\n                    allure.attach(\n                        self.serialize_data(final_result[:display_count]),\n                        f\"查询结果（共{len(final_result)}条，显示前50条）\",\n                        allure.attachment_type.JSON\n                    )\n                    allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                    allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                    allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                  allure.attachment_type.TEXT)  # Allure展示固定时间\n    \n            # 判断超时场景（原有逻辑不变）\n            if len(final_result) == 0:\n                with allure.step(\"轮询超时（无结果）\"):\n                    allure.attach(\n                        f\"等待{timeout}秒后仍无查询结果\",\n                        \"超时详情\", allure.attachment_type.TEXT)\n                error_msg = f\"Failed: 等待记录出现超时（{timeout}秒）\"\n>               raise TimeoutError(error_msg)\nE               TimeoutError: Failed: 等待记录出现超时（30秒）\n\ncommons\\api_base.py:653: TimeoutError"}, "description": "\n    ### 测试说明\n    - 前置条件：有vps策略和vps跟单\n      1. 修改跟单账号，跟单方向-反向sell\n      2. 进行开仓，手数范围：0.1-1，总订单数量4\n      3. 交易下单-跟单账号自己平仓-buy\n      4. 校验平仓的订单数，应该不等于4\n      5. 交易下单-跟单账号自己平仓-sell\n      6. 校验平仓的订单数,等于4\n    - 预期结果：平仓的订单方向功能正确\n    ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 等待记录出现超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1107\\test_vps\\test_vps_masOrderClose.py\", line 1016, in test_dbquery_addsalve_orderSendclose2\n    db_data = self.query_database_with_time(\n  File \"D:\\pycharm_test\\lingkuanMT5_1107\\commons\\api_base.py\", line 653, in query_database_with_time\n    raise TimeoutError(error_msg)\n"}, "steps": [{"name": "轮询等待数据稳定（超时: 30秒，稳定期: 2秒）", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 等待记录出现超时（30秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1107\\commons\\api_base.py\", line 653, in query_database_with_time\n    raise TimeoutError(error_msg)\n"}, "steps": [{"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928731075, "stop": 1762928731285}], "attachments": [{"name": "查询条件", "source": "3d4c5c69-b70f-4366-9aae-ba76617b61f1-attachment.txt", "type": "text/plain"}], "start": 1762928731074, "stop": 1762928731285}, {"name": "轮询中（已等待0.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ec5936bd-97a1-4596-8b4c-44a6f06443c5-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "be33d684-f042-46f1-86cb-9ec2cffe24d0-attachment.txt", "type": "text/plain"}], "start": 1762928731285, "stop": 1762928731286}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "b2f64775-ac24-4f0d-bfdc-483ed670f24f-attachment.txt", "type": "text/plain"}], "start": 1762928731286, "stop": 1762928731286}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928733336, "stop": 1762928733406}], "attachments": [{"name": "查询条件", "source": "4de3a215-3290-458c-98bc-4e62ba85a762-attachment.txt", "type": "text/plain"}], "start": 1762928733335, "stop": 1762928733406}, {"name": "轮询中（已等待2.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ac047e9f-5996-4042-9f3c-08584c81b84c-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d58f48b8-13f9-4681-a89b-494e70c8fe82-attachment.txt", "type": "text/plain"}], "start": 1762928733406, "stop": 1762928733407}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "565ffc72-ce67-4159-a172-94984e014a72-attachment.txt", "type": "text/plain"}], "start": 1762928733407, "stop": 1762928733407}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928735470, "stop": 1762928735686}], "attachments": [{"name": "查询条件", "source": "c55be179-793a-4355-a2f1-df0e2a5d290d-attachment.txt", "type": "text/plain"}], "start": 1762928735469, "stop": 1762928735686}, {"name": "轮询中（已等待4.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ca1111b4-fe1f-4844-bdc4-266dd62192d6-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2a86ab95-24fb-4bf3-8f15-ea57d94843fa-attachment.txt", "type": "text/plain"}], "start": 1762928735686, "stop": 1762928735687}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "fcc37c3c-aa53-490c-9fe2-879a89b7c869-attachment.txt", "type": "text/plain"}], "start": 1762928735687, "stop": 1762928735687}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928737742, "stop": 1762928737802}], "attachments": [{"name": "查询条件", "source": "b576fcc6-8b92-4be8-a45b-6f0bc9cd558c-attachment.txt", "type": "text/plain"}], "start": 1762928737742, "stop": 1762928737802}, {"name": "轮询中（已等待6.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "5b85de0c-75ec-40a5-b20c-fc34d7add686-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "5b9479ab-3452-4269-854b-6d2ff991215b-attachment.txt", "type": "text/plain"}], "start": 1762928737802, "stop": 1762928737804}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "42023083-57e7-4a2d-906f-bef76bd408cb-attachment.txt", "type": "text/plain"}], "start": 1762928737804, "stop": 1762928737804}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928739863, "stop": 1762928739920}], "attachments": [{"name": "查询条件", "source": "c4c8fc3d-fd1f-46d7-ad2c-c6c034951ba8-attachment.txt", "type": "text/plain"}], "start": 1762928739862, "stop": 1762928739920}, {"name": "轮询中（已等待8.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "fd2d6e9d-609f-4455-8426-0f5410516ae3-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "5830a30f-a173-4ec2-9a4f-bde5e404b71f-attachment.txt", "type": "text/plain"}], "start": 1762928739920, "stop": 1762928739921}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "da50834a-2dca-431d-8551-7de2b377bdb3-attachment.txt", "type": "text/plain"}], "start": 1762928739921, "stop": 1762928739922}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928741976, "stop": 1762928742028}], "attachments": [{"name": "查询条件", "source": "d17a38b9-65ac-46c7-9446-46b6767b118b-attachment.txt", "type": "text/plain"}], "start": 1762928741976, "stop": 1762928742028}, {"name": "轮询中（已等待11.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "d2bd2067-4190-4d96-a7b7-c8e1b678db18-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "43719ceb-918b-40e9-a1d0-c369c3967eb8-attachment.txt", "type": "text/plain"}], "start": 1762928742028, "stop": 1762928742029}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "0c54c622-c15d-4cd0-a9e4-b0cb8546e30d-attachment.txt", "type": "text/plain"}], "start": 1762928742029, "stop": 1762928742029}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928744086, "stop": 1762928744140}], "attachments": [{"name": "查询条件", "source": "4ea55d10-6b61-4098-a42b-a88e6de40f47-attachment.txt", "type": "text/plain"}], "start": 1762928744085, "stop": 1762928744140}, {"name": "轮询中（已等待13.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "71dce0d8-ac48-484d-b430-9179fa723ee2-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "3b340c7c-532c-4c06-87d4-f166470445f3-attachment.txt", "type": "text/plain"}], "start": 1762928744140, "stop": 1762928744141}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "a54f5978-9001-406c-a020-ef54b33579d8-attachment.txt", "type": "text/plain"}], "start": 1762928744141, "stop": 1762928744141}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928746191, "stop": 1762928746246}], "attachments": [{"name": "查询条件", "source": "1e83ae9e-a062-4e90-b74d-d79e275ccbaf-attachment.txt", "type": "text/plain"}], "start": 1762928746191, "stop": 1762928746246}, {"name": "轮询中（已等待15.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "0f3569a2-7d9a-4f59-968a-ba30cb10fc2f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e751bf74-7c23-4b90-8a5d-9a1b6413998d-attachment.txt", "type": "text/plain"}], "start": 1762928746246, "stop": 1762928746247}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "525c9c54-813d-49ef-967c-96069aeb4b53-attachment.txt", "type": "text/plain"}], "start": 1762928746247, "stop": 1762928746247}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928748307, "stop": 1762928748360}], "attachments": [{"name": "查询条件", "source": "ca02b800-968c-4ee9-9faa-ebed876798d0-attachment.txt", "type": "text/plain"}], "start": 1762928748307, "stop": 1762928748360}, {"name": "轮询中（已等待17.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "6cabc912-b43b-4c0a-b919-de00d242cefb-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "6c996445-5477-4146-b46a-a9ec25c33145-attachment.txt", "type": "text/plain"}], "start": 1762928748360, "stop": 1762928748361}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "f8cb0032-103c-4f82-82ac-fdc725c51097-attachment.txt", "type": "text/plain"}], "start": 1762928748361, "stop": 1762928748361}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928750409, "stop": 1762928750614}], "attachments": [{"name": "查询条件", "source": "e17b590d-a423-4295-8b23-cb6f32ce516b-attachment.txt", "type": "text/plain"}], "start": 1762928750408, "stop": 1762928750614}, {"name": "轮询中（已等待19.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "64a6611d-84a2-432d-b669-bd532d4cbff5-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "7f594e3f-1e2c-44f8-9280-9c103ca48b86-attachment.txt", "type": "text/plain"}], "start": 1762928750614, "stop": 1762928750615}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "d443b22b-8f56-40bb-91f3-3d13939431c6-attachment.txt", "type": "text/plain"}], "start": 1762928750615, "stop": 1762928750615}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928752663, "stop": 1762928752716}], "attachments": [{"name": "查询条件", "source": "70dc16ee-d3e7-4d42-a751-4676a4713724-attachment.txt", "type": "text/plain"}], "start": 1762928752662, "stop": 1762928752716}, {"name": "轮询中（已等待21.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b8899656-0a74-4599-bc74-8f503522ac6f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1b8d1b41-c0b2-4544-be25-950d8ad27406-attachment.txt", "type": "text/plain"}], "start": 1762928752716, "stop": 1762928752717}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "b149a43b-a6ba-4d4b-876e-9e1551325363-attachment.txt", "type": "text/plain"}], "start": 1762928752717, "stop": 1762928752718}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928754772, "stop": 1762928754824}], "attachments": [{"name": "查询条件", "source": "e658f1de-b33d-4edc-93c8-2cc0592f8a86-attachment.txt", "type": "text/plain"}], "start": 1762928754772, "stop": 1762928754824}, {"name": "轮询中（已等待23.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "e9d5153b-4975-4b63-8df9-e2dc6dc82d65-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "0d961888-dbaa-473d-b365-ff0efeacd7b7-attachment.txt", "type": "text/plain"}], "start": 1762928754824, "stop": 1762928754824}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "4482a2c1-a98e-45fd-a456-3d70b73b8b5b-attachment.txt", "type": "text/plain"}], "start": 1762928754824, "stop": 1762928754825}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928756882, "stop": 1762928756935}], "attachments": [{"name": "查询条件", "source": "217fbda5-0442-472f-b8ce-bb721c4d0910-attachment.txt", "type": "text/plain"}], "start": 1762928756882, "stop": 1762928756935}, {"name": "轮询中（已等待25.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "188ad7dd-93ed-433b-b7bc-e37ec4180a4b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "da1a8bc0-cdbb-43ab-a2b3-1db1ea989f6a-attachment.txt", "type": "text/plain"}], "start": 1762928756935, "stop": 1762928756936}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "c6e77b88-d520-4f5f-a3d4-783250a6c2ad-attachment.txt", "type": "text/plain"}], "start": 1762928756936, "stop": 1762928756936}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762928758995, "stop": 1762928759047}], "attachments": [{"name": "查询条件", "source": "f841918c-2331-469b-812f-8fc1238b875e-attachment.txt", "type": "text/plain"}], "start": 1762928758994, "stop": 1762928759047}, {"name": "轮询中（已等待28.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "6b4b513c-65c7-4da3-8c4a-b8b1ecee5242-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d19a0c29-072f-4586-a8e8-0dc42be7cd7d-attachment.txt", "type": "text/plain"}], "start": 1762928759047, "stop": 1762928759048}, {"name": "查询结果为空", "status": "passed", "attachments": [{"name": "状态说明", "source": "58d92515-0087-4b96-a081-dfc1627e8ca5-attachment.txt", "type": "text/plain"}], "start": 1762928759048, "stop": 1762928759049}, {"name": "轮询超时处理", "status": "passed", "attachments": [{"name": "处理说明", "source": "e230cdf9-6862-4a12-86c0-7d4512d61868-attachment.txt", "type": "text/plain"}], "start": 1762928761063, "stop": 1762928761063}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "d1dd65ae-5bd8-49b9-a379-0a910037c43a-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "43e6b948-0966-4478-b93a-927f4bcab874-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d20718f6-b0d9-486a-8c68-c9d16b633f96-attachment.txt", "type": "text/plain"}], "start": 1762928761120, "stop": 1762928761121}], "start": 1762928761064, "stop": 1762928761121}], "attachments": [{"name": "查询条件", "source": "53edad70-6707-47b5-8e04-43b55fe33da2-attachment.txt", "type": "text/plain"}], "start": 1762928761063, "stop": 1762928761121}, {"name": "数据库查询结果（最终稳定结果）", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "3e4aa9d0-04be-4df7-be66-58b1772b4bbc-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "bf80d071-6ac0-4ae4-a75e-8c0ab092accc-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "b19776ac-0a09-44d8-9d28-43c5b52f4fa4-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "fc6f1e2d-2f10-4661-87a4-57dcc9a4065b-attachment.txt", "type": "text/plain"}], "start": 1762928761121, "stop": 1762928761123}, {"name": "轮询超时（无结果）", "status": "passed", "attachments": [{"name": "超时详情", "source": "e620cd09-a4f4-4fd8-97e5-35c0d852d031-attachment.txt", "type": "text/plain"}], "start": 1762928761123, "stop": 1762928761123}], "start": 1762928731030, "stop": 1762928761123}], "start": 1762928731030, "stop": 1762928761124}], "attachments": [{"name": "log", "source": "8010d8d0-7034-4e03-abfb-c1bf890a0fb3-attachment.txt", "type": "text/plain"}], "start": 1762928731030, "stop": 1762928761125, "uuid": "2bda2b23-c682-4469-84dc-5cf4da074d0a", "historyId": "b164cb8f4b8e8225b535bb318f6f1111", "testCaseId": "b164cb8f4b8e8225b535bb318f6f1111", "fullName": "test_vps.test_vps_masOrderClose.TestVPStradingOrders3#test_dbquery_addsalve_orderSendclose2", "labels": [{"name": "feature", "value": "VPS策略账号交易下单-平仓的功能校验"}, {"name": "story", "value": "场景3：平仓的订单方向功能校验-sell"}, {"name": "tag", "value": "@pytest.mark.usefixtures('class_random_str')"}, {"name": "tag", "value": "flaky(reruns=0, reruns_delay=0)"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_vps_masOrderClose"}, {"name": "subSuite", "value": "TestVPSMasOrderclose"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "64996-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_vps_masOrderClose"}]}