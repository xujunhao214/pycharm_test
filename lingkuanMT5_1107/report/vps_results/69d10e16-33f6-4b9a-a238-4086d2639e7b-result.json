{"name": "出现漏开-redis数据和数据库的数据做比对", "status": "passed", "description": "\n    ### 用例说明\n    - 前置条件：有vps策略和vps跟单\n    - 操作步骤：\n      1. 修改vps跟单账号开仓-关闭\n      2. 进行开仓\n      3. 跟单账号开仓失败，有漏单数据，把redis数据和MySQL数据进行校验\n      4. 修改vps跟单账号开仓-开启\n      5. 进行补单操作，然后平仓\n    - 预期结果：vps跟单账号开仓-关闭，有漏单数据\n    ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "passed", "steps": [{"name": "轮询等待数据稳定（超时: 30秒，稳定期: 2秒）", "status": "passed", "steps": [{"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762501798252, "stop": 1762501798374}], "attachments": [{"name": "查询条件", "source": "0a932452-3a95-4342-bb4b-95784e85d3c5-attachment.txt", "type": "text/plain"}], "start": 1762501798252, "stop": 1762501798374}, {"name": "轮询中（已等待0.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "51b61797-0c7d-4967-bb81-31be83a3dc8b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "64362d6b-ebb6-4a3b-ba95-34097ab48c91-attachment.txt", "type": "text/plain"}], "start": 1762501798374, "stop": 1762501798375}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "判断结果", "source": "f14d71c8-1a8d-4ca6-b2e1-9fd4b8908053-attachment.txt", "type": "text/plain"}], "start": 1762501798375, "stop": 1762501798375}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "c08568ba-bdc4-46c7-b942-052adee18a25-attachment.txt", "type": "text/plain"}], "start": 1762501798375, "stop": 1762501798375}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762501800452, "stop": 1762501800508}], "attachments": [{"name": "查询条件", "source": "cc2ece22-de86-4e36-ba4e-dc3b4958a529-attachment.txt", "type": "text/plain"}], "start": 1762501800451, "stop": 1762501800508}, {"name": "轮询中（已等待2.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "bb401647-51be-4d97-abeb-ff4541e2ae54-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "3962de25-639b-4787-b0dd-8aa93c7d06ff-attachment.txt", "type": "text/plain"}], "start": 1762501800508, "stop": 1762501800508}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "唯一键信息", "source": "d23990a9-4977-471f-8bce-12b995b1afd4-attachment.txt", "type": "text/plain"}, {"name": "判断结果", "source": "52f276d9-0c0d-43f5-920e-ac399ddce1bf-attachment.txt", "type": "text/plain"}], "start": 1762501800508, "stop": 1762501800509}, {"name": "数据首次稳定", "status": "passed", "attachments": [{"name": "状态说明", "source": "17065eee-4a57-4a98-a4f4-ff2d40a20b6b-attachment.txt", "type": "text/plain"}], "start": 1762501800509, "stop": 1762501800509}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762501802598, "stop": 1762501802654}], "attachments": [{"name": "查询条件", "source": "5621eae4-c47b-4108-be05-86ea6dcee4dc-attachment.txt", "type": "text/plain"}], "start": 1762501802598, "stop": 1762501802654}, {"name": "轮询中（已等待4.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "812d6382-b128-430e-9b1f-c8dbbbfcf479-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "9ebfb0ef-c412-4389-826d-07bacf669ad4-attachment.txt", "type": "text/plain"}], "start": 1762501802654, "stop": 1762501802655}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "唯一键信息", "source": "ded39ed2-5673-4757-9231-c8e199146bf2-attachment.txt", "type": "text/plain"}, {"name": "判断结果", "source": "b388db18-6bd0-4bfc-99d7-91ec61b27ffa-attachment.txt", "type": "text/plain"}], "start": 1762501802655, "stop": 1762501802656}, {"name": "数据稳定达标", "status": "passed", "attachments": [{"name": "结果说明", "source": "dd14fc12-39ec-48cf-90ec-515b21e71343-attachment.txt", "type": "text/plain"}], "start": 1762501802656, "stop": 1762501802656}, {"name": "数据库查询结果（最终稳定结果）", "status": "passed", "attachments": [{"name": "查询结果（共1条，显示前50条）", "source": "719c3a0f-7e98-434d-8539-f28397936cf8-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "54685393-96af-4d17-9e10-0d9cf011d775-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "e52816ae-1df4-4d27-82cb-e879cc6bd3f5-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "5237d526-c899-4a43-a425-80dc07ef00c9-attachment.txt", "type": "text/plain"}], "start": 1762501802656, "stop": 1762501802657}], "start": 1762501798172, "stop": 1762501802657}], "start": 1762501798171, "stop": 1762501802657}, {"name": "2. 转换Redis数据为可比较格式", "status": "passed", "start": 1762501802657, "stop": 1762501802658}, {"name": "3. 比较Redis与数据库数据", "status": "passed", "steps": [{"name": "断言预期列表是实际列表的子集", "status": "passed", "attachments": [{"name": "比较维度", "source": "48a99ad1-02a2-42d2-b946-e5635c1d1e90-attachment.txt", "type": "text/plain"}, {"name": "精度设置", "source": "9c348187-1dd9-4812-9348-2dd5d20b6612-attachment.txt", "type": "text/plain"}, {"name": "实际列表（完整）", "source": "5d71fe92-438f-4e0d-9f37-f7c691866f79-attachment.json", "type": "application/json"}, {"name": "预期列表（需包含）", "source": "80951d0a-c79f-47b8-902e-95e93b9b0e63-attachment.json", "type": "application/json"}], "start": 1762501802659, "stop": 1762501802660}, {"name": "断言成功", "status": "passed", "attachments": [{"name": "结果", "source": "48b5e1d1-b245-4d37-ba3d-7055227dfc88-attachment.txt", "type": "text/plain"}], "start": 1762501802660, "stop": 1762501802660}], "start": 1762501802658, "stop": 1762501802660}], "attachments": [{"name": "log", "source": "cdf998d7-4d40-4fb3-bab0-91ba38563e9a-attachment.txt", "type": "text/plain"}], "start": 1762501798171, "stop": 1762501802660, "uuid": "0039e03f-f0e8-4a4b-afef-ca4518ee8f6b", "historyId": "17a27df411a4b4a6099a42e3ece5099e", "testCaseId": "17a27df411a4b4a6099a42e3ece5099e", "fullName": "test_vps.test_vpsOrder_open_level.TestLeakageopen#test_dbquery_redis", "labels": [{"name": "feature", "value": "VPS策略下单-漏单场景"}, {"name": "story", "value": "场景1：VPS策略下单-漏开"}, {"name": "tag", "value": "@pytest.mark.usefixtures('class_random_str')"}, {"name": "tag", "value": "flaky(reruns=0, reruns_delay=0)"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_vpsOrder_open_level"}, {"name": "subSuite", "value": "TestLeakageopen_level"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "76288-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_vpsOrder_open_level"}]}