INFO     lingkuan_828.commons.api_base:api_base.py:849 [2025-08-29 09:35:19] 开始轮询等待无记录 | SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                   | 超时: 30秒 | 稳定期: 2秒
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:19] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:19] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:19] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:21] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:21] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:21] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:23] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:23] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:23] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:25] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:25] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:25] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:27] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:27] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:27] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:29] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:29] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:29] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:31] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:32] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:32] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:34] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:34] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:34] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:36] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:36] 查询成功，结果数量: 2
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:36] 查询结果: [{"size": 0.43, "close_no": "5700815846804", "magical": 22839, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555878, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}, {"size": 0.28, "close_no": "5700815846804", "magical": 85786, "open_price": 3410.08, "symbol": "XAUUSD", "order_no": 555877, "true_total_lots": 0.71, "foi.order_no": "5700815846804", "operation_type": 1, "create_time": "2025-08-29 09:34:36", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 0.0, "master_order": null, "total_orders": 0}]
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:38] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:38] 查询成功，结果数量: 0
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:38] 查询结果: []
INFO     lingkuan_828.commons.api_base:api_base.py:451 [2025-08-29 09:35:40] 执行SQL: 
                               SELECT 
                                   fod.size,
                                   fod.close_no,
                                   fod.magical,
                                   fod.open_price,
                                   fod.symbol,
                                   fod.order_no,
                                   foi.true_total_lots,
                                   foi.order_no,
                                   foi.operation_type,
                                   foi.create_time,
                                   foi.status,
                                   foi.min_lot_size,
                                   foi.max_lot_size,
                                   foi.total_lots,
                                   foi.master_order,
                                   foi.total_orders
                               FROM 
                                   follow_order_detail fod
                               INNER JOIN 
                                   follow_order_instruct foi 
                               ON 
                                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                               WHERE foi.operation_type = %s
                                   AND fod.account = %s
                                   AND fod.trader_id = %s
                            AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 7220, 1, 1)
INFO     lingkuan_828.commons.api_base:api_base.py:454 [2025-08-29 09:35:40] 查询成功，结果数量: 0
INFO     lingkuan_828.commons.api_base:api_base.py:466 [2025-08-29 09:35:40] 查询结果: []
INFO     lingkuan_828.commons.api_base:api_base.py:886 [2025-08-29 09:35:40] 无记录稳定2秒，符合预期（耗时21.2秒）
INFO     root:api_base.py:1306 校验通过: 平仓失败，应该没有平仓订单

实际: 0
操作: ==
预期: 0

INFO     root:test_cloudOrderClose.py:2100 平仓失败，应该没有平仓订单，结果有0个订单