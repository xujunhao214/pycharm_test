{"name": "出现漏平-redis数据和数据库的数据做比对", "status": "passed", "description": "\n    ### 用例说明\n    - 前置条件：有vps策略和vps跟单\n    - 操作步骤：\n      1. 修改vps跟单账号平仓-关闭\n      2. 进行开仓\n      3. 进行平仓\n      4. 跟单账号平仓失败，有漏单数据，把redis数据和MySQL数据进行校验\n      5. 修改vps跟单账号平仓-开启\n    - 预期结果：vps跟单账号平仓-关闭，有漏单数据\n    ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "passed", "steps": [{"name": "轮询等待数据稳定（超时: 45秒，稳定期: 2秒）", "status": "passed", "steps": [{"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1761899249474, "stop": 1761899249524}], "attachments": [{"name": "查询条件", "source": "a64b3516-c11f-4544-8efd-74b2adb379c1-attachment.txt", "type": "text/plain"}], "start": 1761899249474, "stop": 1761899249524}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b3485845-4f6e-47ff-bb5b-5b9d8a468fb4-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "50543556-1b9e-4b8c-8cf4-b69e7a96bb1a-attachment.txt", "type": "text/plain"}], "start": 1761899249524, "stop": 1761899249525}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "判断结果", "source": "eecbd28a-281e-478a-aaf7-0ddc829dc670-attachment.txt", "type": "text/plain"}], "start": 1761899249525, "stop": 1761899249525}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "71545ff5-2209-453f-bf54-3c7a0d272084-attachment.txt", "type": "text/plain"}], "start": 1761899249525, "stop": 1761899249525}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1761899251583, "stop": 1761899251635}], "attachments": [{"name": "查询条件", "source": "595838b9-eb26-413e-aeda-983708ba07be-attachment.txt", "type": "text/plain"}], "start": 1761899251573, "stop": 1761899251635}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "45d5d395-7c7c-4400-b765-10edc695f01f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "39ed9ed5-bb32-478b-b200-8e907858437c-attachment.txt", "type": "text/plain"}], "start": 1761899251635, "stop": 1761899251669}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "唯一键信息", "source": "713db911-4f96-4f99-bda9-d137fec98189-attachment.txt", "type": "text/plain"}, {"name": "判断结果", "source": "0a110cab-bdf2-4ee7-9cc3-19c84b52d01b-attachment.txt", "type": "text/plain"}], "start": 1761899251669, "stop": 1761899251670}, {"name": "数据首次稳定", "status": "passed", "attachments": [{"name": "状态说明", "source": "c07fbed2-741d-4f7a-9f78-cf037b446fc0-attachment.txt", "type": "text/plain"}], "start": 1761899251670, "stop": 1761899251671}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1761899253740, "stop": 1761899253789}], "attachments": [{"name": "查询条件", "source": "ade229e3-dd00-445f-95ad-575ba5a13f53-attachment.txt", "type": "text/plain"}], "start": 1761899253739, "stop": 1761899253789}, {"name": "轮询中（已等待4.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "5941d17a-101d-448b-8627-2b69c37b529d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "8f86d696-cacf-4669-b136-a89ad46c90fe-attachment.txt", "type": "text/plain"}], "start": 1761899253789, "stop": 1761899253791}, {"name": "判断结果稳定性", "status": "passed", "attachments": [{"name": "唯一键信息", "source": "6f812d7c-96eb-48e3-9322-49d0b5b2504d-attachment.txt", "type": "text/plain"}, {"name": "判断结果", "source": "208469e4-96cc-4c92-ac30-0ecdf2da183e-attachment.txt", "type": "text/plain"}], "start": 1761899253791, "stop": 1761899253791}, {"name": "数据稳定达标", "status": "passed", "attachments": [{"name": "结果说明", "source": "0b560506-e6bb-4768-9794-4d985565d5a9-attachment.txt", "type": "text/plain"}], "start": 1761899253791, "stop": 1761899253792}, {"name": "数据库查询结果（最终稳定结果）", "status": "passed", "attachments": [{"name": "查询结果（共1条，显示前50条）", "source": "12e74a44-1fcf-47bf-ba14-6c415d8ec212-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "5f9cab5f-90be-416e-be0e-47cf85ddd583-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "8beff175-4aa9-4101-b047-003fe3c8b368-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "be69ad00-7954-46b1-812c-131e515ee99c-attachment.txt", "type": "text/plain"}], "start": 1761899253792, "stop": 1761899253793}], "start": 1761899249428, "stop": 1761899253793}], "start": 1761899249427, "stop": 1761899253793}, {"name": "2. 转换Redis数据为可比较格式", "status": "passed", "start": 1761899253793, "stop": 1761899253794}, {"name": "3. 比较Redis与数据库数据", "status": "passed", "steps": [{"name": "断言数据列表相等", "status": "passed", "attachments": [{"name": "比较维度", "source": "e852cee5-2225-4150-99f3-633033d6a071-attachment.txt", "type": "text/plain"}, {"name": "精度设置", "source": "527eb13d-a6fa-4f18-83bf-928a4bbc78b9-attachment.txt", "type": "text/plain"}, {"name": "实际列表", "source": "fcbb1eac-eeb6-4bec-aa6b-6602453db4d9-attachment.json", "type": "application/json"}, {"name": "预期列表", "source": "f9638f7b-0b30-427d-bc89-75aa0123665d-attachment.json", "type": "application/json"}], "start": 1761899253794, "stop": 1761899253795}], "start": 1761899253794, "stop": 1761899253795}], "attachments": [{"name": "log", "source": "19c67076-188c-42ae-ac4d-bc6ad0560fd6-attachment.txt", "type": "text/plain"}], "start": 1761899249427, "stop": 1761899253796, "uuid": "b0b979ee-c70e-4feb-8617-85732af21e6d", "historyId": "c90ae9479c1ad71426afbb0eb6bde40b", "testCaseId": "c90ae9479c1ad71426afbb0eb6bde40b", "fullName": "test_vps.test_vpsOrder_open_level.TestLeakagelevel#test_dbquery_redis", "labels": [{"name": "feature", "value": "VPS策略下单-漏单场景"}, {"name": "story", "value": "场景2：VPS策略下单-漏平"}, {"name": "tag", "value": "@pytest.mark.usefixtures('class_random_str')"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_vpsOrder_open_level"}, {"name": "subSuite", "value": "TestLeakageopen_level"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "56544-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_vpsOrder_open_level"}]}