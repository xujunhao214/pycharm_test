{"name": "跟单软件看板-VPS数据-策略开仓", "status": "failed", "statusDetails": {"message": "AssertionError: 响应msg字段应为success\nURL: https://39.99.145.155/vps/subcontrol/trader/orderSend\nJSON路径: $.msg\n实际值: 300151下单失败,该账号正在下单中\n期望值: success", "trace": "self = <lingkuan_819.test_vps.test_vps_orderclose.TestVPSOrderSend3 object at 0x000001DFD4674160>\nvar_manager = <lingkuan_817.commons.variable_manager.VariableManager object at 0x000001DFD471C880>\nlogged_session = <lingkuan_819.commons.session.EnvironmentSession object at 0x000001DFD4845EB0>\n\n    @pytest.mark.url(\"vps\")\n    @allure.title(\"跟单软件看板-VPS数据-策略开仓\")\n    def test_trader_orderSend(self, var_manager, logged_session):\n        # 1. 发送策略开仓请求\n        trader_ordersend = var_manager.get_variable(\"trader_ordersend\")\n        vps_trader_id = var_manager.get_variable(\"vps_trader_id\")\n        data = {\n            \"symbol\": trader_ordersend[\"symbol\"],\n            \"placedType\": 0,\n            \"remark\": trader_ordersend[\"remark\"],\n            \"intervalTime\": 100,\n            \"type\": 0,\n            \"totalNum\": trader_ordersend[\"totalNum\"],\n            \"totalSzie\": trader_ordersend[\"totalSzie\"],\n            \"startSize\": trader_ordersend[\"startSize\"],\n            \"endSize\": trader_ordersend[\"endSize\"],\n            \"traderId\": vps_trader_id\n        }\n        response = self.send_post_request(\n            logged_session,\n            '/subcontrol/trader/orderSend',\n            json_data=data,\n        )\n    \n        # 2. 验证响应状态码和内容\n        self.assert_response_status(\n            response,\n            200,\n            \"策略开仓失败\"\n        )\n>       self.assert_json_value(\n            response,\n            \"$.msg\",\n            \"success\",\n            \"响应msg字段应为success\"\n        )\n\ntest_vps\\test_vps_orderclose.py:492: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuan_819.test_vps.test_vps_orderclose.TestVPSOrderSend3 object at 0x000001DFD4674160>\nresponse = <Response [200]>, json_path = '$.msg', expected_value = 'success'\nerror_msg = '响应msg字段应为success'\n\n    def assert_json_value(self, response, json_path, expected_value, error_msg):\n        \"\"\"断言JSON路径对应的值（增强错误处理）\"\"\"\n        try:\n            actual_value = self.extract_jsonpath(response, json_path)\n            # 处理列表结果（如果只有一个元素则取单个值）\n            if isinstance(actual_value, list) and len(actual_value) == 1:\n                actual_value = actual_value[0]\n    \n>           assert actual_value == expected_value, (\n                f\"{error_msg}\\n\"\n                f\"URL: {response.url}\\n\"\n                f\"JSON路径: {json_path}\\n\"\n                f\"实际值: {actual_value}\\n\"\n                f\"期望值: {expected_value}\"\n            )\nE           AssertionError: 响应msg字段应为success\nE           URL: https://39.99.145.155/vps/subcontrol/trader/orderSend\nE           JSON路径: $.msg\nE           实际值: 300151下单失败,该账号正在下单中\nE           期望值: success\n\n..\\lingkuan_817\\commons\\api_base.py:342: AssertionError"}, "description": "\n### 用例说明\n- 前置条件：有vps策略和vps跟单\n- 操作步骤：\n  1. 修改跟单账号的跟单方向为反向，进行开仓\n  2. 跟单账号buy方向进行平仓，平仓失败，给出提示\n  3. 跟单账号shell方向进行平仓，平仓成功\n  4. 策略账号buy方向进行平仓\n- 预期结果：平仓的订单方向功能正确\n", "steps": [{"name": "发送 POST 请求到 /subcontrol/trader/orderSend", "status": "passed", "steps": [{"name": "请求详情", "status": "passed", "attachments": [{"name": "请求URL", "source": "66d6b011-40aa-42e0-ba4e-4e5031ec62d0-attachment.txt", "type": "text/plain"}, {"name": "请求头", "source": "ca46f4c8-89a4-4db7-8546-dd629ff79e3f-attachment.json", "type": "application/json"}, {"name": "请求体（JSON）", "source": "30d2d201-cf75-4db6-9eb6-f0ebcaef7f5f-attachment.json", "type": "application/json"}], "start": 1755512483926, "stop": 1755512483927}, {"name": "响应详情", "status": "passed", "attachments": [{"name": "响应状态码", "source": "b51aea06-473e-4e3e-8d4a-a8c539c48ae4-attachment.txt", "type": "text/plain"}, {"name": "响应头", "source": "f059dfa3-c4de-4f02-8d83-2e97d567c1b5-attachment.json", "type": "application/json"}, {"name": "响应体（JSON）", "source": "bb52ee27-c464-47e2-b3d7-f626fada5083-attachment.json", "type": "application/json"}], "start": 1755512484200, "stop": 1755512484202}], "start": 1755512483926, "stop": 1755512485203}], "attachments": [{"name": "log", "source": "4161fd1b-58df-4ea1-a660-24aece6e3753-attachment.txt", "type": "text/plain"}], "start": 1755512483925, "stop": 1755512485208, "uuid": "1794e2c9-8869-44dc-82e4-52307090e6a0", "historyId": "9d300b7ada78d02aca6835b1b258ae29", "testCaseId": "9d300b7ada78d02aca6835b1b258ae29", "fullName": "test_vps.test_vps_orderclose.TestVPSOrderSend3#test_trader_orderSend", "labels": [{"name": "tag", "value": "url('vps')"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_vps_orderclose"}, {"name": "subSuite", "value": "TestVPSOrderSend3"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "6824-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_vps_orderclose"}]}