{"name": "数据库校验-VPS数据-删除跟单账号", "status": "failed", "statusDetails": {"message": "AssertionError: 账号删除失败，表里还存在数据:31492\nassert '31492' is None", "trace": "self = <lingkuan_MT4DE.test_vps.test_delete.TestDeleteUser object at 0x000002258F5CFC10>\nvar_manager = <lingkuan_MT4DE.commons.variable_manager.VariableManager object at 0x000002258F7B7280>\ndb_transaction = <pymysql.connections.Connection object at 0x000002258F7E7A90>\n\n    @allure.title(\"数据库校验-VPS数据-删除跟单账号\")\n    def test_dbdelete_addsalve(self, var_manager, db_transaction):\n        with allure.step(\"1. 查询数据库验证是否删除成功\"):\n            vps_user_accounts_1 = var_manager.get_variable(\"vps_user_accounts_1\")\n            logging.info(f\"查询条件: table=follow_trader, account={vps_user_accounts_1}\")\n    \n            sql = f\"SELECT * FROM follow_trader WHERE account = %s\"\n            params = (vps_user_accounts_1,)\n            try:\n                self.wait_for_database_deletion(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params\n                )\n                allure.attach(f\"跟单账号 {vps_user_accounts_1} 已成功从数据库删除\", \"验证结果\")\n            except TimeoutError as e:\n                allure.attach(f\"删除超时: {str(e)}\", \"验证结果\")\n                pytest.fail(f\"删除失败: {str(e)}\")\n    \n            db_data2 = self.query_database(\n                db_transaction,\n                f\"SELECT * FROM follow_trader_subscribe WHERE slave_account = %s\",\n                (vps_user_accounts_1,))\n            if db_data2:\n                slave_account = db_data2[0][\"slave_account\"]\n>               assert slave_account is None, f\"账号删除失败，表里还存在数据:{slave_account}\"\nE               AssertionError: 账号删除失败，表里还存在数据:31492\nE               assert '31492' is None\n\ntest_vps\\test_delete.py:239: AssertionError"}, "steps": [{"name": "1. 查询数据库验证是否删除成功", "status": "failed", "statusDetails": {"message": "AssertionError: 账号删除失败，表里还存在数据:31492\nassert '31492' is None\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_MT4DE\\test_vps\\test_delete.py\", line 239, in test_dbdelete_addsalve\n    assert slave_account is None, f\"账号删除失败，表里还存在数据:{slave_account}\"\n"}, "steps": [{"name": "等待数据库记录删除（超时: 5秒）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "attachments": [{"name": "执行SQL", "source": "aff5397f-e1ad-491b-a0c7-32aad3f9dc17-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "6294ecce-c1b0-49fb-87c1-3403fb3e6e18-attachment.txt", "type": "text/plain"}], "start": 1761296787111, "stop": 1761296787160}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "ea057f6d-3c8e-4a07-ae02-8a6be615fe9b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "92743560-0442-48a3-a2f3-d0c79e4e7586-attachment.txt", "type": "text/plain"}], "start": 1761296787160, "stop": 1761296787160}, {"name": "删除验证成功", "status": "passed", "attachments": [{"name": "结果说明", "source": "20bf9df6-5d0e-4499-b156-0b5ec059530b-attachment.txt", "type": "text/plain"}], "start": 1761296787160, "stop": 1761296787160}], "attachments": [{"name": "执行SQL", "source": "0117a3ad-0c35-4519-bfff-64a4247817b2-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "d3cf570b-2e7e-42da-b61b-22d1cc2ebb5e-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "82434ad7-a8a6-4673-828d-0936f99e7887-attachment.txt", "type": "text/plain"}], "start": 1761296787061, "stop": 1761296787160}, {"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共1条，显示前50条）", "source": "dde117b7-5c32-486a-b4d2-f563fb91c853-attachment.json", "type": "application/json"}], "start": 1761296787212, "stop": 1761296787212}], "attachments": [{"name": "执行SQL", "source": "b61d7062-1a85-41e9-a109-690a91a61bf0-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "18787d9c-c453-45fc-9840-f5e36a01fb6d-attachment.txt", "type": "text/plain"}], "start": 1761296787161, "stop": 1761296787212}], "attachments": [{"name": "验证结果", "source": "4fe8ccc2-b03c-462e-912a-8d499513a80a-attachment.attach"}], "start": 1761296787061, "stop": 1761296787212}], "attachments": [{"name": "log", "source": "d6a4c4e7-3cb9-4554-b58b-6cecf371529b-attachment.txt", "type": "text/plain"}], "start": 1761296787061, "stop": 1761296787213, "uuid": "e1e63782-1d6d-4077-851a-251a3ead3473", "historyId": "9ab0fedd4e85361911e8473f2a0a0600", "testCaseId": "9ab0fedd4e85361911e8473f2a0a0600", "fullName": "test_vps.test_delete.TestDeleteUser#test_dbdelete_addsalve", "labels": [{"name": "feature", "value": "数据管理-删除VPS测试数据"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_delete"}, {"name": "subSuite", "value": "TestDeleteUser"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "45372-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_delete"}]}