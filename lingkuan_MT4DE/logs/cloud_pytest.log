INFO     - 2025-11-14 13:48:30 - [conftest:341] - [2025-11-14 13:48] 测试会话开始: 2025-11-14 13:48:30, 测试组: cloud
INFO     - 2025-11-14 13:48:31 - [variable_manager:40] - [2025-11-14 13:48] 成功加载静态变量: VAR\uat_data.json
INFO     - 2025-11-14 13:48:31 - [variable_manager:64] - [2025-11-14 13:48] 成功加载运行时变量: VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:31 - [api_base:447] - [2025-11-14 13:48:31] 执行SQL: 
 SELECT * From follow_platform where server= %s  ORDER BY create_time DESC 
参数: ('FXAdamantStone-Real',)
INFO     - 2025-11-14 13:48:31 - [api_base:450] - [2025-11-14 13:48:31] 查询成功，结果数量: 1
INFO     - 2025-11-14 13:48:31 - [api_base:462] - [2025-11-14 13:48:31] 查询结果: [{"id": 346, "broker_name": "AS", "platform_type": 0, "server": "FXAdamantStone-Real", "server_node": "47.238.99.66:443", "remark": "BELLA", "version": 0, "deleted": 0, "creator": 10000, "create_time": "2024-12-02 21:49:36", "updater": 10101, "update_time": "2025-11-11 17:31:10", "logo": null, "max_lots": null, "suffix_enabled": 1, "suffix_forex": null, "suffix_cfd": null}]
INFO     - 2025-11-14 13:48:31 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:31 - [variable_manager:103] - [2025-11-14 13:48] 运行时变量已覆盖（空值）: max_lots = None
INFO     - 2025-11-14 13:48:31 - [api_base:447] - [2025-11-14 13:48:31] 执行SQL: 
 SELECT * From sys_params where param_name= %s  ORDER BY create_time DESC 
参数: ('最大手数配置',)
INFO     - 2025-11-14 13:48:31 - [api_base:450] - [2025-11-14 13:48:31] 查询成功，结果数量: 1
INFO     - 2025-11-14 13:48:31 - [api_base:462] - [2025-11-14 13:48:31] 查询结果: [{"id": 3, "param_name": "最大手数配置", "param_type": 1, "param_key": "max_lots", "param_value": "10", "remark": "最大手数配置", "tenant_id": 10000, "version": 3, "deleted": 0, "creator": 10000, "create_time": "2025-01-21 17:03:45", "updater": 10000, "update_time": "2025-01-23 22:53:50"}]
INFO     - 2025-11-14 13:48:31 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:31 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: param_value = 10
INFO     - 2025-11-14 13:48:31 - [conftest:65] - [2025-11-14 13:48:31] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend1::test_copy_place_order 开始登录，环境: uat
INFO     - 2025-11-14 13:48:31 - [conftest:108] - UAT登录尝试 1/5，MFA验证码: 137571
DEBUG    - 2025-11-14 13:48:31 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-14 13:48:33 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-14 13:48:33 - [conftest:127] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-15 13:48:33","refreshTokenExpire":"2025-11-28 13:48:33","access_token":"f2a078657cbf44938c6e2baf1f001a63","refresh_token":"688308cba2df46c294b360da039c9beb"}}
INFO     - 2025-11-14 13:48:33 - [conftest:137] - UAT登录成功（第1次尝试）
INFO     - 2025-11-14 13:48:33 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:33 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: access_token = f2a078657cbf44938c6e2baf1f001a63
DEBUG    - 2025-11-14 13:48:34 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/cloudTrader/cloudOrderSend HTTP/11" 200 None
INFO     - 2025-11-14 13:48:34 - [api_base:152] - [2025-11-14 13:48:34] POST请求（JSON）: /mascontrol/cloudTrader/cloudOrderSend 
数据: {'id': 464, 'type': 0, 'tradeType': 0, 'cloudTraderId': [5860], 'symbol': 'XAUUSD', 'startSize': 11.0, 'endSize': 11.0, 'totalSzie': 11.0, 'totalNum': 0}
INFO     - 2025-11-14 13:48:34 - [api_base:160] - [2025-11-14 13:48:34] 请求后等待 1 秒
INFO     - 2025-11-14 13:48:35 - [conftest:170] - [2025-11-14 13:48:35] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend1::test_copy_place_order 执行完毕
INFO     - 2025-11-14 13:48:35 - [api_base:537] - [2025-11-14 13:48:35] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     - 2025-11-14 13:48:35 - [api_base:447] - [2025-11-14 13:48:35] 执行SQL: 

                            SELECT 
                                fod.size,
                                fod.send_no,
                                fod.magical,
                                fod.open_price,
                                fod.comment,
                                fod.symbol,
                                fod.order_no,
                                fod.remark,
                                foi.true_total_lots,
                                foi.order_no,
                                foi.operation_type,
                                foi.create_time,
                                foi.status,
                                foi.min_lot_size,
                                foi.max_lot_size,
                                foi.total_lots,
                                foi.total_orders
                            FROM 
                                follow_order_detail fod
                            INNER JOIN 
                                follow_order_instruct foi 
                            ON 
                                foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                            WHERE fod.account = %s
                                AND fod.trader_id = %s
                         AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('31581', 11297, '2025-11-14 13:45:35', '2025-11-14 13:51:35')
INFO     - 2025-11-14 13:48:35 - [api_base:450] - [2025-11-14 13:48:35] 查询成功，结果数量: 2
INFO     - 2025-11-14 13:48:35 - [api_base:462] - [2025-11-14 13:48:35] 查询结果: [{"size": 11.0, "send_no": "9665969877508", "magical": null, "open_price": null, "comment": "", "symbol": "XAUUSD", "order_no": null, "remark": "超过最大手数限制", "true_total_lots": 11.0, "foi.order_no": "9665969877508", "operation_type": 0, "create_time": "2025-11-14 13:48:34", "status": 2, "min_lot_size": 11.0, "max_lot_size": 11.0, "total_lots": 11.0, "total_orders": 0}, {"size": 10.0, "send_no": "4557840164216", "magical": 34714, "open_price": 4195.15, "comment": "zdh1n9175", "symbol": "XAUUSD", "o
INFO     - 2025-11-14 13:48:37 - [api_base:447] - [2025-11-14 13:48:37] 执行SQL: 

                            SELECT 
                                fod.size,
                                fod.send_no,
                                fod.magical,
                                fod.open_price,
                                fod.comment,
                                fod.symbol,
                                fod.order_no,
                                fod.remark,
                                foi.true_total_lots,
                                foi.order_no,
                                foi.operation_type,
                                foi.create_time,
                                foi.status,
                                foi.min_lot_size,
                                foi.max_lot_size,
                                foi.total_lots,
                                foi.total_orders
                            FROM 
                                follow_order_detail fod
                            INNER JOIN 
                                follow_order_instruct foi 
                            ON 
                                foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                            WHERE fod.account = %s
                                AND fod.trader_id = %s
                         AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('31581', 11297, '2025-11-14 13:45:35', '2025-11-14 13:51:35')
INFO     - 2025-11-14 13:48:37 - [api_base:450] - [2025-11-14 13:48:37] 查询成功，结果数量: 2
INFO     - 2025-11-14 13:48:37 - [api_base:462] - [2025-11-14 13:48:37] 查询结果: [{"size": 11.0, "send_no": "9665969877508", "magical": null, "open_price": null, "comment": "", "symbol": "XAUUSD", "order_no": null, "remark": "超过最大手数限制", "true_total_lots": 11.0, "foi.order_no": "9665969877508", "operation_type": 0, "create_time": "2025-11-14 13:48:34", "status": 2, "min_lot_size": 11.0, "max_lot_size": 11.0, "total_lots": 11.0, "total_orders": 0}, {"size": 10.0, "send_no": "4557840164216", "magical": 34714, "open_price": 4195.15, "comment": "zdh1n9175", "symbol": "XAUUSD", "o
INFO     - 2025-11-14 13:48:39 - [api_base:447] - [2025-11-14 13:48:39] 执行SQL: 

                            SELECT 
                                fod.size,
                                fod.send_no,
                                fod.magical,
                                fod.open_price,
                                fod.comment,
                                fod.symbol,
                                fod.order_no,
                                fod.remark,
                                foi.true_total_lots,
                                foi.order_no,
                                foi.operation_type,
                                foi.create_time,
                                foi.status,
                                foi.min_lot_size,
                                foi.max_lot_size,
                                foi.total_lots,
                                foi.total_orders
                            FROM 
                                follow_order_detail fod
                            INNER JOIN 
                                follow_order_instruct foi 
                            ON 
                                foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                            WHERE fod.account = %s
                                AND fod.trader_id = %s
                         AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('31581', 11297, '2025-11-14 13:45:35', '2025-11-14 13:51:35')
INFO     - 2025-11-14 13:48:39 - [api_base:450] - [2025-11-14 13:48:39] 查询成功，结果数量: 2
INFO     - 2025-11-14 13:48:39 - [api_base:462] - [2025-11-14 13:48:39] 查询结果: [{"size": 11.0, "send_no": "9665969877508", "magical": null, "open_price": null, "comment": "", "symbol": "XAUUSD", "order_no": null, "remark": "超过最大手数限制", "true_total_lots": 11.0, "foi.order_no": "9665969877508", "operation_type": 0, "create_time": "2025-11-14 13:48:34", "status": 2, "min_lot_size": 11.0, "max_lot_size": 11.0, "total_lots": 11.0, "total_orders": 0}, {"size": 10.0, "send_no": "4557840164216", "magical": 34714, "open_price": 4195.15, "comment": "zdh1n9175", "symbol": "XAUUSD", "o
INFO     - 2025-11-14 13:48:39 - [api_base:578] - [2025-11-14 13:48:39] 数据已稳定2秒（耗时4.4秒）| 结果数: 2
INFO     - 2025-11-14 13:48:39 - [api_base:1488] - 校验通过: 开仓失败信息符合预期

实际: 超过最大手数限制
操作: ==
预期: 超过最大手数限制

INFO     - 2025-11-14 13:48:39 - [test_cloudOrder_error:181] - 失败信息验证通过: 超过最大手数限制
INFO     - 2025-11-14 13:48:39 - [api_base:447] - [2025-11-14 13:48:39] 执行SQL: 
 SELECT * From follow_platform where server= %s  ORDER BY create_time DESC 
参数: ('FXAdamantStone-Real',)
INFO     - 2025-11-14 13:48:39 - [api_base:450] - [2025-11-14 13:48:39] 查询成功，结果数量: 1
INFO     - 2025-11-14 13:48:39 - [api_base:462] - [2025-11-14 13:48:39] 查询结果: [{"id": 346, "broker_name": "AS", "platform_type": 0, "server": "FXAdamantStone-Real", "server_node": "47.238.99.66:443", "remark": "BELLA", "version": 0, "deleted": 0, "creator": 10000, "create_time": "2024-12-02 21:49:36", "updater": 10101, "update_time": "2025-11-11 17:31:10", "logo": null, "max_lots": null, "suffix_enabled": 1, "suffix_forex": null, "suffix_cfd": null}]
INFO     - 2025-11-14 13:48:39 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:39 - [variable_manager:103] - [2025-11-14 13:48] 运行时变量已覆盖（空值）: max_lots = None
INFO     - 2025-11-14 13:48:39 - [api_base:447] - [2025-11-14 13:48:39] 执行SQL: 
 SELECT * From sys_params where param_name= %s  ORDER BY create_time DESC 
参数: ('最大手数配置',)
INFO     - 2025-11-14 13:48:39 - [api_base:450] - [2025-11-14 13:48:39] 查询成功，结果数量: 1
INFO     - 2025-11-14 13:48:39 - [api_base:462] - [2025-11-14 13:48:39] 查询结果: [{"id": 3, "param_name": "最大手数配置", "param_type": 1, "param_key": "max_lots", "param_value": "10", "remark": "最大手数配置", "tenant_id": 10000, "version": 3, "deleted": 0, "creator": 10000, "create_time": "2025-01-21 17:03:45", "updater": 10000, "update_time": "2025-01-23 22:53:50"}]
INFO     - 2025-11-14 13:48:39 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:39 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: param_value = 10
INFO     - 2025-11-14 13:48:40 - [conftest:65] - [2025-11-14 13:48:40] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend2::test_copy_place_order 开始登录，环境: uat
INFO     - 2025-11-14 13:48:40 - [conftest:108] - UAT登录尝试 1/5，MFA验证码: 137571
DEBUG    - 2025-11-14 13:48:40 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-14 13:48:41 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-14 13:48:41 - [conftest:127] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-15 13:48:41","refreshTokenExpire":"2025-11-28 13:48:41","access_token":"898b59246d1e4de4a3fe73cc431bce12","refresh_token":"4dfe4b746e0f46f297741315ebff74d1"}}
INFO     - 2025-11-14 13:48:41 - [conftest:137] - UAT登录成功（第1次尝试）
INFO     - 2025-11-14 13:48:41 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:41 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: access_token = 898b59246d1e4de4a3fe73cc431bce12
DEBUG    - 2025-11-14 13:48:41 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/cloudTrader/cloudOrderSend HTTP/11" 200 None
INFO     - 2025-11-14 13:48:41 - [api_base:152] - [2025-11-14 13:48:41] POST请求（JSON）: /mascontrol/cloudTrader/cloudOrderSend 
数据: {'id': 464, 'type': 0, 'tradeType': 1, 'intervalTime': 0, 'cloudTraderId': [5860], 'symbol': 'XAUUSD', 'startSize': 11.0, 'endSize': 11.0, 'totalNum': '1', 'totalSzie': '', 'remark': 'zdh539319'}
INFO     - 2025-11-14 13:48:41 - [api_base:160] - [2025-11-14 13:48:41] 请求后等待 1 秒
INFO     - 2025-11-14 13:48:42 - [conftest:170] - [2025-11-14 13:48:42] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend2::test_copy_place_order 执行完毕
INFO     - 2025-11-14 13:48:42 - [api_base:537] - [2025-11-14 13:48:42] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     - 2025-11-14 13:48:42 - [api_base:447] - [2025-11-14 13:48:42] 执行SQL: 

                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.comment,
                            fod.symbol,
                            fod.order_no,
                            fod.remark,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE fod.account = %s
                            AND fod.trader_id = %s
                     AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('31581', 11297, '2025-11-14 13:45:42', '2025-11-14 13:51:42')
INFO     - 2025-11-14 13:48:42 - [api_base:450] - [2025-11-14 13:48:42] 查询成功，结果数量: 3
INFO     - 2025-11-14 13:48:42 - [api_base:462] - [2025-11-14 13:48:42] 查询结果: [{"size": 11.0, "send_no": "5993640571710", "magical": null, "open_price": null, "comment": "zdh539319", "symbol": "XAUUSD", "order_no": null, "remark": "超过最大手数限制", "true_total_lots": 11.0, "foi.order_no": "5993640571710", "operation_type": 0, "create_time": "2025-11-14 13:48:42", "status": 2, "min_lot_size": 11.0, "max_lot_size": 11.0, "total_lots": 0.0, "total_orders": 1}, {"size": 11.0, "send_no": "9665969877508", "magical": null, "open_price": null, "comment": "", "symbol": "XAUUSD", "order_
INFO     - 2025-11-14 13:48:45 - [api_base:447] - [2025-11-14 13:48:45] 执行SQL: 

                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.comment,
                            fod.symbol,
                            fod.order_no,
                            fod.remark,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE fod.account = %s
                            AND fod.trader_id = %s
                     AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('31581', 11297, '2025-11-14 13:45:42', '2025-11-14 13:51:42')
INFO     - 2025-11-14 13:48:45 - [api_base:450] - [2025-11-14 13:48:45] 查询成功，结果数量: 3
INFO     - 2025-11-14 13:48:45 - [api_base:462] - [2025-11-14 13:48:45] 查询结果: [{"size": 11.0, "send_no": "5993640571710", "magical": null, "open_price": null, "comment": "zdh539319", "symbol": "XAUUSD", "order_no": null, "remark": "超过最大手数限制", "true_total_lots": 11.0, "foi.order_no": "5993640571710", "operation_type": 0, "create_time": "2025-11-14 13:48:42", "status": 2, "min_lot_size": 11.0, "max_lot_size": 11.0, "total_lots": 0.0, "total_orders": 1}, {"size": 11.0, "send_no": "9665969877508", "magical": null, "open_price": null, "comment": "", "symbol": "XAUUSD", "order_
INFO     - 2025-11-14 13:48:47 - [api_base:447] - [2025-11-14 13:48:47] 执行SQL: 

                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.comment,
                            fod.symbol,
                            fod.order_no,
                            fod.remark,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE fod.account = %s
                            AND fod.trader_id = %s
                     AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('31581', 11297, '2025-11-14 13:45:42', '2025-11-14 13:51:42')
INFO     - 2025-11-14 13:48:47 - [api_base:450] - [2025-11-14 13:48:47] 查询成功，结果数量: 3
INFO     - 2025-11-14 13:48:47 - [api_base:462] - [2025-11-14 13:48:47] 查询结果: [{"size": 11.0, "send_no": "5993640571710", "magical": null, "open_price": null, "comment": "zdh539319", "symbol": "XAUUSD", "order_no": null, "remark": "超过最大手数限制", "true_total_lots": 11.0, "foi.order_no": "5993640571710", "operation_type": 0, "create_time": "2025-11-14 13:48:42", "status": 2, "min_lot_size": 11.0, "max_lot_size": 11.0, "total_lots": 0.0, "total_orders": 1}, {"size": 11.0, "send_no": "9665969877508", "magical": null, "open_price": null, "comment": "", "symbol": "XAUUSD", "order_
INFO     - 2025-11-14 13:48:47 - [api_base:578] - [2025-11-14 13:48:47] 数据已稳定2秒（耗时4.4秒）| 结果数: 3
INFO     - 2025-11-14 13:48:47 - [api_base:1488] - 校验通过: 开仓失败信息符合预期

实际: 超过最大手数限制
操作: ==
预期: 超过最大手数限制

INFO     - 2025-11-14 13:48:47 - [test_cloudOrder_error:355] - 失败信息验证通过: 超过最大手数限制
INFO     - 2025-11-14 13:48:47 - [conftest:65] - [2025-11-14 13:48:47] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestMasOrderSend3::test_copy_place_order 开始登录，环境: uat
INFO     - 2025-11-14 13:48:47 - [conftest:108] - UAT登录尝试 1/5，MFA验证码: 137571
DEBUG    - 2025-11-14 13:48:47 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-14 13:48:49 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-14 13:48:49 - [conftest:127] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-15 13:48:48","refreshTokenExpire":"2025-11-28 13:48:48","access_token":"86d08e5b94b240d785ffb3126c24ca3a","refresh_token":"23ddd9f907584b5f9fd5f24d85b858eb"}}
INFO     - 2025-11-14 13:48:49 - [conftest:137] - UAT登录成功（第1次尝试）
INFO     - 2025-11-14 13:48:49 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:49 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: access_token = 86d08e5b94b240d785ffb3126c24ca3a
DEBUG    - 2025-11-14 13:48:49 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/cloudTrader/cloudOrderSend HTTP/11" 200 None
INFO     - 2025-11-14 13:48:49 - [api_base:152] - [2025-11-14 13:48:49] POST请求（JSON）: /mascontrol/cloudTrader/cloudOrderSend 
数据: {'id': 464, 'type': 0, 'tradeType': 0, 'intervalTime': 100, 'cloudTraderId': [5860], 'symbol': 'XAUUSD', 'placedType': 0, 'startSize': '0.1', 'endSize': '1.00', 'totalNum': '', 'totalSzie': '0.01', 'remark': '测试数据'}
INFO     - 2025-11-14 13:48:49 - [api_base:160] - [2025-11-14 13:48:49] 请求后等待 1 秒
INFO     - 2025-11-14 13:48:50 - [conftest:170] - [2025-11-14 13:48:50] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestMasOrderSend3::test_copy_place_order 执行完毕
INFO     - 2025-11-14 13:48:50 - [conftest:65] - [2025-11-14 13:48:50] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestMasOrderSend4::test_copy_place_order 开始登录，环境: uat
INFO     - 2025-11-14 13:48:50 - [conftest:108] - UAT登录尝试 1/5，MFA验证码: 137571
DEBUG    - 2025-11-14 13:48:50 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-14 13:48:51 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-14 13:48:51 - [conftest:127] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-15 13:48:51","refreshTokenExpire":"2025-11-28 13:48:51","access_token":"22d4d62f33d74bdb8131eded2bd7cf52","refresh_token":"20fc1df615e140ca9082487bc65aa491"}}
INFO     - 2025-11-14 13:48:51 - [conftest:137] - UAT登录成功（第1次尝试）
INFO     - 2025-11-14 13:48:51 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:51 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: access_token = 22d4d62f33d74bdb8131eded2bd7cf52
DEBUG    - 2025-11-14 13:48:52 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/cloudTrader/cloudOrderSend HTTP/11" 200 None
INFO     - 2025-11-14 13:48:52 - [api_base:152] - [2025-11-14 13:48:52] POST请求（JSON）: /mascontrol/cloudTrader/cloudOrderSend 
数据: {'id': 464, 'type': 0, 'tradeType': 0, 'intervalTime': 100, 'cloudTraderId': [5860], 'symbol': 'XAUUSD', 'placedType': 0, 'startSize': '0.1', 'endSize': '1.00', 'totalNum': '', 'totalSzie': '2', 'remark': '测试数据'}
INFO     - 2025-11-14 13:48:52 - [api_base:160] - [2025-11-14 13:48:52] 请求后等待 1 秒
INFO     - 2025-11-14 13:48:53 - [conftest:170] - [2025-11-14 13:48:53] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestMasOrderSend4::test_copy_place_order 执行完毕
INFO     - 2025-11-14 13:48:53 - [api_base:447] - [2025-11-14 13:48:53] 执行SQL: 
 SELECT * From follow_platform where server = %s  ORDER BY create_time DESC 
参数: ('FXAdamantStone-Real',)
INFO     - 2025-11-14 13:48:53 - [api_base:450] - [2025-11-14 13:48:53] 查询成功，结果数量: 1
INFO     - 2025-11-14 13:48:53 - [api_base:462] - [2025-11-14 13:48:53] 查询结果: [{"id": 346, "broker_name": "AS", "platform_type": 0, "server": "FXAdamantStone-Real", "server_node": "47.238.99.66:443", "remark": "BELLA", "version": 0, "deleted": 0, "creator": 10000, "create_time": "2024-12-02 21:49:36", "updater": 10101, "update_time": "2025-11-11 17:31:10", "logo": null, "max_lots": null, "suffix_enabled": 1, "suffix_forex": null, "suffix_cfd": null}]
INFO     - 2025-11-14 13:48:53 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:53 - [variable_manager:103] - [2025-11-14 13:48] 运行时变量已覆盖（空值）: max_lots = None
INFO     - 2025-11-14 13:48:53 - [test_cloudOrder_error:485] - 服务器FXAdamantStone-Real无最大手数数据，已保存空值
INFO     - 2025-11-14 13:48:53 - [api_base:447] - [2025-11-14 13:48:53] 执行SQL: 
 SELECT * From sys_params where param_name= %s  ORDER BY create_time DESC 
参数: ('最大手数配置',)
INFO     - 2025-11-14 13:48:53 - [api_base:450] - [2025-11-14 13:48:53] 查询成功，结果数量: 1
INFO     - 2025-11-14 13:48:53 - [api_base:462] - [2025-11-14 13:48:53] 查询结果: [{"id": 3, "param_name": "最大手数配置", "param_type": 1, "param_key": "max_lots", "param_value": "10", "remark": "最大手数配置", "tenant_id": 10000, "version": 3, "deleted": 0, "creator": 10000, "create_time": "2025-01-21 17:03:45", "updater": 10000, "update_time": "2025-01-23 22:53:50"}]
INFO     - 2025-11-14 13:48:53 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:53 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: param_value = 10
INFO     - 2025-11-14 13:48:53 - [test_cloudOrder_error:510] - 全局配置的最大手数是：10
INFO     - 2025-11-14 13:48:53 - [api_base:447] - [2025-11-14 13:48:53] 执行SQL: 
 SELECT * From follow_platform where server = %s  ORDER BY create_time DESC 
参数: ('CWGMarketsSVG-Demo',)
INFO     - 2025-11-14 13:48:53 - [api_base:450] - [2025-11-14 13:48:53] 查询成功，结果数量: 1
INFO     - 2025-11-14 13:48:53 - [api_base:462] - [2025-11-14 13:48:53] 查询结果: [{"id": 2165, "broker_name": "CWG", "platform_type": 1, "server": "CWGMarketsSVG-Demo", "server_node": "47.91.76.126:443", "remark": null, "version": 0, "deleted": 0, "creator": 10093, "create_time": "2025-10-23 11:28:24", "updater": 10101, "update_time": "2025-11-14 11:33:24", "logo": null, "max_lots": 9.0, "suffix_enabled": 1, "suffix_forex": ".minx", "suffix_cfd": ".min"}]
INFO     - 2025-11-14 13:48:53 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:53 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: MT5max_lots = 9.0
INFO     - 2025-11-14 13:48:53 - [test_cloudOrder_error:533] - 服务器CWGMarketsSVG-Demo的最大手数是：9.0
INFO     - 2025-11-14 13:48:53 - [conftest:65] - [2025-11-14 13:48:53] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend5::test_trader_orderSend 开始登录，环境: uat
INFO     - 2025-11-14 13:48:53 - [conftest:108] - UAT登录尝试 1/5，MFA验证码: 137571
DEBUG    - 2025-11-14 13:48:53 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-14 13:48:54 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-14 13:48:55 - [conftest:127] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-15 13:48:54","refreshTokenExpire":"2025-11-28 13:48:54","access_token":"b01cfc463dd64c61a2190cb9a6db1134","refresh_token":"63a42e3947f04730be4c02a1c0782ef1"}}
INFO     - 2025-11-14 13:48:55 - [conftest:137] - UAT登录成功（第1次尝试）
INFO     - 2025-11-14 13:48:55 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:55 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: access_token = b01cfc463dd64c61a2190cb9a6db1134
INFO     - 2025-11-14 13:48:55 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:48:55 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: send_maxlots = 10.0
DEBUG    - 2025-11-14 13:48:56 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/cloudTrader/cloudOrderSend HTTP/11" 200 None
INFO     - 2025-11-14 13:48:56 - [api_base:152] - [2025-11-14 13:48:56] POST请求（JSON）: /mascontrol/cloudTrader/cloudOrderSend 
数据: {'id': 464, 'type': 0, 'tradeType': 1, 'intervalTime': 100, 'cloudTraderId': [5860], 'symbol': 'XAUUSD', 'placedType': 0, 'startSize': 10.0, 'endSize': 10.0, 'totalNum': '1', 'totalSzie': '', 'remark': 'zdh6t9333'}
INFO     - 2025-11-14 13:48:56 - [api_base:160] - [2025-11-14 13:48:56] 请求后等待 1 秒
INFO     - 2025-11-14 13:48:57 - [conftest:170] - [2025-11-14 13:48:57] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend5::test_trader_orderSend 执行完毕
INFO     - 2025-11-14 13:48:57 - [api_base:537] - [2025-11-14 13:48:57] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     - 2025-11-14 13:48:57 - [api_base:447] - [2025-11-14 13:48:57] 执行SQL: 

                           SELECT
                               fod.size,
                               fod.comment,
                               fod.send_no,
                               fod.magical,
                               fod.open_price,
                               fod.remark,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.total_orders
                           FROM
                               follow_order_detail fod
                           INNER JOIN
                               follow_order_instruct foi
                           ON
                               foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                           WHERE fod.account = %s
                               AND fod.trader_id = %s
                                AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('66938908', 11306, '2025-11-14 13:45:57', '2025-11-14 13:51:57')
INFO     - 2025-11-14 13:48:57 - [api_base:450] - [2025-11-14 13:48:57] 查询成功，结果数量: 2
INFO     - 2025-11-14 13:48:57 - [api_base:462] - [2025-11-14 13:48:57] 查询结果: [{"size": 10.0, "comment": null, "send_no": "5463962887993", "magical": null, "open_price": null, "remark": "超过最大手数限制", "symbol": "XAUUSDp", "order_no": null, "true_total_lots": 20.0, "foi.order_no": "5463962887993", "operation_type": 0, "create_time": "2025-11-14 13:48:57", "status": 0, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 10.0, "total_orders": 2}, {"size": 10.0, "comment": null, "send_no": "7966827859047", "magical": null, "open_price": null, "remark": "超过最大手数限制", "symbol": 
INFO     - 2025-11-14 13:48:59 - [api_base:447] - [2025-11-14 13:48:59] 执行SQL: 

                           SELECT
                               fod.size,
                               fod.comment,
                               fod.send_no,
                               fod.magical,
                               fod.open_price,
                               fod.remark,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.total_orders
                           FROM
                               follow_order_detail fod
                           INNER JOIN
                               follow_order_instruct foi
                           ON
                               foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                           WHERE fod.account = %s
                               AND fod.trader_id = %s
                                AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('66938908', 11306, '2025-11-14 13:45:57', '2025-11-14 13:51:57')
INFO     - 2025-11-14 13:48:59 - [api_base:450] - [2025-11-14 13:48:59] 查询成功，结果数量: 2
INFO     - 2025-11-14 13:48:59 - [api_base:462] - [2025-11-14 13:48:59] 查询结果: [{"size": 10.0, "comment": null, "send_no": "5463962887993", "magical": null, "open_price": null, "remark": "超过最大手数限制", "symbol": "XAUUSDp", "order_no": null, "true_total_lots": 20.0, "foi.order_no": "5463962887993", "operation_type": 0, "create_time": "2025-11-14 13:48:57", "status": 0, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 10.0, "total_orders": 2}, {"size": 10.0, "comment": null, "send_no": "7966827859047", "magical": null, "open_price": null, "remark": "超过最大手数限制", "symbol": 
INFO     - 2025-11-14 13:49:01 - [api_base:447] - [2025-11-14 13:49:01] 执行SQL: 

                           SELECT
                               fod.size,
                               fod.comment,
                               fod.send_no,
                               fod.magical,
                               fod.open_price,
                               fod.remark,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.total_orders
                           FROM
                               follow_order_detail fod
                           INNER JOIN
                               follow_order_instruct foi
                           ON
                               foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                           WHERE fod.account = %s
                               AND fod.trader_id = %s
                                AND  foi.create_time BETWEEN %s AND %s  ORDER BY create_time DESC 
参数: ('66938908', 11306, '2025-11-14 13:45:57', '2025-11-14 13:51:57')
INFO     - 2025-11-14 13:49:01 - [api_base:450] - [2025-11-14 13:49:01] 查询成功，结果数量: 2
INFO     - 2025-11-14 13:49:01 - [api_base:462] - [2025-11-14 13:49:01] 查询结果: [{"size": 10.0, "comment": null, "send_no": "5463962887993", "magical": null, "open_price": null, "remark": "超过最大手数限制", "symbol": "XAUUSDp", "order_no": null, "true_total_lots": 20.0, "foi.order_no": "5463962887993", "operation_type": 0, "create_time": "2025-11-14 13:48:57", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 10.0, "total_orders": 2}, {"size": 10.0, "comment": null, "send_no": "7966827859047", "magical": null, "open_price": null, "remark": "超过最大手数限制", "symbol": 
INFO     - 2025-11-14 13:49:01 - [api_base:578] - [2025-11-14 13:49:01] 数据已稳定2秒（耗时4.3秒）| 结果数: 2
INFO     - 2025-11-14 13:49:01 - [api_base:1488] - 校验通过: 开仓失败信息符合预期

实际: 超过最大手数限制
操作: ==
预期: 超过最大手数限制

INFO     - 2025-11-14 13:49:01 - [test_cloudOrder_error:673] - 失败信息验证通过: 超过最大手数限制
INFO     - 2025-11-14 13:49:01 - [conftest:65] - [2025-11-14 13:49:01] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend5::test_copy_close_order 开始登录，环境: uat
INFO     - 2025-11-14 13:49:01 - [conftest:108] - UAT登录尝试 1/5，MFA验证码: 940092
DEBUG    - 2025-11-14 13:49:01 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-14 13:49:04 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-14 13:49:04 - [conftest:127] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-15 13:49:04","refreshTokenExpire":"2025-11-28 13:49:04","access_token":"117ec89fdd5b417da1c5f72b287359b5","refresh_token":"3cd001f8b97542c9a26bbd4e9874c73d"}}
INFO     - 2025-11-14 13:49:04 - [conftest:137] - UAT登录成功（第1次尝试）
INFO     - 2025-11-14 13:49:04 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:49:04 - [variable_manager:105] - [2025-11-14 13:48] 运行时变量已设置: access_token = 117ec89fdd5b417da1c5f72b287359b5
DEBUG    - 2025-11-14 13:49:04 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/cloudTrader/cloudOrderClose HTTP/11" 200 None
INFO     - 2025-11-14 13:49:04 - [api_base:152] - [2025-11-14 13:49:04] POST请求（JSON）: /mascontrol/cloudTrader/cloudOrderClose 
数据: {'isCloseAll': 1, 'intervalTime': 100, 'id': '464', 'cloudTraderId': [5860]}
INFO     - 2025-11-14 13:49:04 - [api_base:160] - [2025-11-14 13:49:04] 请求后等待 1 秒
INFO     - 2025-11-14 13:49:05 - [conftest:170] - [2025-11-14 13:49:05] 用例 test_cloudTrader/test_cloudOrder_error.py::TestVPSOrdersendbuy::TestVPSOrderSend5::test_copy_close_order 执行完毕
INFO     - 2025-11-14 13:49:05 - [variable_manager:121] - [2025-11-14 13:48] 运行时变量已保存到: D:\pycharm_test\lingkuan_1114\VAR\runtime_vars_cloud.json
INFO     - 2025-11-14 13:49:05 - [conftest:368] - [2025-11-14 13:48] 测试会话结束，总耗时: 35.00秒
INFO     - 2025-11-14 13:49:05 - [feishu_notification:149] - [2025-11-14 13:48] 发送飞书消息，URL: https://open.feishu.cn/open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f
DEBUG    - 2025-11-14 13:49:05 - [connectionpool:1051] - Starting new HTTPS connection (1): open.feishu.cn:443
DEBUG    - 2025-11-14 13:49:06 - [connectionpool:546] - https://open.feishu.cn:443 "POST /open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f HTTP/11" 200 77
INFO     - 2025-11-14 13:49:06 - [feishu_notification:157] - [2025-11-14 13:48] 飞书响应状态码: 200
INFO     - 2025-11-14 13:49:06 - [feishu_notification:158] - [2025-11-14 13:48] 飞书响应内容: {"StatusCode":0,"StatusMessage":"success","code":0,"data":{},"msg":"success"}
INFO     - 2025-11-14 13:49:06 - [feishu_notification:163] - [2025-11-14 13:48] [FEISHU] 消息发送成功
INFO     - 2025-11-14 13:49:06 - [conftest:380] - [2025-11-14 13:48] 飞书通知发送成功
