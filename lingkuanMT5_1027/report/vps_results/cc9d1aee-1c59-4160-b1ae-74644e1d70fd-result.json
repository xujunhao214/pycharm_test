{"name": "数据库校验-策略开仓-主指令及订单详情数据检查", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（45秒）", "trace": "self = <lingkuanMT5_1027.test_vps.test_vps_ordersendbuy.TestVPSOrdersendbuy.TestVPSOrderSend6 object at 0x00000275EAB6BF40>\nclass_random_str = '64uv9103'\nvar_manager = <lingkuanMT5_1027.commons.variable_manager.VariableManager object at 0x00000275EAB918E0>\ndb_transaction = <pymysql.connections.Connection object at 0x00000275EACFB700>\n\n    @pytest.mark.flaky(reruns=0, reruns_delay=0)\n    @allure.title(\"数据库校验-策略开仓-主指令及订单详情数据检查\")\n    def test_dbquery_orderSend(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"1. 获取订单详情表账号数据\"):\n            new_user = var_manager.get_variable(\"new_user\")\n            sql = f\"\"\"\n                SELECT\n                    fod.size,\n                    fod.send_no,\n                    fod.magical,\n                    fod.open_price,\n                    fod.symbol,\n                    fod.order_no,\n                    fod.comment,\n                    foi.true_total_lots,\n                    foi.order_no,\n                    foi.operation_type,\n                    foi.create_time,\n                    foi.status,\n                    foi.min_lot_size,\n                    foi.max_lot_size,\n                    foi.total_lots,\n                    foi.total_orders\n                FROM\n                    follow_order_detail fod\n                INNER JOIN\n                    follow_order_instruct foi\n                ON\n                    foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci\n                WHERE foi.operation_type = %s\n                    AND fod.account = %s\n                    AND fod.comment = %s\n                    \"\"\"\n            params = (\n                '0',\n                new_user[\"account\"],\n                class_random_str\n            )\n    \n            # 调用轮询等待方法（带时间范围过滤）\n>           db_data = self.query_database_with_time_with_timezone(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"fod.open_time\"\n            )\n\ntest_vps\\test_vps_ordersendbuy.py:2445: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuanMT5_1027.test_vps.test_vps_ordersendbuy.TestVPSOrdersendbuy.TestVPSOrderSend6 object at 0x00000275EAB6BF40>\ndb_transaction = <pymysql.connections.Connection object at 0x00000275EACFB700>\nsql = '\\n                    SELECT \\n                        fod.size,\\n                        fod.send_no,\\n             ...\\n                        AND fod.account = %s\\n                        AND fod.comment = %s\\n                        '\nparams = ('0', '66938911', '64uv9103'), time_field = 'fod.open_time'\ntime_range = 3, order_by = 'create_time DESC', timeout = 45, poll_interval = 2\nstable_period = 2, timezone_offset = 6, attach_to_allure = True\n\n    def query_database_with_time_with_timezone(\n            self,\n            db_transaction: pymysql.connections.Connection,\n            sql: str,\n            params: tuple = (),\n            time_field: Optional[str] = None,\n            time_range: int = MYSQL_TIME,\n            order_by: str = \"create_time DESC\",\n            timeout: int = WAIT_TIMEOUT,\n            poll_interval: int = POLL_INTERVAL,\n            stable_period: int = STBLE_PERIOD,\n            timezone_offset: int = TIMEZONE_OFFSET,\n            attach_to_allure: bool = True\n    ) -> List[Dict[str, Any]]:\n        \"\"\"带时区转换的轮询查询（带Allure分层提示）\"\"\"\n        offset_str = f\"{timezone_offset:+03d}:00\"  # 转换为时区字符串（如+08:00）\n        start_time = time.time()\n        last_result = None\n        stable_start_time = None\n        final_result = None\n    \n        # 生成固定时间范围（轮询开始时计算一次）\n        poll_start_datetime = datetime.datetime.now()\n        fixed_time_start = (poll_start_datetime - datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n        fixed_time_end = (poll_start_datetime + datetime.timedelta(minutes=time_range)).strftime(\n            \"%Y-%m-%d %H:%M:%S\")\n    \n        logger.info(f\"[{self._get_current_time()}] 开始轮询（时区{offset_str}）\\n超时: {timeout}秒\")\n    \n        with allure.step(f\"轮询等待数据稳定（时区{offset_str}，超时{timeout}秒）\"):\n            while time.time() - start_time < timeout:\n                try:\n                    db_transaction.commit()\n                    # 执行带时区转换的单次查询\n                    result = self._execute_query_with_timezone(\n                        db_transaction=db_transaction,\n                        sql=sql,\n                        params=params,\n                        time_field=time_field,\n                        order_by=order_by,\n                        fixed_time_start=fixed_time_start,  # 传递固定时间参数\n                        fixed_time_end=fixed_time_end,\n                        timezone_offset=offset_str,\n                        attach_to_allure=False\n                    )\n    \n                    # 记录轮询状态\n                    elapsed = time.time() - start_time\n                    with allure.step(f\"轮询中（已等待{elapsed:.1f}秒）\"):\n                        allure.attach(f\"结果数量: {len(result)}\", \"当前状态\", allure.attachment_type.TEXT)\n                        allure.attach(f\"剩余时间: {timeout - elapsed:.1f}秒\", \"超时倒计时\", allure.attachment_type.TEXT)\n    \n                    # 复用数据稳定判断逻辑\n                    if len(result) > 0 and self._is_result_stable(result, last_result):\n                        if stable_start_time is None:\n                            stable_start_time = time.time()\n                            with allure.step(\"数据首次稳定\"):\n                                allure.attach(f\"开始稳定期计时（需保持{stable_period}秒）\", \"状态说明\",\n                                              allure.attachment_type.TEXT)\n                        elif time.time() - stable_start_time >= stable_period:\n                            final_result = result\n                            logger.info(f\"[{self._get_current_time()}] 数据稳定，轮询结束\")\n                            with allure.step(\"数据稳定达标\"):\n                                allure.attach(f\"已稳定{stable_period}秒（总耗时{time.time() - start_time:.1f}秒）\",\n                                              \"结果说明\", allure.attachment_type.TEXT)\n                            break\n                    else:\n                        stable_start_time = None\n                        with allure.step(\"数据发生变化\"):\n                            allure.attach(\"重置稳定期计时器\", \"状态说明\", allure.attachment_type.TEXT)\n    \n                    last_result = result\n                    time.sleep(poll_interval)\n    \n                except Exception as e:\n                    with allure.step(\"时区查询轮询异常\"):\n                        allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                        allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                        allure.attach(str(e), \"错误详情\", allure.attachment_type.TEXT)\n                    logger.warning(f\"[{self._get_current_time()}] 轮询异常: {str(e)} \\n继续等待\")\n                    time.sleep(poll_interval)\n    \n            # 超时处理\n            if final_result is None:\n                with allure.step(\"时区查询轮询超时\"):\n                    allure.attach(f\"超过{timeout}秒未达到稳定状态，获取最终结果\", \"处理说明\",\n                                  allure.attachment_type.TEXT)\n                final_result = self._execute_query_with_timezone(\n                    db_transaction=db_transaction,\n                    sql=sql,\n                    params=params,\n                    time_field=time_field,\n                    order_by=order_by,\n                    fixed_time_start=fixed_time_start,\n                    fixed_time_end=fixed_time_end,\n                    timezone_offset=offset_str,\n                    attach_to_allure=True\n                )\n    \n            # 附加结果到报告\n            if final_result and attach_to_allure:\n                with allure.step(\"带时区查询最终结果\"):\n                    allure.attach(self.serialize_data(final_result[:50]), \"结果预览\", allure.attachment_type.JSON)\n                    allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                    allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                    allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n                    allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                  allure.attachment_type.TEXT)\n    \n            if not final_result:\n                with allure.step(\"时区查询无结果\"):\n                    allure.attach(f\"轮询{timeout}秒后仍无查询结果\", \"异常详情\", allure.attachment_type.TEXT)\n                    allure.attach(sql, \"执行SQL\", allure.attachment_type.TEXT)\n                    allure.attach(str(params), \"SQL参数\", allure.attachment_type.TEXT)\n                    allure.attach(f\"{timezone_offset}\", \"时区偏移量（小时）\", allure.attachment_type.TEXT)\n                    allure.attach(f\"固定时间范围: {fixed_time_start} ~ {fixed_time_end}\", \"查询时间窗口\",\n                                  allure.attachment_type.TEXT)\n>               raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\nE               TimeoutError: Failed: 时区查询超时（45秒）\n\ncommons\\api_base.py:1116: TimeoutError"}, "description": "\n    ### 测试说明\n    - 场景校验：手数范围>总手数>订单数量\n    - 前置条件：有vps策略和vps跟单\n      1. 进行开仓，手数范围0.6-1，总手数1\n      2. 校验手数范围限制是否生效，只有一个订单，订单手数大于等于0.6\n      3. 进行平仓\n      4. 校验账号的数据是否正确\n    - 预期结果：账号的数据正确，权重正确\n    ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（45秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1027\\test_vps\\test_vps_ordersendbuy.py\", line 2445, in test_dbquery_orderSend\n    db_data = self.query_database_with_time_with_timezone(\n  File \"D:\\pycharm_test\\lingkuanMT5_1027\\commons\\api_base.py\", line 1116, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "轮询等待数据稳定（时区+06:00，超时45秒）", "status": "broken", "statusDetails": {"message": "TimeoutError: Failed: 时区查询超时（45秒）\n", "trace": "  File \"D:\\pycharm_test\\lingkuanMT5_1027\\commons\\api_base.py\", line 1116, in query_database_with_time_with_timezone\n    raise TimeoutError(f\"Failed: 时区查询超时（{timeout}秒）\")\n"}, "steps": [{"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409107075, "stop": 1762409107125}], "attachments": [{"name": "时区处理", "source": "069c3b8b-2aa6-4a6c-a3c3-74b4af8fa7ea-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "eb5f7bd0-f4f4-49a7-83cd-bac4d417d58e-attachment.txt", "type": "text/plain"}], "start": 1762409107074, "stop": 1762409107125}, {"name": "轮询中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "dac70cc7-95a9-41a7-a225-ea4f27e2e611-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d358a2df-bc4e-4001-b4cb-4331a768674f-attachment.txt", "type": "text/plain"}], "start": 1762409107125, "stop": 1762409107126}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "9df982e5-c8e6-427e-addc-d7b234cf7017-attachment.txt", "type": "text/plain"}], "start": 1762409107126, "stop": 1762409107126}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409109179, "stop": 1762409109235}], "attachments": [{"name": "时区处理", "source": "7ab5277d-af72-4d7c-9c19-1ef23d6029eb-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "db155ab3-4c2e-49c1-8be5-c2f3054bb805-attachment.txt", "type": "text/plain"}], "start": 1762409109178, "stop": 1762409109235}, {"name": "轮询中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "56ae0de5-09be-4d3f-900c-e0d6d692733b-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e7de0372-e029-4e1e-b9ce-5fc586a8e74f-attachment.txt", "type": "text/plain"}], "start": 1762409109235, "stop": 1762409109236}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "61f603a8-71f7-43ad-8e39-478c35a6729d-attachment.txt", "type": "text/plain"}], "start": 1762409109236, "stop": 1762409109236}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409111295, "stop": 1762409111345}], "attachments": [{"name": "时区处理", "source": "a68717ac-acc6-430b-8219-cbcedc085465-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "bf9a150f-b642-46c4-b288-74eb237b0411-attachment.txt", "type": "text/plain"}], "start": 1762409111294, "stop": 1762409111345}, {"name": "轮询中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "dbcc5c16-b9ba-4074-8148-e17d85422cef-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ad95e442-01c3-459b-930b-89e705d7a81c-attachment.txt", "type": "text/plain"}], "start": 1762409111345, "stop": 1762409111346}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "033d73eb-7310-44f5-8600-089f56141c5b-attachment.txt", "type": "text/plain"}], "start": 1762409111346, "stop": 1762409111347}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409113405, "stop": 1762409113457}], "attachments": [{"name": "时区处理", "source": "96cf178d-30ea-4494-bf00-0be299aa13c8-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "5626a410-9f42-4778-afa9-535f5ae018f4-attachment.txt", "type": "text/plain"}], "start": 1762409113404, "stop": 1762409113457}, {"name": "轮询中（已等待6.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "a556db8a-3653-435a-8166-b951a06fcbb6-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "7364070f-ba47-4990-98c0-c3231ebaad15-attachment.txt", "type": "text/plain"}], "start": 1762409113457, "stop": 1762409113458}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "adbc3d7b-46c4-4add-b5b0-026eeee2c87c-attachment.txt", "type": "text/plain"}], "start": 1762409113458, "stop": 1762409113459}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409115512, "stop": 1762409115574}], "attachments": [{"name": "时区处理", "source": "194f396e-bc75-47c1-adae-7ed92ed73ead-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "0a7b8cb2-1a64-45cf-a7dc-8bb03df53f8c-attachment.txt", "type": "text/plain"}], "start": 1762409115511, "stop": 1762409115574}, {"name": "轮询中（已等待8.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "662d764b-1747-41ea-812e-a3e2042cd853-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "199c1913-88aa-4f48-afed-8e7803b6188a-attachment.txt", "type": "text/plain"}], "start": 1762409115574, "stop": 1762409115575}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "747780a9-1993-4acf-8d49-52258ff238cb-attachment.txt", "type": "text/plain"}], "start": 1762409115575, "stop": 1762409115576}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409117633, "stop": 1762409117685}], "attachments": [{"name": "时区处理", "source": "bdde79c5-43cb-40f9-a369-cf0f94952518-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "6ee7a3b7-ae44-45c9-a1d8-9b99a4e4aee5-attachment.txt", "type": "text/plain"}], "start": 1762409117632, "stop": 1762409117685}, {"name": "轮询中（已等待10.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "cc52d63a-4561-40d8-98b1-be8c787dda09-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1d0ae901-5707-4cca-820e-377a8ba77a21-attachment.txt", "type": "text/plain"}], "start": 1762409117685, "stop": 1762409117687}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "2a8f4fdb-73ad-4129-974a-eb2ec68ee20b-attachment.txt", "type": "text/plain"}], "start": 1762409117687, "stop": 1762409117687}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409119743, "stop": 1762409119838}], "attachments": [{"name": "时区处理", "source": "51c9e11a-5f05-4a55-a4af-bd3c36e62969-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "07137257-b1a4-4fd7-8261-8e4c255217b4-attachment.txt", "type": "text/plain"}], "start": 1762409119742, "stop": 1762409119838}, {"name": "轮询中（已等待12.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "e4eec76e-cf39-476e-a222-c5b00a80b085-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2bc57e07-f2b0-4d97-8543-b19c0e1fdd51-attachment.txt", "type": "text/plain"}], "start": 1762409119838, "stop": 1762409119839}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "b419190f-6bf2-4eb8-bbcc-aaf690a43e96-attachment.txt", "type": "text/plain"}], "start": 1762409119839, "stop": 1762409119839}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409122153, "stop": 1762409122210}], "attachments": [{"name": "时区处理", "source": "0b285071-6341-4225-a800-2f0be283d308-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "345c43e5-0a9f-4b88-85dc-2713a1fe635d-attachment.txt", "type": "text/plain"}], "start": 1762409122151, "stop": 1762409122210}, {"name": "轮询中（已等待15.2秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "19ea3d9c-8569-44c3-ba6c-ab36d9a63980-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "169adabf-5662-400e-bfbc-43873db3d9ae-attachment.txt", "type": "text/plain"}], "start": 1762409122210, "stop": 1762409122211}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "f300ce9a-07fd-4715-8aeb-ecd21988ce9f-attachment.txt", "type": "text/plain"}], "start": 1762409122211, "stop": 1762409122211}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409124267, "stop": 1762409124317}], "attachments": [{"name": "时区处理", "source": "5864cea4-4275-49dc-883d-59ed069c7f57-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "55577a29-feb7-4b57-b7ef-f8855fb6d1e4-attachment.txt", "type": "text/plain"}], "start": 1762409124266, "stop": 1762409124317}, {"name": "轮询中（已等待17.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "0d1a8c3a-b36f-485f-9060-836860ff1636-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "33b6ed19-2687-42e2-a3ab-d6cc438b645b-attachment.txt", "type": "text/plain"}], "start": 1762409124317, "stop": 1762409124318}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "ea80a6f9-b891-417f-9134-db32fc93a275-attachment.txt", "type": "text/plain"}], "start": 1762409124318, "stop": 1762409124319}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409126372, "stop": 1762409126422}], "attachments": [{"name": "时区处理", "source": "4bf3eb38-dcb7-420e-8032-1acfbde37616-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "8484b626-00b3-4fd8-94cb-905df75952d0-attachment.txt", "type": "text/plain"}], "start": 1762409126371, "stop": 1762409126422}, {"name": "轮询中（已等待19.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "b561835c-f5f9-4c60-9942-46ff686925ae-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1a428528-243d-4e87-a644-d66c701a0f43-attachment.txt", "type": "text/plain"}], "start": 1762409126422, "stop": 1762409126423}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "6c35dbbd-0e1e-4e6a-98f6-1f19d2cf23bd-attachment.txt", "type": "text/plain"}], "start": 1762409126423, "stop": 1762409126424}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409128490, "stop": 1762409128558}], "attachments": [{"name": "时区处理", "source": "846803c5-e77e-43bb-906d-c2d6b8551c24-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "4b122a51-09d9-4637-9b45-e6b4991ee611-attachment.txt", "type": "text/plain"}], "start": 1762409128490, "stop": 1762409128558}, {"name": "轮询中（已等待21.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "5cdaa46b-255f-46f6-af53-e7f91473c279-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2713c045-8f18-4945-9e2a-1cd6ee36179c-attachment.txt", "type": "text/plain"}], "start": 1762409128558, "stop": 1762409128559}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "eac21b32-2773-4767-9843-188a3c82f756-attachment.txt", "type": "text/plain"}], "start": 1762409128559, "stop": 1762409128559}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409130624, "stop": 1762409130675}], "attachments": [{"name": "时区处理", "source": "c81218d4-62d6-4771-b109-662963779425-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "3fd28854-7ce7-4050-b387-78963f052055-attachment.txt", "type": "text/plain"}], "start": 1762409130623, "stop": 1762409130675}, {"name": "轮询中（已等待23.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "31f1b65f-79ca-45ba-a7ec-2054b6dce26c-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "0be49aaa-4237-47c9-a498-40a148461e1c-attachment.txt", "type": "text/plain"}], "start": 1762409130675, "stop": 1762409130676}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "086314db-cb9a-49c3-904a-82e7427320c8-attachment.txt", "type": "text/plain"}], "start": 1762409130676, "stop": 1762409130677}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409132735, "stop": 1762409132788}], "attachments": [{"name": "时区处理", "source": "eb28eadd-041e-4dc8-83ee-293fc3b1520f-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "357948ca-b870-4300-bbc5-424ed98c6f40-attachment.txt", "type": "text/plain"}], "start": 1762409132734, "stop": 1762409132788}, {"name": "轮询中（已等待25.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "e8d79eee-7f60-4059-927b-d07aa19be39e-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d481d5b8-1f5b-4908-a19f-a6d48f2bed88-attachment.txt", "type": "text/plain"}], "start": 1762409132788, "stop": 1762409132789}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "ef50850f-ded7-44bd-85b7-a0083ccc96e2-attachment.txt", "type": "text/plain"}], "start": 1762409132789, "stop": 1762409132790}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409134852, "stop": 1762409134902}], "attachments": [{"name": "时区处理", "source": "6c6e97ad-45d3-43b9-a1be-a8bbff9fd7db-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "8252e538-edb8-483f-a138-0bbd781b8c5e-attachment.txt", "type": "text/plain"}], "start": 1762409134851, "stop": 1762409134902}, {"name": "轮询中（已等待27.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "1c769f2d-50ab-4e6d-9930-296a2c2b0ff8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "e97256d9-073f-4fbf-9bf9-cbd872f9dcf3-attachment.txt", "type": "text/plain"}], "start": 1762409134902, "stop": 1762409134903}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "08514609-a728-4204-bad9-215317e988ec-attachment.txt", "type": "text/plain"}], "start": 1762409134904, "stop": 1762409134904}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409137221, "stop": 1762409137276}], "attachments": [{"name": "时区处理", "source": "41deef4a-5a9d-4754-bf38-9d6b2157b5dc-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "617a43e8-1998-418b-a66b-69c59e12527b-attachment.txt", "type": "text/plain"}], "start": 1762409137220, "stop": 1762409137276}, {"name": "轮询中（已等待30.3秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "2c11748a-4ca9-4974-86f4-95291778eade-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "a9aa4cea-50f8-48c0-b40b-4e36e80388bb-attachment.txt", "type": "text/plain"}], "start": 1762409137276, "stop": 1762409137277}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "a7aa4b8f-6129-48a3-a055-4d0bd24dd048-attachment.txt", "type": "text/plain"}], "start": 1762409137277, "stop": 1762409137277}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409139338, "stop": 1762409139404}], "attachments": [{"name": "时区处理", "source": "184c62c2-d75f-4387-aeb1-9adebf7f2845-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "8ac6613b-5674-4128-9ac7-ac3ae39e6bc9-attachment.txt", "type": "text/plain"}], "start": 1762409139337, "stop": 1762409139404}, {"name": "轮询中（已等待32.4秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "2e0820d7-ca30-489e-8064-f4c98df0d420-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ccaedad1-5678-411e-b8bc-0615132beaee-attachment.txt", "type": "text/plain"}], "start": 1762409139404, "stop": 1762409139405}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "1ed011a7-5ca8-4004-a6e2-87ae2e1f6be2-attachment.txt", "type": "text/plain"}], "start": 1762409139405, "stop": 1762409139405}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409141463, "stop": 1762409141513}], "attachments": [{"name": "时区处理", "source": "d890c2b3-81cd-4d52-8785-0792c21a34e6-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "2dfb9b09-d0c0-463f-be47-18a01a0e4487-attachment.txt", "type": "text/plain"}], "start": 1762409141462, "stop": 1762409141513}, {"name": "轮询中（已等待34.5秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "7da75abe-9270-483f-8557-c6c02a48f28a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "89294847-cd3b-4060-a795-b4eac2dbdf27-attachment.txt", "type": "text/plain"}], "start": 1762409141513, "stop": 1762409141514}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "1dc43d54-6295-42d5-9ecd-2298bd65603c-attachment.txt", "type": "text/plain"}], "start": 1762409141514, "stop": 1762409141514}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409143565, "stop": 1762409143617}], "attachments": [{"name": "时区处理", "source": "d41a9a8b-63ce-4a71-9118-6d15c887bf2f-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "04143c5b-b536-4da6-87e4-862c3073ff5a-attachment.txt", "type": "text/plain"}], "start": 1762409143565, "stop": 1762409143617}, {"name": "轮询中（已等待36.6秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "845f1838-eb49-4c2e-ae7b-8c058dcad8c8-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "c53ca45e-8d8b-426d-8afa-6aa5920215a7-attachment.txt", "type": "text/plain"}], "start": 1762409143617, "stop": 1762409143618}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "cfc93691-49fc-45ec-bcb2-56649ecf9310-attachment.txt", "type": "text/plain"}], "start": 1762409143618, "stop": 1762409143619}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409145685, "stop": 1762409145740}], "attachments": [{"name": "时区处理", "source": "5916dbe5-8fa5-44b0-a5cd-82eb268780fa-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "9786cd12-73a5-4131-acb7-ce90091da3ef-attachment.txt", "type": "text/plain"}], "start": 1762409145682, "stop": 1762409145740}, {"name": "轮询中（已等待38.7秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "4e39daae-422f-44cb-9d61-fe577353007f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "3c914be2-a5f6-4f15-a946-b0ada273d832-attachment.txt", "type": "text/plain"}], "start": 1762409145740, "stop": 1762409145741}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "5f1969f1-e317-4c94-bf8e-80d7205213af-attachment.txt", "type": "text/plain"}], "start": 1762409145741, "stop": 1762409145741}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409147792, "stop": 1762409147847}], "attachments": [{"name": "时区处理", "source": "802846f5-2a3f-4c9b-802d-1d21fb21b61c-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "9ec9ed63-71b3-4b69-80f9-3b1a20323eb2-attachment.txt", "type": "text/plain"}], "start": 1762409147791, "stop": 1762409147847}, {"name": "轮询中（已等待40.8秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "11bd60ac-184c-448e-b525-d927f1ce0be0-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "ad9c2cc7-be70-46c8-9bd7-97c3ac7c2833-attachment.txt", "type": "text/plain"}], "start": 1762409147847, "stop": 1762409147848}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "c22c9f99-03cf-4c6c-92aa-49bbf79ef991-attachment.txt", "type": "text/plain"}], "start": 1762409147848, "stop": 1762409147848}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409149899, "stop": 1762409149950}], "attachments": [{"name": "时区处理", "source": "d60c3a21-91d4-45d2-863d-b4ba55fc3952-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "11f28272-4a51-4109-a615-805fecb6d856-attachment.txt", "type": "text/plain"}], "start": 1762409149898, "stop": 1762409149951}, {"name": "轮询中（已等待42.9秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "84fbebf7-3917-4393-8a34-edcd3583395a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "a164acee-9367-4109-8e7c-328eef97e40b-attachment.txt", "type": "text/plain"}], "start": 1762409149951, "stop": 1762409149951}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "303ac320-fcec-47ed-9334-1253ded518a9-attachment.txt", "type": "text/plain"}], "start": 1762409149951, "stop": 1762409149952}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762409152004, "stop": 1762409152058}], "attachments": [{"name": "时区处理", "source": "7a0e835a-46b8-4372-9bc5-961cbbc5b7e5-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "2ec59536-f67e-4562-a053-785b7a64b2e3-attachment.txt", "type": "text/plain"}], "start": 1762409152003, "stop": 1762409152058}, {"name": "轮询中（已等待45.0秒）", "status": "passed", "attachments": [{"name": "当前状态", "source": "66601e7b-4e4a-450c-92a6-0b1dc8cba325-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "1266abb0-a52e-4f99-9c70-a1389346e04c-attachment.txt", "type": "text/plain"}], "start": 1762409152058, "stop": 1762409152059}, {"name": "数据发生变化", "status": "passed", "attachments": [{"name": "状态说明", "source": "0a9b5e0c-6b66-4d26-a2d8-34dd23a7b02e-attachment.txt", "type": "text/plain"}], "start": 1762409152059, "stop": 1762409152060}, {"name": "时区查询轮询超时", "status": "passed", "attachments": [{"name": "处理说明", "source": "f10c26d7-48e4-4322-9f40-840dec34f858-attachment.txt", "type": "text/plain"}], "start": 1762409154068, "stop": 1762409154069}, {"name": "带时区转换查询（目标时区: +06:00）", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共0条，显示前50条）", "source": "1d41aacb-1966-44aa-8b3b-8f1a5684a027-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "0f74ea3f-4e4c-4bca-ade9-bcc6f0492df8-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "4e8f7301-d4f7-4b89-9abf-47ce9c4c0bfc-attachment.txt", "type": "text/plain"}], "start": 1762409154143, "stop": 1762409154144}], "start": 1762409154069, "stop": 1762409154144}], "attachments": [{"name": "时区处理", "source": "2d11e619-515c-4ead-a6a8-6f1204e1e793-attachment.txt", "type": "text/plain"}, {"name": "查询条件", "source": "28744aff-f72f-413d-9b7e-546e1e173306-attachment.txt", "type": "text/plain"}], "start": 1762409154069, "stop": 1762409154144}, {"name": "时区查询无结果", "status": "passed", "attachments": [{"name": "异常详情", "source": "6b296c54-fee6-4dbc-ba37-1b0e66ad2903-attachment.txt", "type": "text/plain"}, {"name": "执行SQL", "source": "f73882cf-71a0-469b-addd-a5515af393df-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "5b3a72a4-00c4-43dd-b383-b974b30c1eda-attachment.txt", "type": "text/plain"}, {"name": "时区偏移量（小时）", "source": "87e1e498-e69c-4606-9a81-1287089c374d-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "33b4db61-4661-41df-be10-e07a19c9245b-attachment.txt", "type": "text/plain"}], "start": 1762409154144, "stop": 1762409154145}], "start": 1762409107025, "stop": 1762409154145}], "start": 1762409107025, "stop": 1762409154145}], "attachments": [{"name": "log", "source": "39672460-471d-472e-bc7b-bd37919b9db8-attachment.txt", "type": "text/plain"}], "start": 1762409107025, "stop": 1762409154146, "uuid": "a0db6e09-de4f-49ab-9096-bf47d26fdf1d", "historyId": "d56498e34bd1e3f8ce0f20faf85b5a7a", "testCaseId": "d56498e34bd1e3f8ce0f20faf85b5a7a", "fullName": "test_vps.test_vps_ordersendbuy.TestVPSOrderSend6#test_dbquery_orderSend", "labels": [{"name": "story", "value": "场景6：VPS策略下单-手数范围0.6-1，总手数1"}, {"name": "feature", "value": "VPS策略下单-开仓的场景校验-buy"}, {"name": "tag", "value": "flaky(reruns=0, reruns_delay=0)"}, {"name": "tag", "value": "@pytest.mark.usefixtures('class_random_str')"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_vps_ordersendbuy"}, {"name": "subSuite", "value": "TestVPSOrdersendbuy"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "66732-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_vps_ordersendbuy"}]}