INFO     - 2025-11-06 10:38:27 - [conftest:288] - [2025-11-06 10:38] 测试会话开始: 2025-11-06 10:38:27, 测试组: cloud
INFO     - 2025-11-06 10:38:27 - [variable_manager:40] - [2025-11-06 10:38] 成功加载静态变量: VAR\uat_data.json
INFO     - 2025-11-06 10:38:27 - [variable_manager:64] - [2025-11-06 10:38] 成功加载运行时变量: VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:27 - [conftest:64] - [2025-11-06 10:38:27] 用例 test_cloudTrader/test_create.py::TestCreate_cloudTrader::test_create_importuser 开始登录，环境: uat
INFO     - 2025-11-06 10:38:27 - [conftest:107] - UAT登录尝试 1/5，MFA验证码: 33390
DEBUG    - 2025-11-06 10:38:27 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-06 10:38:28 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-06 10:38:28 - [conftest:126] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-07 10:38:28","refreshTokenExpire":"2025-11-20 10:38:28","access_token":"6043addf670a4745aa76e0eb4ffde906","refresh_token":"418b4bdd903d4b838f1873b2232d5c00"}}
INFO     - 2025-11-06 10:38:28 - [conftest:136] - UAT登录成功（第1次尝试）
INFO     - 2025-11-06 10:38:28 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
DEBUG    - 2025-11-06 10:38:37 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/user/import HTTP/11" 200 None
INFO     - 2025-11-06 10:38:37 - [api_base:149] - [2025-11-06 10:38:37] POST请求（带文件）: /mascontrol/user/import 
表单数据: None
INFO     - 2025-11-06 10:38:37 - [api_base:160] - [2025-11-06 10:38:37] 请求后等待 1 秒
INFO     - 2025-11-06 10:38:38 - [conftest:169] - [2025-11-06 10:38:38] 用例 test_cloudTrader/test_create.py::TestCreate_cloudTrader::test_create_importuser 执行完毕
INFO     - 2025-11-06 10:38:38 - [api_base:448] - [2025-11-06 10:38:38] 执行SQL: SELECT * FROM follow_trader_user WHERE remark = %s ORDER BY account ASC 
参数: ('参数化新增云策略账号',)
INFO     - 2025-11-06 10:38:38 - [api_base:451] - [2025-11-06 10:38:38] 查询成功，结果数量: 10
INFO     - 2025-11-06 10:38:38 - [api_base:463] - [2025-11-06 10:38:38] 查询结果: [{"id": 9665, "account": "300159", "password": "fa1af751c83d311f091c9393a364068c", "platform_id": 346, "platform": "FXAdamantStone-Real", "account_type": null, "server_node": "47.238.99.66:443", "group_name": null, "group_id": null, "sort": 100, "status": 0, "remark": "参数化新增云策略账号", "version": 0, "deleted": 0, "creator": 10105, "create_time": "2025-11-06 10:38:37", "updater": 10105, "update_time": "2025-11-06 10:38:37", "platform_type": 0}, {"id": 9666, "account": "300160", "password": "fa1af751c
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:38 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:39 - [api_base:448] - [2025-11-06 10:38:39] 执行SQL: SELECT * FROM follow_vps WHERE ip_address = %s ORDER BY create_time DESC 
参数: ('39.101.181.190',)
INFO     - 2025-11-06 10:38:39 - [api_base:451] - [2025-11-06 10:38:39] 查询成功，结果数量: 1
INFO     - 2025-11-06 10:38:39 - [api_base:463] - [2025-11-06 10:38:39] 查询结果: [{"id": 57, "client_id": "9e3edb5c-12c2-4662-bde8-552149676ed0", "name": "张家口（39.101.181.190）-IT", "ip_address": "39.101.181.190", "expiry_date": "2025-09-11", "remark": "2234", "is_open": 1, "is_active": 1, "copy_status": 2, "connection_status": 1, "version": 0, "deleted": 0, "creator": 10000, "create_time": "2024-12-06 18:00:55", "updater": 10099, "update_time": "2025-11-06 10:38:00", "is_syn": 1, "is_flink": 0, "is_select_account": 1, "is_monitor_repair": 1, "is_stop": 0, "is_auto_repair": 0,
INFO     - 2025-11-06 10:38:39 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:39 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:39 - [conftest:64] - [2025-11-06 10:38:39] 用例 test_cloudTrader/test_create.py::TestCreate_cloudTrader::test_add_trader 开始登录，环境: uat
INFO     - 2025-11-06 10:38:39 - [conftest:107] - UAT登录尝试 1/5，MFA验证码: 92389
DEBUG    - 2025-11-06 10:38:39 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-06 10:38:55 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-06 10:38:55 - [conftest:126] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-07 10:38:54","refreshTokenExpire":"2025-11-20 10:38:54","access_token":"1a49641f6b0d4441be6deec52de0938d","refresh_token":"f394a57f7ab644728eb2a3c641a39f45"}}
INFO     - 2025-11-06 10:38:55 - [conftest:136] - UAT登录成功（第1次尝试）
INFO     - 2025-11-06 10:38:55 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:55 - [conftest:164] - 切换到VPS URL: https://39.101.181.190/vps
DEBUG    - 2025-11-06 10:38:55 - [connectionpool:1051] - Starting new HTTPS connection (1): 39.101.181.190:443
DEBUG    - 2025-11-06 10:38:58 - [connectionpool:546] - https://39.101.181.190:443 "POST /vps/subcontrol/trader HTTP/11" 200 None
INFO     - 2025-11-06 10:38:58 - [api_base:152] - [2025-11-06 10:38:58] POST请求（JSON）: /subcontrol/trader 
数据: {'account': '300159', 'password': 'fa1af751c83d311f091c9393a364068c', 'remark': '', 'followStatus': 1, 'templateId': 1, 'type': 0, 'cfd': '', 'forex': '', 'followOrderRemark': 1, 'fixedComment': '', 'commentType': '', 'digits': '', 'platformId': '', 'platform': 'FXAdamantStone-Real', 'platformType': 0}
INFO     - 2025-11-06 10:38:58 - [api_base:160] - [2025-11-06 10:38:58] 请求后等待 1 秒
INFO     - 2025-11-06 10:38:59 - [conftest:169] - [2025-11-06 10:38:59] 用例 test_cloudTrader/test_create.py::TestCreate_cloudTrader::test_add_trader 执行完毕
INFO     - 2025-11-06 10:38:59 - [api_base:448] - [2025-11-06 10:38:59] 执行SQL: SELECT * FROM follow_trader WHERE account = %s ORDER BY create_time DESC 
参数: ('300159',)
INFO     - 2025-11-06 10:38:59 - [api_base:451] - [2025-11-06 10:38:59] 查询成功，结果数量: 1
INFO     - 2025-11-06 10:38:59 - [api_base:463] - [2025-11-06 10:38:59] 查询结果: [{"id": 10072, "account": "300159", "is_demo": 1, "type": 0, "password": "fa1af751c83d311f091c9393a364068c", "platform_id": 346, "platform": "FXAdamantStone-Real", "status": 0, "status_extra": "启动成功", "ip_addr": "39.101.181.190", "server_id": 57, "server_name": "张家口（39.101.181.190）-IT", "euqit": 10000528.25, "balance": 10000018.96, "free_margin": 9997070.94, "margin_proportion": 2892.5749, "leverage": 100, "profit_loss": 0.0, "multiple": 0.0, "diff": 2, "version": 0, "remark": "", "deleted": 0, 
INFO     - 2025-11-06 10:38:59 - [test_create:178] - 新增策略账号ID: 10072
INFO     - 2025-11-06 10:38:59 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:38:59 - [test_create:186] - 新增策略账号状态status应为0（正常），实际状态为: 0
INFO     - 2025-11-06 10:38:59 - [conftest:64] - [2025-11-06 10:38:59] 用例 test_cloudTrader/test_create.py::TestCreate_cloudTrader::test_user_hangVps 开始登录，环境: uat
INFO     - 2025-11-06 10:38:59 - [conftest:107] - UAT登录尝试 1/5，MFA验证码: 92389
DEBUG    - 2025-11-06 10:38:59 - [connectionpool:1051] - Starting new HTTPS connection (1): uat.atcp.top:443
DEBUG    - 2025-11-06 10:39:00 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-06 10:39:00 - [conftest:126] - 登录响应信息：{"code":500,"msg":"MFA验证失败","data":null}
ERROR    - 2025-11-06 10:39:00 - [conftest:141] - 第1次登录失败: 登录失败: MFA验证失败
INFO     - 2025-11-06 10:39:10 - [conftest:107] - UAT登录尝试 2/5，MFA验证码: 800997
DEBUG    - 2025-11-06 10:39:11 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/sys/auth/login HTTP/11" 200 None
INFO     - 2025-11-06 10:39:11 - [conftest:126] - 登录响应信息：{"code":0,"msg":"success","data":{"accessTokenExpire":"2025-11-07 10:39:10","refreshTokenExpire":"2025-11-20 10:39:10","access_token":"6530abb03a10414ea4f9c067c574bc2b","refresh_token":"a18735a94d79415f8b05bd8abf631d24"}}
INFO     - 2025-11-06 10:39:11 - [conftest:136] - UAT登录成功（第2次尝试）
INFO     - 2025-11-06 10:39:11 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:39:11 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
DEBUG    - 2025-11-06 10:39:11 - [connectionpool:546] - https://uat.atcp.top:443 "POST /api/mascontrol/user/hangVps HTTP/11" 200 None
INFO     - 2025-11-06 10:39:11 - [api_base:152] - [2025-11-06 10:39:11] POST请求（JSON）: /mascontrol/user/hangVps 
数据: {'accountType': 1, 'vpsId': 57, 'traderId': 10072, 'followDirection': 0, 'followMode': 1, 'followParam': 1, 'remainder': 0, 'placedType': 0, 'templateId': 1, 'followStatus': 1, 'followOpen': 1, 'followClose': 1, 'fixedComment': '', 'commentType': '', 'digits': 0, 'traderUserIds': [9666, 9663, 9661, 9662, 9667, 9664, 9670, 9668, 9669], 'platformType': 0}
INFO     - 2025-11-06 10:39:11 - [api_base:160] - [2025-11-06 10:39:11] 请求后等待 1 秒
INFO     - 2025-11-06 10:39:12 - [conftest:169] - [2025-11-06 10:39:12] 用例 test_cloudTrader/test_create.py::TestCreate_cloudTrader::test_user_hangVps 执行完毕
INFO     - 2025-11-06 10:39:13 - [api_base:538] - [2025-11-06 10:39:13] 开始轮询等待数据稳定 | 超时: 45秒 | 稳定期: 2秒
INFO     - 2025-11-06 10:39:13 - [api_base:448] - [2025-11-06 10:39:13] 执行SQL: SELECT * FROM follow_trader WHERE account = %s ORDER BY account ASC 
参数: ('300160',)
INFO     - 2025-11-06 10:39:13 - [api_base:451] - [2025-11-06 10:39:13] 查询成功，结果数量: 1
INFO     - 2025-11-06 10:39:13 - [api_base:463] - [2025-11-06 10:39:13] 查询结果: [{"id": 10077, "account": "300160", "is_demo": 1, "type": 1, "password": "fa1af751c83d311f091c9393a364068c", "platform_id": 346, "platform": "FXAdamantStone-Real", "status": 0, "status_extra": null, "ip_addr": "39.101.181.190", "server_id": 57, "server_name": "张家口（39.101.181.190）-IT", "euqit": 0.0, "balance": 0.0, "free_margin": 0.0, "margin_proportion": 0.0, "leverage": 0, "profit_loss": 0.0, "multiple": 0.0, "diff": 0, "version": 0, "remark": null, "deleted": 0, "creator": 10105, "create_time"
INFO     - 2025-11-06 10:39:15 - [api_base:448] - [2025-11-06 10:39:15] 执行SQL: SELECT * FROM follow_trader WHERE account = %s ORDER BY account ASC 
参数: ('300160',)
INFO     - 2025-11-06 10:39:15 - [api_base:451] - [2025-11-06 10:39:15] 查询成功，结果数量: 1
INFO     - 2025-11-06 10:39:15 - [api_base:463] - [2025-11-06 10:39:15] 查询结果: [{"id": 10077, "account": "300160", "is_demo": 1, "type": 1, "password": "fa1af751c83d311f091c9393a364068c", "platform_id": 346, "platform": "FXAdamantStone-Real", "status": 0, "status_extra": null, "ip_addr": "39.101.181.190", "server_id": 57, "server_name": "张家口（39.101.181.190）-IT", "euqit": 0.0, "balance": 0.0, "free_margin": 0.0, "margin_proportion": 0.0, "leverage": 0, "profit_loss": 0.0, "multiple": 0.0, "diff": 0, "version": 0, "remark": null, "deleted": 0, "creator": 10105, "create_time"
INFO     - 2025-11-06 10:39:17 - [api_base:448] - [2025-11-06 10:39:17] 执行SQL: SELECT * FROM follow_trader WHERE account = %s ORDER BY account ASC 
参数: ('300160',)
INFO     - 2025-11-06 10:39:17 - [api_base:451] - [2025-11-06 10:39:17] 查询成功，结果数量: 1
INFO     - 2025-11-06 10:39:17 - [api_base:463] - [2025-11-06 10:39:17] 查询结果: [{"id": 10077, "account": "300160", "is_demo": 1, "type": 1, "password": "fa1af751c83d311f091c9393a364068c", "platform_id": 346, "platform": "FXAdamantStone-Real", "status": 0, "status_extra": null, "ip_addr": "39.101.181.190", "server_id": 57, "server_name": "张家口（39.101.181.190）-IT", "euqit": 0.0, "balance": 0.0, "free_margin": 0.0, "margin_proportion": 0.0, "leverage": 0, "profit_loss": 0.0, "multiple": 0.0, "diff": 0, "version": 0, "remark": null, "deleted": 0, "creator": 10105, "create_time"
INFO     - 2025-11-06 10:39:17 - [api_base:579] - [2025-11-06 10:39:17] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     - 2025-11-06 10:39:17 - [variable_manager:111] - [2025-11-06 10:38] 运行时变量已保存到: D:\pycharm_test\lingkuan_1029\VAR\runtime_vars_cloud.json
INFO     - 2025-11-06 10:39:17 - [test_create:291] - 账号 300160 状态异常：预期status=0，实际=0
INFO     - 2025-11-06 10:39:17 - [api_base:538] - [2025-11-06 10:39:17] 开始轮询等待数据稳定 | 超时: 45秒 | 稳定期: 2秒
INFO     - 2025-11-06 10:39:17 - [api_base:448] - [2025-11-06 10:39:17] 执行SQL: SELECT * FROM follow_trader_subscribe WHERE slave_account = %s ORDER BY slave_account ASC 
参数: ('300160',)
INFO     - 2025-11-06 10:39:17 - [api_base:451] - [2025-11-06 10:39:17] 查询成功，结果数量: 0
INFO     - 2025-11-06 10:39:17 - [api_base:463] - [2025-11-06 10:39:17] 查询结果: []
