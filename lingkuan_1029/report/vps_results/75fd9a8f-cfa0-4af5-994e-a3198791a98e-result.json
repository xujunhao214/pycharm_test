{"name": "数据库校验-交易平仓-跟单指令及订单详情数据检查-没有订单", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 平仓失败，应该没有平仓订单\n\n实际: 4\n操作: ==\n预期: 0", "trace": "self = <lingkuan_1029.test_vps.test_vps_masOrderClose.TestVPSMasOrderclose.TestVPStradingOrders3 object at 0x0000017EF25DC430>\nclass_random_str = '6jmt3995'\nvar_manager = <lingkuan_1029.commons.variable_manager.VariableManager object at 0x0000017EF24A7220>\ndb_transaction = <pymysql.connections.Connection object at 0x0000017EF263EA90>\n\n    @allure.title(\"数据库校验-交易平仓-跟单指令及订单详情数据检查-没有订单\")\n    def test_dbquery_addsalve_orderSendclose(self, class_random_str, var_manager, db_transaction):\n        with allure.step(\"1. 获取订单详情表账号数据\"):\n            vps_user_accounts_1 = var_manager.get_variable(\"vps_user_accounts_1\")\n            vps_addslave_id = var_manager.get_variable(\"vps_addslave_id\")\n            sql = f\"\"\"\n               SELECT\n                   fod.size,\n                   fod.close_no,\n                   fod.magical,\n                   fod.open_price,\n                   fod.symbol,\n                   fod.order_no,\n                   fod.comment,\n                   fod.close_time,\n                   foi.true_total_lots,\n                   foi.order_no,\n                   foi.operation_type,\n                   foi.create_time,\n                   foi.status,\n                   foi.min_lot_size,\n                   foi.max_lot_size,\n                   foi.total_lots,\n                   foi.master_order,\n                   foi.total_orders\n               FROM\n                   follow_order_detail fod\n               INNER JOIN\n                   follow_order_instruct foi\n               ON\n                   foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci\n               WHERE foi.operation_type = %s\n                   AND fod.account = %s\n                   AND fod.comment = %s\n                   AND fod.trader_id = %s\n                   \"\"\"\n            params = (\n                '1',\n                vps_user_accounts_1,\n                class_random_str,\n                vps_addslave_id,\n            )\n    \n            # 调用轮询等待方法（带时间范围过滤）\n            db_data = self.wait_for_database_no_record(\n                db_transaction=db_transaction,\n                sql=sql,\n                params=params,\n                time_field=\"foi.create_time\"\n            )\n        with allure.step(\"2. 数据校验\"):\n>           self.verify_data(\n                actual_value=len(db_data),\n                expected_value=0,\n                op=CompareOp.EQ,\n                message=f\"平仓失败，应该没有平仓订单\",\n                attachment_name=\"订单数量详情\"\n            )\n\ntest_vps\\test_vps_masOrderClose.py:933: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <lingkuan_1029.test_vps.test_vps_masOrderClose.TestVPSMasOrderclose.TestVPStradingOrders3 object at 0x0000017EF25DC430>\nactual_value = 4, expected_value = 0, op = <CompareOp.EQ: '=='>\nmessage = '平仓失败，应该没有平仓订单', attachment_name = '订单数量详情'\nattachment_type = 'text/plain', use_isclose = True, rel_tol = 1e-09, abs_tol = 0\n\n    def verify_data(\n            self,\n            actual_value,\n            expected_value,\n            op: CompareOp,\n            message: str,\n            attachment_name: str,\n            attachment_type=\"text/plain\",\n            use_isclose=True,  # 新增参数：是否启用math.isclose容错（默认启用）\n            rel_tol=1e-9,  # 相对容差（仅当use_isclose=True时生效）\n            abs_tol=0  # 绝对容差（仅当use_isclose=True时生效）\n    ):\n        \"\"\"\n        通用数据校验函数，支持浮点容错比较\n        :param actual_value: 实际值\n        :param expected_value: 预期值\n        :param op: 比较操作，CompareOp 枚举\n        :param message: 校验失败时的提示信息\n        :param attachment_name: Allure 附件名称\n        :param attachment_type: Allure 附件类型，默认文本\n        :param use_isclose: 是否使用math.isclose进行浮点容错比较\n        :param rel_tol: 相对容差（默认1e-9）\n        :param abs_tol: 绝对容差（默认0.0）\n        其他参数同前\n        \"\"\"\n        with allure.step(f\"校验: {message}\"):\n            result = False\n            try:\n                # 处理浮点容错比较（仅对EQ/NE操作生效）\n                if use_isclose and op in (CompareOp.EQ, CompareOp.NE):\n                    if not (isinstance(actual_value, (int, float)) and\n                            isinstance(expected_value, (int, float))):\n                        # 非数字类型自动禁用isclose，避免报错\n                        use_isclose = False\n                        logging.warning(f\"自动禁用isclose：非数字类型比较（实际值类型：{type(actual_value)}）\")\n    \n                    # 计算isclose结果\n                    is_close = math.isclose(\n                        actual_value,\n                        expected_value,\n                        rel_tol=rel_tol,\n                        abs_tol=abs_tol\n                    )\n                    # 根据操作类型取反\n                    result = is_close if op == CompareOp.EQ else not is_close\n    \n                # 普通比较逻辑\n                else:\n                    if op == CompareOp.EQ:\n                        result = actual_value == expected_value\n                    elif op == CompareOp.NE:\n                        result = actual_value != expected_value\n                    elif op == CompareOp.GT:\n                        result = actual_value > expected_value\n                    elif op == CompareOp.LT:\n                        result = actual_value < expected_value\n                    elif op == CompareOp.GE:\n                        result = actual_value >= expected_value\n                    elif op == CompareOp.LE:\n                        result = actual_value <= expected_value\n                    elif op == CompareOp.IN:\n                        result = actual_value in expected_value\n                    elif op == CompareOp.NOT_IN:\n                        result = actual_value not in expected_value\n    \n            except TypeError as e:\n                pytest.fail(\n                    f\"校验类型错误: {str(e)}\\n实际值类型: {type(actual_value)}, 预期值类型: {type(expected_value)}\")\n    \n            # 生成详细提示信息（包含容差参数）\n            detail_msg = (\n                f\"\\n实际: {actual_value}\\n\"\n                f\"操作: {op.value}\\n\"\n                f\"预期: {expected_value}\\n\"\n            )\n    \n            # 添加allure.attach，将信息写入报告\n            allure.attach(\n                detail_msg,  # 附件内容\n                name=attachment_name,  # 附件名称（来自参数）\n                attachment_type=attachment_type  # 附件类型\n            )\n    \n            if not result:\n>               pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\nE               Failed: 校验失败: 平仓失败，应该没有平仓订单\nE               \nE               实际: 4\nE               操作: ==\nE               预期: 0\n\ncommons\\api_base.py:1395: Failed"}, "description": "\n    ### 测试说明\n    - 前置条件：有vps策略和vps跟单\n      1. 修改跟单账号，跟单方向-反向sell\n      2. 进行开仓，手数范围：0.1-1，总订单数量4\n      3. 交易下单-跟单账号自己平仓-buy\n      4. 校验平仓的订单数，应该不等于4\n      5. 交易下单-跟单账号自己平仓-sell\n      6. 校验平仓的订单数,等于4\n    - 预期结果：平仓的订单方向功能正确\n    ", "steps": [{"name": "1. 获取订单详情表账号数据", "status": "passed", "steps": [{"name": "轮询等待无记录（超时: 45秒，稳定期: 2秒）", "status": "passed", "steps": [{"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414004244, "stop": 1762414004299}], "attachments": [{"name": "查询条件", "source": "6aea6d38-6982-499d-86d8-9f2e5e61894d-attachment.txt", "type": "text/plain"}], "start": 1762414004243, "stop": 1762414004299}, {"name": "等待中（已等待0.1秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "8e77bf9e-5f1b-4c11-8dc5-4ce1741ffce9-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "753b00cb-6760-4c07-b273-ed07f4ad9865-attachment.txt", "type": "text/plain"}], "start": 1762414004299, "stop": 1762414004300}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "59780bbf-37bf-4eea-be6a-478ab0361d7f-attachment.txt", "type": "text/plain"}], "start": 1762414004300, "stop": 1762414004300}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414006350, "stop": 1762414006412}], "attachments": [{"name": "查询条件", "source": "1302a2c1-0a8e-42de-abd9-5fe72e894047-attachment.txt", "type": "text/plain"}], "start": 1762414006350, "stop": 1762414006412}, {"name": "等待中（已等待2.2秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "1cf9717c-95f6-48e5-a534-087b39f7afea-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "b8fea289-295e-4b74-b7f2-ff0eb0d8facd-attachment.txt", "type": "text/plain"}], "start": 1762414006412, "stop": 1762414006413}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "914f39b3-23ea-4520-bf1a-6bcc61fdad7b-attachment.txt", "type": "text/plain"}], "start": 1762414006413, "stop": 1762414006413}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414008464, "stop": 1762414008519}], "attachments": [{"name": "查询条件", "source": "b515f02b-b6e2-4c7f-8369-447df5da6000-attachment.txt", "type": "text/plain"}], "start": 1762414008463, "stop": 1762414008519}, {"name": "等待中（已等待4.3秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "4f31de34-acf3-4b1c-98bd-90ddc0830ae7-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "57f72d3f-28b4-4509-b8dd-a9ff8005011c-attachment.txt", "type": "text/plain"}], "start": 1762414008519, "stop": 1762414008520}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "06547642-6402-4cb7-96f5-2f193357576f-attachment.txt", "type": "text/plain"}], "start": 1762414008520, "stop": 1762414008521}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414010582, "stop": 1762414010637}], "attachments": [{"name": "查询条件", "source": "b4a4b6a1-4108-44c4-b1fb-66860e805a55-attachment.txt", "type": "text/plain"}], "start": 1762414010582, "stop": 1762414010637}, {"name": "等待中（已等待6.5秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "9ea93ad8-aa5b-48d4-a8c1-0093ab5a0d16-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "2eb91803-eb5e-4253-bd7e-f972c370214f-attachment.txt", "type": "text/plain"}], "start": 1762414010638, "stop": 1762414010638}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "f880f7e1-e4bf-4831-8309-1171b50729db-attachment.txt", "type": "text/plain"}], "start": 1762414010638, "stop": 1762414010639}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414012695, "stop": 1762414012751}], "attachments": [{"name": "查询条件", "source": "c835e932-3067-4fea-a7ef-104f6cc5539d-attachment.txt", "type": "text/plain"}], "start": 1762414012694, "stop": 1762414012751}, {"name": "等待中（已等待8.6秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "de5a6421-52e3-49bc-9bcf-613e58cefdee-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "45a3d755-cdab-4ebe-b3e6-bb09ea89e90d-attachment.txt", "type": "text/plain"}], "start": 1762414012751, "stop": 1762414012752}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "677751e4-42cd-4052-9ae1-8fa83c0239f2-attachment.txt", "type": "text/plain"}], "start": 1762414012752, "stop": 1762414012752}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414014812, "stop": 1762414015061}], "attachments": [{"name": "查询条件", "source": "7ec65888-b00b-45fe-85cf-b1df8444387c-attachment.txt", "type": "text/plain"}], "start": 1762414014811, "stop": 1762414015061}, {"name": "等待中（已等待10.9秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "768e4f00-e992-43ed-9814-18b4b2b59c52-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "344f1e74-93dd-424e-83a2-daa1801e32bf-attachment.txt", "type": "text/plain"}], "start": 1762414015061, "stop": 1762414015062}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "33c11e90-55ef-4076-be00-e4d8062c499c-attachment.txt", "type": "text/plain"}], "start": 1762414015062, "stop": 1762414015062}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414017114, "stop": 1762414017174}], "attachments": [{"name": "查询条件", "source": "1b58bf0c-6cc7-48ae-add2-ea8958f1020e-attachment.txt", "type": "text/plain"}], "start": 1762414017114, "stop": 1762414017174}, {"name": "等待中（已等待13.0秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "aa546282-b68a-461a-ab9c-cd2d24add812-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "f59374c0-ae2c-4768-9a5b-f4059e02d633-attachment.txt", "type": "text/plain"}], "start": 1762414017174, "stop": 1762414017175}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "41cfac25-41bb-49de-9687-bfc4c66d5996-attachment.txt", "type": "text/plain"}], "start": 1762414017175, "stop": 1762414017175}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414019239, "stop": 1762414019293}], "attachments": [{"name": "查询条件", "source": "5c3b567f-3831-45fe-a39e-dfa8e95343b0-attachment.txt", "type": "text/plain"}], "start": 1762414019238, "stop": 1762414019293}, {"name": "等待中（已等待15.1秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "73471277-3c5c-41f6-967c-5fe7aaf67b7d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "37e138e6-b2f4-4e52-a64e-43913269f0a7-attachment.txt", "type": "text/plain"}], "start": 1762414019293, "stop": 1762414019294}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "164ec9c1-6e6a-493a-801d-7e7943383e02-attachment.txt", "type": "text/plain"}], "start": 1762414019294, "stop": 1762414019295}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414021353, "stop": 1762414021408}], "attachments": [{"name": "查询条件", "source": "dc86b803-9bac-4392-a24d-fe4f16884306-attachment.txt", "type": "text/plain"}], "start": 1762414021353, "stop": 1762414021408}, {"name": "等待中（已等待17.2秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "dd670c0d-03b8-4112-8958-ef0955291003-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "d216f096-9693-4cef-a0ce-b8e574ce545c-attachment.txt", "type": "text/plain"}], "start": 1762414021409, "stop": 1762414021409}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "280b606d-570b-416f-aee8-27a00f6b2d5a-attachment.txt", "type": "text/plain"}], "start": 1762414021409, "stop": 1762414021411}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414023470, "stop": 1762414023531}], "attachments": [{"name": "查询条件", "source": "c5c22693-0160-4913-bebb-af3eee39f5e5-attachment.txt", "type": "text/plain"}], "start": 1762414023470, "stop": 1762414023531}, {"name": "等待中（已等待19.3秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "c19cfe7e-b0c6-47e2-bddd-6aed7ac3fe01-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "9caeb735-ce0f-4b47-899d-60cb749e2ba0-attachment.txt", "type": "text/plain"}], "start": 1762414023531, "stop": 1762414023532}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "9269ee2c-37f0-4873-8acb-6aa48f046900-attachment.txt", "type": "text/plain"}], "start": 1762414023532, "stop": 1762414023533}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414025597, "stop": 1762414025655}], "attachments": [{"name": "查询条件", "source": "4152bbdd-4d22-41b4-b8e9-2ab48de2ee4a-attachment.txt", "type": "text/plain"}], "start": 1762414025597, "stop": 1762414025655}, {"name": "等待中（已等待21.5秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "708f750a-9a0d-4dd0-b76d-98d0e6f335ef-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "44e08a19-d05c-49e6-86d3-9072742aa2c9-attachment.txt", "type": "text/plain"}], "start": 1762414025655, "stop": 1762414025656}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "f35d6983-6352-4a8a-a4ce-5e7fe24a1b79-attachment.txt", "type": "text/plain"}], "start": 1762414025656, "stop": 1762414025656}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414027711, "stop": 1762414027771}], "attachments": [{"name": "查询条件", "source": "cc924f75-f15d-49b6-ac33-26ddbade96fd-attachment.txt", "type": "text/plain"}], "start": 1762414027711, "stop": 1762414027771}, {"name": "等待中（已等待23.6秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "90714f58-b63c-4da1-8fd1-a3d8671964da-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "013fa6fb-9a5d-4052-b8bc-6b2ef804aadb-attachment.txt", "type": "text/plain"}], "start": 1762414027771, "stop": 1762414027772}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "4bb1c206-7f6a-4fcd-b703-774a21ff3829-attachment.txt", "type": "text/plain"}], "start": 1762414027772, "stop": 1762414027773}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414029847, "stop": 1762414029904}], "attachments": [{"name": "查询条件", "source": "9d711eb3-ab97-4e42-81a8-fff3d3b60aa8-attachment.txt", "type": "text/plain"}], "start": 1762414029846, "stop": 1762414029904}, {"name": "等待中（已等待25.7秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "0e60ed4f-3a6f-4de2-a22e-34e90eb1ac24-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "33c2c0db-b9cf-4854-84d4-8b39b9ce47f0-attachment.txt", "type": "text/plain"}], "start": 1762414029904, "stop": 1762414029905}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "9fbc9f00-6150-48cf-a3e2-695aa4f13f97-attachment.txt", "type": "text/plain"}], "start": 1762414029905, "stop": 1762414029906}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414031960, "stop": 1762414032016}], "attachments": [{"name": "查询条件", "source": "7b81d699-25f7-4879-974c-ca541b199c49-attachment.txt", "type": "text/plain"}], "start": 1762414031960, "stop": 1762414032016}, {"name": "等待中（已等待27.8秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "1ce9e833-b81f-42cd-b527-2b5921b7bb14-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "69287a8b-394a-4468-8e46-cdbd28109e27-attachment.txt", "type": "text/plain"}], "start": 1762414032016, "stop": 1762414032017}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "bf8d229f-9fea-4111-83d2-19f7a50c8ea3-attachment.txt", "type": "text/plain"}], "start": 1762414032017, "stop": 1762414032017}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414034074, "stop": 1762414034132}], "attachments": [{"name": "查询条件", "source": "2e414a3c-3b86-401c-995a-b4f1400fbe82-attachment.txt", "type": "text/plain"}], "start": 1762414034074, "stop": 1762414034132}, {"name": "等待中（已等待29.9秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "557febcf-61c2-41dd-be0c-5e0fca6ddec2-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "dfbc8ca5-1bdd-4964-94f0-348c8743996d-attachment.txt", "type": "text/plain"}], "start": 1762414034132, "stop": 1762414034133}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "46d71fd0-0043-4d18-9bf1-8f1409c49db4-attachment.txt", "type": "text/plain"}], "start": 1762414034133, "stop": 1762414034133}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414036191, "stop": 1762414036251}], "attachments": [{"name": "查询条件", "source": "3ba4dafc-def4-4438-bacb-1db8e2c6f353-attachment.txt", "type": "text/plain"}], "start": 1762414036190, "stop": 1762414036251}, {"name": "等待中（已等待32.1秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "791ba1e1-0987-4ae7-abb1-039f474e1d08-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "344216c6-9033-4118-9647-5bb2c52d15a3-attachment.txt", "type": "text/plain"}], "start": 1762414036251, "stop": 1762414036251}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "da44f44b-5b5f-410e-b35d-19004f14f29f-attachment.txt", "type": "text/plain"}], "start": 1762414036251, "stop": 1762414036252}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414038312, "stop": 1762414038368}], "attachments": [{"name": "查询条件", "source": "54399182-53ab-493c-b76b-8b301e684da7-attachment.txt", "type": "text/plain"}], "start": 1762414038311, "stop": 1762414038368}, {"name": "等待中（已等待34.2秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "824e5a7d-2d8b-4a2c-b258-ecf45dbf4a9d-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "851f6113-f4d0-4505-ba89-4aa35e9498ce-attachment.txt", "type": "text/plain"}], "start": 1762414038368, "stop": 1762414038369}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "ccda7f7b-cbc9-4e22-a085-0c58da7d165b-attachment.txt", "type": "text/plain"}], "start": 1762414038369, "stop": 1762414038370}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414040423, "stop": 1762414040486}], "attachments": [{"name": "查询条件", "source": "034785e5-165e-4eb7-8951-b94310b7d38b-attachment.txt", "type": "text/plain"}], "start": 1762414040422, "stop": 1762414040486}, {"name": "等待中（已等待36.3秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "2dd06dea-2567-4456-841c-d0195cb92420-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "0e3cad11-e71a-4544-bbcf-ce9c98376f13-attachment.txt", "type": "text/plain"}], "start": 1762414040486, "stop": 1762414040488}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "fed74071-714f-40a1-89c1-34fb487b153a-attachment.txt", "type": "text/plain"}], "start": 1762414040488, "stop": 1762414040489}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414042550, "stop": 1762414042605}], "attachments": [{"name": "查询条件", "source": "84dbd1be-1949-4b24-ab20-6fa9300de21f-attachment.txt", "type": "text/plain"}], "start": 1762414042550, "stop": 1762414042605}, {"name": "等待中（已等待38.4秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "f2a0f615-d73b-4e66-ae61-c7bfea4a3aed-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "9cc95dac-18b0-42ea-b884-5e33b67c7958-attachment.txt", "type": "text/plain"}], "start": 1762414042605, "stop": 1762414042606}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "655e1bf9-0a13-4681-8dc4-60e376cd5a7c-attachment.txt", "type": "text/plain"}], "start": 1762414042606, "stop": 1762414042606}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414044671, "stop": 1762414044733}], "attachments": [{"name": "查询条件", "source": "ec6829b4-ee8f-4d3b-a8ca-daa204c0f1b0-attachment.txt", "type": "text/plain"}], "start": 1762414044671, "stop": 1762414044733}, {"name": "等待中（已等待40.5秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "bc76d707-13aa-4485-8d2a-0ff5df880c8a-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "73fb4b88-3545-4c7c-8c9b-bd8534d59486-attachment.txt", "type": "text/plain"}], "start": 1762414044733, "stop": 1762414044737}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "b688ff4d-a099-40e5-bb91-2f6c2d563da4-attachment.txt", "type": "text/plain"}], "start": 1762414044737, "stop": 1762414044738}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414046789, "stop": 1762414046845}], "attachments": [{"name": "查询条件", "source": "43fc2f91-0c1c-405d-a437-084694aa400c-attachment.txt", "type": "text/plain"}], "start": 1762414046789, "stop": 1762414046845}, {"name": "等待中（已等待42.7秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "42863686-3854-4fcb-98d6-2aefd5de3db6-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "09a72e56-96b3-4d4a-9de7-ac87de716946-attachment.txt", "type": "text/plain"}], "start": 1762414046845, "stop": 1762414046846}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "3d8fb15f-f584-4285-afb8-437b914806f6-attachment.txt", "type": "text/plain"}], "start": 1762414046846, "stop": 1762414046847}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "start": 1762414048903, "stop": 1762414048959}], "attachments": [{"name": "查询条件", "source": "2b1a0a87-2dd8-44d1-b769-3edfbc49b754-attachment.txt", "type": "text/plain"}], "start": 1762414048902, "stop": 1762414048959}, {"name": "等待中（已等待44.8秒）", "status": "passed", "attachments": [{"name": "查询状态", "source": "886360a7-3b0c-452c-ac26-7870ff78ff7f-attachment.txt", "type": "text/plain"}, {"name": "超时倒计时", "source": "23360e79-1cac-4ed0-b0cf-a87e435bcf53-attachment.txt", "type": "text/plain"}], "start": 1762414048959, "stop": 1762414048960}, {"name": "检测到记录", "status": "passed", "attachments": [{"name": "状态说明", "source": "8585b74a-9209-4dc7-9af3-fa55610c7772-attachment.txt", "type": "text/plain"}], "start": 1762414048960, "stop": 1762414048961}, {"name": "执行单次数据库查询", "status": "passed", "steps": [{"name": "执行数据库查询", "status": "passed", "steps": [{"name": "数据库查询结果", "status": "passed", "attachments": [{"name": "查询结果（共4条，显示前50条）", "source": "35522bf8-61db-4c91-a91b-b2992293b2a3-attachment.json", "type": "application/json"}, {"name": "执行SQL", "source": "50fd0920-a8e8-4841-875a-9d6b31c9afa3-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "84060683-0095-4c6e-a463-41bf611344f6-attachment.txt", "type": "text/plain"}], "start": 1762414051017, "stop": 1762414051018}], "start": 1762414050961, "stop": 1762414051018}], "attachments": [{"name": "查询条件", "source": "b7ed8632-3b3a-4f6c-acd3-30e756134db4-attachment.txt", "type": "text/plain"}], "start": 1762414050961, "stop": 1762414051018}, {"name": "超时后最终结果", "status": "passed", "attachments": [{"name": "结果说明", "source": "25bf8493-5226-4b07-8dd4-5e99ce8b03b1-attachment.txt", "type": "text/plain"}], "start": 1762414051018, "stop": 1762414051018}], "attachments": [{"name": "执行SQL", "source": "ff6c58d0-4271-42a8-bc04-7e3448252fcc-attachment.txt", "type": "text/plain"}, {"name": "SQL参数", "source": "4a149dff-8951-4786-9528-8770a3a16c94-attachment.txt", "type": "text/plain"}, {"name": "查询时间窗口", "source": "149ebbc7-c7c7-49f0-9a68-84a31c4cb5c5-attachment.txt", "type": "text/plain"}], "start": 1762414004186, "stop": 1762414051018}], "start": 1762414004186, "stop": 1762414051018}, {"name": "2. 数据校验", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 平仓失败，应该没有平仓订单\n\n实际: 4\n操作: ==\n预期: 0\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_1029\\test_vps\\test_vps_masOrderClose.py\", line 933, in test_dbquery_addsalve_orderSendclose\n    self.verify_data(\n  File \"D:\\pycharm_test\\lingkuan_1029\\commons\\api_base.py\", line 1395, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "steps": [{"name": "校验: 平仓失败，应该没有平仓订单", "status": "failed", "statusDetails": {"message": "Failed: 校验失败: 平仓失败，应该没有平仓订单\n\n实际: 4\n操作: ==\n预期: 0\n\n", "trace": "  File \"D:\\pycharm_test\\lingkuan_1029\\commons\\api_base.py\", line 1395, in verify_data\n    pytest.fail(f\"校验失败: {message}\\n{detail_msg}\")\n  File \"D:\\pycharm_test\\Community\\lib\\site-packages\\_pytest\\outcomes.py\", line 198, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "attachments": [{"name": "订单数量详情", "source": "1be15181-4045-4e14-8a0b-c66c470623e9-attachment.attach", "type": "text/plain"}], "start": 1762414051018, "stop": 1762414051019}], "start": 1762414051018, "stop": 1762414051021}], "attachments": [{"name": "log", "source": "07304386-3c9c-4e46-b35b-8a1f39cddb78-attachment.txt", "type": "text/plain"}], "start": 1762414004186, "stop": 1762414051022, "uuid": "50767677-e663-4d37-ac35-54a1e60d7418", "historyId": "16efec39f596b5e0a3b260989dca55dd", "testCaseId": "16efec39f596b5e0a3b260989dca55dd", "fullName": "test_vps.test_vps_masOrderClose.TestVPStradingOrders3#test_dbquery_addsalve_orderSendclose", "labels": [{"name": "feature", "value": "VPS策略账号交易下单-平仓的功能校验"}, {"name": "story", "value": "场景3：平仓的订单方向功能校验-sell"}, {"name": "tag", "value": "@pytest.mark.usefixtures('class_random_str')"}, {"name": "parentSuite", "value": "test_vps"}, {"name": "suite", "value": "test_vps_masOrderClose"}, {"name": "subSuite", "value": "TestVPSMasOrderclose"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "18156-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_vps.test_vps_masOrderClose"}]}