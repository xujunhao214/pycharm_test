{"name": "数据库校验-VPS数据-批量删除跟单账号", "status": "failed", "statusDetails": {"message": "AssertionError: 第1个账号（119999356）删除标记错误，应为1实际为0\nassert 0 == 1", "trace": "self = <lingkuan.test_foundation.test_delete.TestDeleteTrader object at 0x00000228D1238EE0>\nvar_manager = <lingkuan.commons.variable_manager.VariableManager object at 0x00000228D123C610>\ndb_transaction = <pymysql.connections.Connection object at 0x00000228D12549A0>\n\n    @allure.title(\"数据库校验-VPS数据-批量删除跟单账号\")\n    def test_dbdelete_addsalvelist(self, var_manager, db_transaction):\n        # 1. 获取账号总数和所有账号信息\n        addslave_count = var_manager.get_variable(\"addslave_count\", 0)\n        if addslave_count <= 0:\n            pytest.fail(\"未找到需要验证的账号数量，请检查前置步骤\")\n    \n        db_addslave_query = var_manager.get_variable(\"db_addslave_query\")\n        table = db_addslave_query[\"table\"]\n    \n        # 2. 循环验证每个账号的删除状态\n        for i in range(1, addslave_count + 1):\n            with allure.step(f\"验证第{i}个账号是否删除成功\"):\n                # 获取单个账号（与删除的ID对应）\n                account = var_manager.get_variable(f\"user_accounts_{i}\")\n                if not account:\n                    pytest.fail(f\"未找到需要验证的账号：user_accounts_{i}\")\n    \n                # 查询数据库（检查删除标记或记录是否存在）\n                sql = f\"SELECT * FROM {table} WHERE account = %s\"\n                db_data = self.query_database(db_transaction, sql, (account,))\n    \n                # 验证逻辑：根据实际业务判断（逻辑删除/物理删除）\n                if db_data:\n                    # 逻辑删除：验证deleted字段为1\n>                   assert db_data[0][\"deleted\"] == 1, (\n                        f\"第{i}个账号（{account}）删除标记错误，\"\n                        f\"应为1实际为{db_data[0]['deleted']}\"\n                    )\nE                   AssertionError: 第1个账号（119999356）删除标记错误，应为1实际为0\nE                   assert 0 == 1\n\ntest_foundation\\test_delete.py:146: AssertionError"}, "steps": [{"name": "验证第1个账号是否删除成功", "status": "failed", "statusDetails": {"message": "AssertionError: 第1个账号（119999356）删除标记错误，应为1实际为0\nassert 0 == 1\n", "trace": "  File \"D:\\pycharm_test\\lingkuan\\test_foundation\\test_delete.py\", line 146, in test_dbdelete_addsalvelist\n    assert db_data[0][\"deleted\"] == 1, (\n"}, "start": 1751542426005, "stop": 1751542426050}], "attachments": [{"name": "log", "source": "8307cd32-a3ad-4908-862b-82563d0cb10a-attachment.txt", "type": "text/plain"}], "start": 1751542426005, "stop": 1751542426050, "uuid": "87310100-4500-477e-9240-1fa2dbdb8b17", "historyId": "880fc91e839030698162dac35b645205", "testCaseId": "880fc91e839030698162dac35b645205", "fullName": "test_foundation.test_delete.TestDeleteTrader#test_dbdelete_addsalvelist", "labels": [{"name": "feature", "value": "跟单软件看板"}, {"name": "parentSuite", "value": "test_foundation"}, {"name": "suite", "value": "test_delete"}, {"name": "subSuite", "value": "TestDeleteTrader"}, {"name": "host", "value": "DESKTOP-4S9CU1E"}, {"name": "thread", "value": "30376-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_foundation.test_delete"}]}