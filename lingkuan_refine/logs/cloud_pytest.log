INFO     2025-08-28 11:47:46 [lingkuan_refine.conftest;276]  : [2025-08-28 11:47] 测试会话开始: 2025-08-28 11:47:46, 测试组: cloud
INFO     2025-08-28 11:47:46 [lingkuan_refine.commons.variable_manager;40]  : [2025-08-28 11:47] 成功加载静态变量: VAR\uat_data.json
INFO     2025-08-28 11:47:46 [lingkuan_refine.commons.variable_manager;64]  : [2025-08-28 11:47] 成功加载运行时变量: VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:47:46 [lingkuan_refine.conftest;62]  : [2025-08-28 11:47:46] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_cloudTrader_cloudBatchUpdate 开始登录，环境: uat
INFO     2025-08-28 11:47:46 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 99013
INFO     2025-08-28 11:47:48 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:47:48 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:47:48 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:47:48] POST请求（JSON）: /mascontrol/cloudTrader/cloudBatchUpdate | 数据: [{'traderList': [1537], 'cloudId': 109, 'masterId': 1535, 'masterAccount': '300160', 'followDirection': 0, 'followMode': 1, 'followParam': 1, 'remainder': 0, 'placedType': 0, 'templateId': 1, 'followStatus': 1, 'followOpen': 0, 'followClose': 1, 'fixedComment': 'ceshi', 'commentType': None, 'digits': 0, 'followTraderIds': [], 'sort': 100, 'remark': '', 'cfd': '', 'forex': ''}]
INFO     2025-08-28 11:47:48 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:47:48] 请求后等待 1 秒
INFO     2025-08-28 11:47:49 [lingkuan_refine.conftest;157]  : [2025-08-28 11:47:49] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_cloudTrader_cloudBatchUpdate 执行完毕
INFO     2025-08-28 11:47:50 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:47:50] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:47:50 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:47:50] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:47:50 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:47:50] 查询成功，结果数量: 1
INFO     2025-08-28 11:47:50 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:47:50] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:47:46", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 0, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:47:52 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:47:52] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:47:52 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:47:52] 查询成功，结果数量: 1
INFO     2025-08-28 11:47:52 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:47:52] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:47:46", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 0, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:47:54 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:47:54] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:47:54 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:47:54] 查询成功，结果数量: 1
INFO     2025-08-28 11:47:54 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:47:54] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:47:46", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 0, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:47:54 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:47:54] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:47:54 [lingkuan_refine.conftest;62]  : [2025-08-28 11:47:54] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_bargain_masOrderSend 开始登录，环境: uat
INFO     2025-08-28 11:47:54 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 99013
INFO     2025-08-28 11:47:55 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:47:55 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:47:56 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:47:56] POST请求（JSON）: /bargain/masOrderSend | 数据: {'traderList': [6667], 'type': 0, 'tradeType': 1, 'intervalTime': 100, 'symbol': 'XAUUSD', 'placedType': 0, 'startSize': '0.10', 'endSize': '1.00', 'totalNum': '3', 'totalSzie': '1.00', 'remark': '测试交易下单数据'}
INFO     2025-08-28 11:47:56 [lingkuan_refine.conftest;157]  : [2025-08-28 11:47:56] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_bargain_masOrderSend 执行完毕
INFO     2025-08-28 11:47:56 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:47:56] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:47:56 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:47:56] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:47:59 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:47:59] 查询成功，结果数量: 1
INFO     2025-08-28 11:47:59 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:47:59] 查询结果: [{"send_no": "8333369243697", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "8333369243697", "operation_type": 0, "create_time": "2025-08-28 11:47:54", "status": 0, "master_order": 550159, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:48:01 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:01] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:48:04 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:04] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:04 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:04] 查询结果: [{"send_no": "8333369243697", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "8333369243697", "operation_type": 0, "create_time": "2025-08-28 11:47:54", "status": 2, "master_order": 550159, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:48:06 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:06] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:48:08 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:08] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:08 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:08] 查询结果: [{"send_no": "8333369243697", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "8333369243697", "operation_type": 0, "create_time": "2025-08-28 11:47:54", "status": 2, "master_order": 550159, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:48:10 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:10] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:48:13 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:13] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:13 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:13] 查询结果: [{"send_no": "8333369243697", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "8333369243697", "operation_type": 0, "create_time": "2025-08-28 11:47:54", "status": 2, "master_order": 550159, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:48:13 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:48:13] 数据已稳定2秒（耗时16.9秒）| 结果数: 1
INFO     2025-08-28 11:48:13 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:48:14 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:48:14] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:48:14 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:14] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:48:17 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:17] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:17 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:17] 查询结果: [{"id": 22700303, "symbol": "XAUUSD", "type": 0, "order_no": 550159, "send_no": "8946347801441", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:47:53", "request_open_price": 3390.2, "open_time": "2025-08-28 06:47:53", "response_open_time": "2025-08-28 11:47:53", "open_price": 3390.14, "open_price_slip": 0.32, "open_time_difference": 280, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:47:54", "updater": null, "update_time": "2025-08-28 11:47:55", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 6551, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.06, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:48:19 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:19] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:48:23 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:23] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:23 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:23] 查询结果: [{"id": 22700303, "symbol": "XAUUSD", "type": 0, "order_no": 550159, "send_no": "8946347801441", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:47:53", "request_open_price": 3390.2, "open_time": "2025-08-28 06:47:53", "response_open_time": "2025-08-28 11:47:53", "open_price": 3390.14, "open_price_slip": 0.32, "open_time_difference": 280, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:47:54", "updater": null, "update_time": "2025-08-28 11:47:55", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 6551, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.06, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:48:25 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:25] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:48:29 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:29] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:29 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:29] 查询结果: [{"id": 22700303, "symbol": "XAUUSD", "type": 0, "order_no": 550159, "send_no": "8946347801441", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:47:53", "request_open_price": 3390.2, "open_time": "2025-08-28 06:47:53", "response_open_time": "2025-08-28 11:47:53", "open_price": 3390.14, "open_price_slip": 0.32, "open_time_difference": 280, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:47:54", "updater": null, "update_time": "2025-08-28 11:47:55", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 6551, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.06, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:48:29 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:48:29] 数据已稳定2秒（耗时14.6秒）| 结果数: 1
INFO     2025-08-28 11:48:29 [root;226]  : 转换后的Redis数据: [{'order_no': 550159, 'magical': 6551, 'size': 1.0, 'open_price': 3390.14, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:48:29 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:48:29 [root;248]  : 数据库转换后: [{'order_no': 550159, 'magical': 6551, 'size': 1.0, 'open_price': 3390.14, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:48:29 [lingkuan_refine.conftest;62]  : [2025-08-28 11:48:29] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_cloudTrader_cloudBatchUpdate2 开始登录，环境: uat
INFO     2025-08-28 11:48:29 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 399870
INFO     2025-08-28 11:48:30 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:48:30 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:48:30 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:48:30] POST请求（JSON）: /mascontrol/cloudTrader/cloudBatchUpdate | 数据: [{'traderList': [1537], 'cloudId': 109, 'masterId': 1535, 'masterAccount': '300160', 'followDirection': 0, 'followMode': 1, 'followParam': 1, 'remainder': 0, 'placedType': 0, 'templateId': 1, 'followStatus': 1, 'followOpen': 1, 'followClose': 1, 'fixedComment': 'ceshi', 'commentType': None, 'digits': 0, 'followTraderIds': [], 'sort': 100, 'remark': '', 'cfd': '', 'forex': ''}]
INFO     2025-08-28 11:48:30 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:48:30] 请求后等待 1 秒
INFO     2025-08-28 11:48:31 [lingkuan_refine.conftest;157]  : [2025-08-28 11:48:31] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_cloudTrader_cloudBatchUpdate2 执行完毕
INFO     2025-08-28 11:48:32 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:48:32] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:48:32 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:32] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:48:32 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:32] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:32 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:32] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:48:28", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:48:34 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:34] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:48:34 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:34] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:34 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:34] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:48:28", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:48:36 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:36] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:48:36 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:36] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:36 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:36] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:48:28", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:48:36 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:48:36] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:48:36 [lingkuan_refine.conftest;62]  : [2025-08-28 11:48:36] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_follow_repairSend 开始登录，环境: uat
INFO     2025-08-28 11:48:36 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 862001
INFO     2025-08-28 11:48:38 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:48:38 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:48:38 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:48:38] POST请求（JSON）: /mascontrol/cloudTrader/batchRepairSend | 数据: [{'cloudId': 109, 'repairType': 0, 'masterId': 1535, 'slaveId': 1537, 'masterOrder': 550159}]
INFO     2025-08-28 11:48:38 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:48:38] 请求后等待 1 秒
INFO     2025-08-28 11:48:39 [lingkuan_refine.conftest;157]  : [2025-08-28 11:48:39] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_follow_repairSend 执行完毕
INFO     2025-08-28 11:48:40 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:48:40] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:48:40 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:40] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:48:41 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:41] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:41 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:41] 查询结果: [{"size": 1.0, "send_no": "8333369243697", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "8333369243697", "operation_type": 0, "create_time": "2025-08-28 11:47:54", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:48:43 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:43] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:48:44 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:44] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:44 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:44] 查询结果: [{"size": 1.0, "send_no": "8333369243697", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "8333369243697", "operation_type": 0, "create_time": "2025-08-28 11:47:54", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:48:46 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:46] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:48:47 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:47] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:47 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:47] 查询结果: [{"size": 1.0, "send_no": "8333369243697", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "8333369243697", "operation_type": 0, "create_time": "2025-08-28 11:47:54", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:48:47 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:48:47] 数据已稳定2秒（耗时7.3秒）| 结果数: 1
INFO     2025-08-28 11:48:47 [root;1306]  : 校验通过: 指令总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:48:47 [root;419]  : 指令总手数验证通过: 1.0
INFO     2025-08-28 11:48:47 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:48:47 [root;433]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:48:47 [lingkuan_refine.conftest;62]  : [2025-08-28 11:48:47] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_cloudTrader_cloudOrderClose 开始登录，环境: uat
INFO     2025-08-28 11:48:47 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 862001
INFO     2025-08-28 11:48:48 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:48:48 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:48:49 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:48:49] POST请求（JSON）: /bargain/masOrderClose | 数据: {'isCloseAll': 1, 'intervalTime': 100, 'traderList': [6667]}
INFO     2025-08-28 11:48:49 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:48:49] 请求后等待 1 秒
INFO     2025-08-28 11:48:50 [lingkuan_refine.conftest;157]  : [2025-08-28 11:48:50] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_open::test_cloudTrader_cloudOrderClose 执行完毕
INFO     2025-08-28 11:48:50 [lingkuan_refine.commons.api_base;950]  : [2025-08-28 11:48:50] 开始轮询（时区+05:00）| 超时: 30秒
INFO     2025-08-28 11:48:50 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:50] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:48:51 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:51] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:51 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:51] 查询结果: [{"size": 1.0, "close_no": "5802679433107", "magical": 550159, "open_price": 3389.77, "symbol": "XAUUSD", "order_no": 550160, "true_total_lots": 1.0, "foi.order_no": "5802679433107", "operation_type": 1, "create_time": "2025-08-28 11:48:47", "status": 0, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550159, "total_orders": 1}]
INFO     2025-08-28 11:48:53 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:53] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:48:54 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:54] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:54 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:54] 查询结果: [{"size": 1.0, "close_no": "5802679433107", "magical": 550159, "open_price": 3389.77, "symbol": "XAUUSD", "order_no": 550160, "true_total_lots": 1.0, "foi.order_no": "5802679433107", "operation_type": 1, "create_time": "2025-08-28 11:48:47", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550159, "total_orders": 1}]
INFO     2025-08-28 11:48:56 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:48:56] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:48:57 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:48:57] 查询成功，结果数量: 1
INFO     2025-08-28 11:48:57 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:48:57] 查询结果: [{"size": 1.0, "close_no": "5802679433107", "magical": 550159, "open_price": 3389.77, "symbol": "XAUUSD", "order_no": 550160, "true_total_lots": 1.0, "foi.order_no": "5802679433107", "operation_type": 1, "create_time": "2025-08-28 11:48:47", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550159, "total_orders": 1}]
INFO     2025-08-28 11:49:00 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:00] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:49:01 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:01] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:01 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:01] 查询结果: [{"size": 1.0, "close_no": "5802679433107", "magical": 550159, "open_price": 3389.77, "symbol": "XAUUSD", "order_no": 550160, "true_total_lots": 1.0, "foi.order_no": "5802679433107", "operation_type": 1, "create_time": "2025-08-28 11:48:47", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550159, "total_orders": 1}]
INFO     2025-08-28 11:49:01 [lingkuan_refine.commons.api_base;989]  : [2025-08-28 11:49:01] 数据稳定，轮询结束
INFO     2025-08-28 11:49:01 [root;1306]  : 校验通过: 订单状态应为0或1

实际: 1
操作: in
预期: (0, 1)

INFO     2025-08-28 11:49:01 [root;518]  : 订单状态验证通过: 1
INFO     2025-08-28 11:49:01 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:49:01 [root;532]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:49:26 [lingkuan_refine.conftest;62]  : [2025-08-28 11:49:26] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudBatchUpdate 开始登录，环境: uat
INFO     2025-08-28 11:49:26 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 208976
INFO     2025-08-28 11:49:27 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:49:27 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:49:27 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:49:27] POST请求（JSON）: /mascontrol/cloudTrader/cloudBatchUpdate | 数据: [{'traderList': [1537], 'cloudId': 109, 'masterId': 1535, 'masterAccount': '300160', 'followDirection': 0, 'followMode': 1, 'followParam': 1, 'remainder': 0, 'placedType': 0, 'templateId': 1, 'followStatus': 1, 'followOpen': 1, 'followClose': 0, 'fixedComment': 'ceshi', 'commentType': None, 'digits': 0, 'followTraderIds': [], 'sort': 100, 'remark': '', 'cfd': '', 'forex': ''}]
INFO     2025-08-28 11:49:27 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:49:27] 请求后等待 1 秒
INFO     2025-08-28 11:49:28 [lingkuan_refine.conftest;157]  : [2025-08-28 11:49:28] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudBatchUpdate 执行完毕
INFO     2025-08-28 11:49:29 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:49:29] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:49:29 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:29] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:49:29 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:29] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:29 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:29] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:49:25", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:49:31 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:31] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:49:31 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:31] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:31 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:31] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:49:25", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:49:33 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:33] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:49:33 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:33] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:33 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:33] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:49:25", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:49:33 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:49:33] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:49:33 [lingkuan_refine.conftest;62]  : [2025-08-28 11:49:33] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_bargain_masOrderSend 开始登录，环境: uat
INFO     2025-08-28 11:49:33 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 326012
INFO     2025-08-28 11:49:34 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:49:34 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:49:35 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:49:35] POST请求（JSON）: /bargain/masOrderSend | 数据: {'traderList': [6667], 'type': 0, 'tradeType': 1, 'intervalTime': 100, 'symbol': 'XAUUSD', 'placedType': 0, 'startSize': '0.10', 'endSize': '1.00', 'totalNum': '3', 'totalSzie': '1.00', 'remark': '测试交易下单数据'}
INFO     2025-08-28 11:49:35 [lingkuan_refine.conftest;157]  : [2025-08-28 11:49:35] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_bargain_masOrderSend 执行完毕
INFO     2025-08-28 11:49:35 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:49:35] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:49:35 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:35] 执行SQL:
                            SELECT 
                                fod.size,
                                fod.send_no,
                                fod.magical,
                                fod.open_price,
                                fod.symbol,
                                fod.order_no,
                                foi.true_total_lots,
                                foi.order_no,
                                foi.operation_type,
                                foi.create_time,
                                foi.status,
                                foi.min_lot_size,
                                foi.max_lot_size,
                                foi.total_lots,
                                foi.total_orders
                            FROM 
                                follow_order_detail fod
                            INNER JOIN 
                                follow_order_instruct foi 
                            ON 
                                foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                            WHERE foi.operation_type = %s
                                AND fod.account = %s
                                 AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:49:36 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:36] 查询成功，结果数量: 0
INFO     2025-08-28 11:49:36 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:36] 查询结果: []
INFO     2025-08-28 11:49:38 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:38] 执行SQL:
                            SELECT 
                                fod.size,
                                fod.send_no,
                                fod.magical,
                                fod.open_price,
                                fod.symbol,
                                fod.order_no,
                                foi.true_total_lots,
                                foi.order_no,
                                foi.operation_type,
                                foi.create_time,
                                foi.status,
                                foi.min_lot_size,
                                foi.max_lot_size,
                                foi.total_lots,
                                foi.total_orders
                            FROM 
                                follow_order_detail fod
                            INNER JOIN 
                                follow_order_instruct foi 
                            ON 
                                foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                            WHERE foi.operation_type = %s
                                AND fod.account = %s
                                 AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:49:39 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:39] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:39 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:39] 查询结果: [{"size": 1.0, "send_no": "0387570489371", "magical": 550161, "open_price": 3389.45, "symbol": "XAUUSD", "order_no": 550162, "true_total_lots": 1.0, "foi.order_no": "0387570489371", "operation_type": 0, "create_time": "2025-08-28 11:49:33", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:49:41 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:41] 执行SQL:
                            SELECT 
                                fod.size,
                                fod.send_no,
                                fod.magical,
                                fod.open_price,
                                fod.symbol,
                                fod.order_no,
                                foi.true_total_lots,
                                foi.order_no,
                                foi.operation_type,
                                foi.create_time,
                                foi.status,
                                foi.min_lot_size,
                                foi.max_lot_size,
                                foi.total_lots,
                                foi.total_orders
                            FROM 
                                follow_order_detail fod
                            INNER JOIN 
                                follow_order_instruct foi 
                            ON 
                                foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                            WHERE foi.operation_type = %s
                                AND fod.account = %s
                                 AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:49:43 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:43] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:43 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:43] 查询结果: [{"size": 1.0, "send_no": "0387570489371", "magical": 550161, "open_price": 3389.45, "symbol": "XAUUSD", "order_no": 550162, "true_total_lots": 1.0, "foi.order_no": "0387570489371", "operation_type": 0, "create_time": "2025-08-28 11:49:33", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:49:45 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:45] 执行SQL:
                            SELECT 
                                fod.size,
                                fod.send_no,
                                fod.magical,
                                fod.open_price,
                                fod.symbol,
                                fod.order_no,
                                foi.true_total_lots,
                                foi.order_no,
                                foi.operation_type,
                                foi.create_time,
                                foi.status,
                                foi.min_lot_size,
                                foi.max_lot_size,
                                foi.total_lots,
                                foi.total_orders
                            FROM 
                                follow_order_detail fod
                            INNER JOIN 
                                follow_order_instruct foi 
                            ON 
                                foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                            WHERE foi.operation_type = %s
                                AND fod.account = %s
                                 AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:49:46 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:46] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:46 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:46] 查询结果: [{"size": 1.0, "send_no": "0387570489371", "magical": 550161, "open_price": 3389.45, "symbol": "XAUUSD", "order_no": 550162, "true_total_lots": 1.0, "foi.order_no": "0387570489371", "operation_type": 0, "create_time": "2025-08-28 11:49:33", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:49:46 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:49:46] 数据已稳定2秒（耗时10.3秒）| 结果数: 1
INFO     2025-08-28 11:49:46 [root;1306]  : 校验通过: 指令总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:49:46 [root;716]  : 指令总手数验证通过: 1.0
INFO     2025-08-28 11:49:46 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:49:46 [root;730]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:49:46 [lingkuan_refine.conftest;62]  : [2025-08-28 11:49:46] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudOrderClose 开始登录，环境: uat
INFO     2025-08-28 11:49:46 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 326012
INFO     2025-08-28 11:49:47 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:49:47 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:49:48 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:49:48] POST请求（JSON）: /bargain/masOrderClose | 数据: {'isCloseAll': 1, 'intervalTime': 100, 'traderList': [6667]}
INFO     2025-08-28 11:49:48 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:49:48] 请求后等待 1 秒
INFO     2025-08-28 11:49:49 [lingkuan_refine.conftest;157]  : [2025-08-28 11:49:49] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudOrderClose 执行完毕
INFO     2025-08-28 11:49:49 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:49:49] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:49:49 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:49] 执行SQL:
                       SELECT 
                           fod.send_no,
                           fod.magical,
                           fod.remark,
                           fod.symbol,
                           fod.close_no,
                           fod.close_time,
                           fod.close_status,
                           fod.close_remark,
                           foi.true_total_lots,
                           foi.order_no,
                           foi.operation_type,
                           foi.create_time,
                           foi.status,
                           foi.master_order,
                           foi.cloud_account,
                           foi.total_orders
                       FROM 
                           follow_order_detail fod
                       INNER JOIN 
                           follow_order_instruct foi 
                       ON 
                           foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                       WHERE foi.operation_type = %s
                           AND foi.cloud_account = %s
                                                AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300160', 1, 1)
INFO     2025-08-28 11:49:51 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:51] 查询成功，结果数量: 2
INFO     2025-08-28 11:49:51 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:51] 查询结果: [{"send_no": "0387570489371", "magical": 550161, "remark": null, "symbol": "XAUUSD", "close_no": "3866693675063", "close_time": null, "close_status": 0, "close_remark": "未开通平仓状态", "true_total_lots": 1.0, "order_no": "3866693675063", "operation_type": 1, "create_time": "2025-08-28 11:49:46", "status": 2, "master_order": 550161, "cloud_account": "300160", "total_orders": 1}, {"send_no": "0", "magical": 550159, "remark": "补单成功", "symbol": "XAUUSD", "close_no": "5802679433107", "close_time": "2025-08-28 06:48:46", "close_status": 1, "close_remark": "", "true_total_lots": 1.0, "order_no": "5802679433107", "operation_type": 1, "create_time": "2025-08-28 11:48:47", "status": 1, "master_order": 550159, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:49:53 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:53] 执行SQL:
                       SELECT 
                           fod.send_no,
                           fod.magical,
                           fod.remark,
                           fod.symbol,
                           fod.close_no,
                           fod.close_time,
                           fod.close_status,
                           fod.close_remark,
                           foi.true_total_lots,
                           foi.order_no,
                           foi.operation_type,
                           foi.create_time,
                           foi.status,
                           foi.master_order,
                           foi.cloud_account,
                           foi.total_orders
                       FROM 
                           follow_order_detail fod
                       INNER JOIN 
                           follow_order_instruct foi 
                       ON 
                           foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                       WHERE foi.operation_type = %s
                           AND foi.cloud_account = %s
                                                AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300160', 1, 1)
INFO     2025-08-28 11:49:54 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:54] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:54 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:54] 查询结果: [{"send_no": "0387570489371", "magical": 550161, "remark": null, "symbol": "XAUUSD", "close_no": "3866693675063", "close_time": null, "close_status": 0, "close_remark": "未开通平仓状态", "true_total_lots": 1.0, "order_no": "3866693675063", "operation_type": 1, "create_time": "2025-08-28 11:49:46", "status": 2, "master_order": 550161, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:49:56 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:49:56] 执行SQL:
                       SELECT 
                           fod.send_no,
                           fod.magical,
                           fod.remark,
                           fod.symbol,
                           fod.close_no,
                           fod.close_time,
                           fod.close_status,
                           fod.close_remark,
                           foi.true_total_lots,
                           foi.order_no,
                           foi.operation_type,
                           foi.create_time,
                           foi.status,
                           foi.master_order,
                           foi.cloud_account,
                           foi.total_orders
                       FROM 
                           follow_order_detail fod
                       INNER JOIN 
                           follow_order_instruct foi 
                       ON 
                           foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                       WHERE foi.operation_type = %s
                           AND foi.cloud_account = %s
                                                AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300160', 1, 1)
INFO     2025-08-28 11:49:58 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:49:58] 查询成功，结果数量: 1
INFO     2025-08-28 11:49:58 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:49:58] 查询结果: [{"send_no": "0387570489371", "magical": 550161, "remark": null, "symbol": "XAUUSD", "close_no": "3866693675063", "close_time": null, "close_status": 0, "close_remark": "未开通平仓状态", "true_total_lots": 1.0, "order_no": "3866693675063", "operation_type": 1, "create_time": "2025-08-28 11:49:46", "status": 2, "master_order": 550161, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:50:00 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:00] 执行SQL:
                       SELECT 
                           fod.send_no,
                           fod.magical,
                           fod.remark,
                           fod.symbol,
                           fod.close_no,
                           fod.close_time,
                           fod.close_status,
                           fod.close_remark,
                           foi.true_total_lots,
                           foi.order_no,
                           foi.operation_type,
                           foi.create_time,
                           foi.status,
                           foi.master_order,
                           foi.cloud_account,
                           foi.total_orders
                       FROM 
                           follow_order_detail fod
                       INNER JOIN 
                           follow_order_instruct foi 
                       ON 
                           foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                       WHERE foi.operation_type = %s
                           AND foi.cloud_account = %s
                                                AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300160', 1, 1)
INFO     2025-08-28 11:50:01 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:01] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:01 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:01] 查询结果: [{"send_no": "0387570489371", "magical": 550161, "remark": null, "symbol": "XAUUSD", "close_no": "3866693675063", "close_time": null, "close_status": 0, "close_remark": "未开通平仓状态", "true_total_lots": 1.0, "order_no": "3866693675063", "operation_type": 1, "create_time": "2025-08-28 11:49:46", "status": 2, "master_order": 550161, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:50:01 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:50:01] 数据已稳定2秒（耗时12.3秒）| 结果数: 1
INFO     2025-08-28 11:50:01 [root;804]  : 出现漏平，平仓状态应该是0，实际是：0
INFO     2025-08-28 11:50:01 [root;808]  : 出现漏平，平仓异常信息应该是:平仓异常: 未开通平仓状态，实际是：未开通平仓状态
INFO     2025-08-28 11:50:02 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:50:02] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:50:02 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:02] 执行SQL:
                          SELECT * 
                          FROM follow_order_detail 
                          WHERE symbol LIKE %s 
                            AND source_user = %s
                            AND account = %s
                           AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:50:06 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:06] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:06 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:06] 查询结果: [{"id": 22700306, "symbol": "XAUUSD", "type": 0, "order_no": 550161, "send_no": "8030437306926", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:49:32", "request_open_price": 3389.51, "open_time": "2025-08-28 06:49:32", "response_open_time": "2025-08-28 11:49:32", "open_price": 3389.47, "open_price_slip": 0.36, "open_time_difference": 254, "request_close_time": "2025-08-28 11:49:45", "request_close_price": 3389.18, "close_time": "2025-08-28 06:49:45", "response_close_time": "2025-08-28 11:49:45", "close_price": 3389.21, "close_price_slip": 0.36, "close_time_difference": 306, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": -26.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:49:33", "updater": null, "update_time": "2025-08-28 11:49:47", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 1, "magical": 27895, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": "39.99.145.155", "close_server_name": "39.99.145.155-Allon专用张家口3", "close_server_host": "47.238.99.66:443", "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.04, "close_price_difference": -0.03, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": "1595587921360", "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:50:08 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:08] 执行SQL:
                          SELECT * 
                          FROM follow_order_detail 
                          WHERE symbol LIKE %s 
                            AND source_user = %s
                            AND account = %s
                           AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:50:12 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:12] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:12 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:12] 查询结果: [{"id": 22700306, "symbol": "XAUUSD", "type": 0, "order_no": 550161, "send_no": "8030437306926", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:49:32", "request_open_price": 3389.51, "open_time": "2025-08-28 06:49:32", "response_open_time": "2025-08-28 11:49:32", "open_price": 3389.47, "open_price_slip": 0.36, "open_time_difference": 254, "request_close_time": "2025-08-28 11:49:45", "request_close_price": 3389.18, "close_time": "2025-08-28 06:49:45", "response_close_time": "2025-08-28 11:49:45", "close_price": 3389.21, "close_price_slip": 0.36, "close_time_difference": 306, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": -26.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:49:33", "updater": null, "update_time": "2025-08-28 11:49:47", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 1, "magical": 27895, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": "39.99.145.155", "close_server_name": "39.99.145.155-Allon专用张家口3", "close_server_host": "47.238.99.66:443", "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.04, "close_price_difference": -0.03, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": "1595587921360", "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:50:14 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:14] 执行SQL:
                          SELECT * 
                          FROM follow_order_detail 
                          WHERE symbol LIKE %s 
                            AND source_user = %s
                            AND account = %s
                           AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:50:17 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:17] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:17 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:17] 查询结果: [{"id": 22700306, "symbol": "XAUUSD", "type": 0, "order_no": 550161, "send_no": "8030437306926", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:49:32", "request_open_price": 3389.51, "open_time": "2025-08-28 06:49:32", "response_open_time": "2025-08-28 11:49:32", "open_price": 3389.47, "open_price_slip": 0.36, "open_time_difference": 254, "request_close_time": "2025-08-28 11:49:45", "request_close_price": 3389.18, "close_time": "2025-08-28 06:49:45", "response_close_time": "2025-08-28 11:49:45", "close_price": 3389.21, "close_price_slip": 0.36, "close_time_difference": 306, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": -26.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:49:33", "updater": null, "update_time": "2025-08-28 11:49:47", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 1, "magical": 27895, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": "39.99.145.155", "close_server_name": "39.99.145.155-Allon专用张家口3", "close_server_host": "47.238.99.66:443", "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.04, "close_price_difference": -0.03, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": "1595587921360", "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:50:17 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:50:17] 数据已稳定2秒（耗时14.9秒）| 结果数: 1
INFO     2025-08-28 11:50:17 [root;851]  : 转换后的Redis数据: [{'order_no': 550161, 'magical': 27895, 'size': 1.0, 'open_price': 3389.47, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:50:17 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:50:17 [root;873]  : 数据库转换后: [{'order_no': 550161, 'magical': 27895, 'size': 1.0, 'open_price': 3389.47, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:50:17 [lingkuan_refine.conftest;62]  : [2025-08-28 11:50:17] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudBatchUpdate2 开始登录，环境: uat
INFO     2025-08-28 11:50:17 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 948006
INFO     2025-08-28 11:50:18 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:50:18 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:50:19 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:50:19] POST请求（JSON）: /mascontrol/cloudTrader/cloudBatchUpdate | 数据: [{'traderList': [1537], 'cloudId': 109, 'masterId': 1535, 'masterAccount': '300160', 'followDirection': 0, 'followMode': 1, 'followParam': 1, 'remainder': 0, 'placedType': 0, 'templateId': 1, 'followStatus': 1, 'followOpen': 1, 'followClose': 1, 'fixedComment': 'ceshi', 'commentType': None, 'digits': 0, 'followTraderIds': [], 'sort': 100, 'remark': '', 'cfd': '', 'forex': ''}]
INFO     2025-08-28 11:50:19 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:50:19] 请求后等待 1 秒
INFO     2025-08-28 11:50:20 [lingkuan_refine.conftest;157]  : [2025-08-28 11:50:20] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudBatchUpdate2 执行完毕
INFO     2025-08-28 11:50:20 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:50:20] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:50:20 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:20] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:50:20 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:20] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:20 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:20] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:50:17", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:50:23 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:23] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:50:23 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:23] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:23 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:23] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:50:17", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:50:25 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:25] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s and cloud_id = %s ORDER BY create_time DESC
参数: ('300162', 109)
INFO     2025-08-28 11:50:25 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:25] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:25 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:25] 查询结果: [{"id": 1537, "cloud_id": 109, "account": "300162", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7111, "template_id": 1, "remark": "", "source_type": 0, "account_status": 0, "running_status": 0, "type": 1, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:54", "updater": 10101, "update_time": "2025-08-28 11:50:17", "follow_mode": 1, "follow_param": 1.0, "follow_status": 1, "follow_open": 1, "follow_close": 1, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshi", "comment_type": null, "digits": 0, "cfd": "", "forex": "", "sort": 100, "master_id": 1535, "master_account": "300160", "follow_order_remark": 0}]
INFO     2025-08-28 11:50:25 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:50:25] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:50:25 [lingkuan_refine.conftest;62]  : [2025-08-28 11:50:25] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_follow_repairSend 开始登录，环境: uat
INFO     2025-08-28 11:50:25 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 948006
INFO     2025-08-28 11:50:26 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:50:26 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:50:27 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:50:27] POST请求（JSON）: /mascontrol/cloudTrader/batchRepairSend | 数据: [{'cloudId': 109, 'repairType': 1, 'masterId': 1535, 'slaveId': 1537, 'masterOrder': 364214}]
INFO     2025-08-28 11:50:27 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:50:27] 请求后等待 1 秒
INFO     2025-08-28 11:50:28 [lingkuan_refine.conftest;157]  : [2025-08-28 11:50:28] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_follow_repairSend 执行完毕
INFO     2025-08-28 11:50:28 [lingkuan_refine.conftest;62]  : [2025-08-28 11:50:28] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudOrderClose2 开始登录，环境: uat
INFO     2025-08-28 11:50:28 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 948006
INFO     2025-08-28 11:50:30 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:50:30 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:50:31 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:50:31] POST请求（JSON）: /bargain/masOrderClose | 数据: {'isCloseAll': 1, 'intervalTime': 100, 'traderList': [6667]}
INFO     2025-08-28 11:50:31 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:50:31] 请求后等待 1 秒
INFO     2025-08-28 11:50:32 [lingkuan_refine.conftest;157]  : [2025-08-28 11:50:32] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::TestcloudTrader_level::test_cloudTrader_cloudOrderClose2 执行完毕
INFO     2025-08-28 11:50:32 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:50:32] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:50:32 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:32] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.master_order = fod.magical COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:50:32 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:32] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:32 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:32] 查询结果: [{"size": 1.0, "close_no": "3866693675063", "magical": 550161, "open_price": 3389.45, "symbol": "XAUUSD", "order_no": 550162, "true_total_lots": 1.0, "foi.order_no": "3866693675063", "operation_type": 1, "create_time": "2025-08-28 11:49:46", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550161, "total_orders": 1}]
INFO     2025-08-28 11:50:34 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:34] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.master_order = fod.magical COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:50:34 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:34] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:34 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:34] 查询结果: [{"size": 1.0, "close_no": "3866693675063", "magical": 550161, "open_price": 3389.45, "symbol": "XAUUSD", "order_no": 550162, "true_total_lots": 1.0, "foi.order_no": "3866693675063", "operation_type": 1, "create_time": "2025-08-28 11:49:46", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550161, "total_orders": 1}]
INFO     2025-08-28 11:50:37 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:50:37] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.master_order = fod.magical COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:50:37 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:50:37] 查询成功，结果数量: 1
INFO     2025-08-28 11:50:37 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:50:37] 查询结果: [{"size": 1.0, "close_no": "3866693675063", "magical": 550161, "open_price": 3389.45, "symbol": "XAUUSD", "order_no": 550162, "true_total_lots": 1.0, "foi.order_no": "3866693675063", "operation_type": 1, "create_time": "2025-08-28 11:49:46", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550161, "total_orders": 1}]
INFO     2025-08-28 11:50:37 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:50:37] 数据已稳定2秒（耗时4.4秒）| 结果数: 1
INFO     2025-08-28 11:50:37 [root;1306]  : 校验通过: 指令总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:50:37 [root;1072]  : 指令总手数验证通过: 1.0
INFO     2025-08-28 11:50:37 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:50:37 [root;1086]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:51:02 [lingkuan_refine.conftest;62]  : [2025-08-28 11:51:02] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_mascontrol_cloudTrader 开始登录，环境: uat
INFO     2025-08-28 11:51:02 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 871525
INFO     2025-08-28 11:51:03 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:51:03 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:51:05 [lingkuan_refine.commons.api_base;280]  : [2025-08-28 11:51:05] PUT请求: /mascontrol/cloudTrader | 数据: {'id': 1535, 'cloudId': 109, 'sourceType': 0, 'remark': '测试数据', 'runningStatus': 1, 'followOrderRemark': 1, 'traderId': 7109, 'managerIp': None, 'managerAccount': None, 'account': '300160', 'platform': 'FXAdamantStone-Real', 'templateId': None, 'fixedComment': 'ceshiceluebeizhu', 'commentType': None, 'digits': 0}
INFO     2025-08-28 11:51:06 [lingkuan_refine.conftest;157]  : [2025-08-28 11:51:06] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_mascontrol_cloudTrader 执行完毕
INFO     2025-08-28 11:51:06 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:51:06] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:51:06 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:06] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s ORDER BY create_time DESC
参数: ('300160',)
INFO     2025-08-28 11:51:06 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:06] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:06 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:06] 查询结果: [{"id": 1535, "cloud_id": 109, "account": "300160", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7109, "template_id": null, "remark": "测试数据", "source_type": 0, "account_status": 0, "running_status": 1, "type": 0, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:45", "updater": 10101, "update_time": "2025-08-28 11:51:01", "follow_mode": 0, "follow_param": 0.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshiceluebeizhu", "comment_type": null, "digits": 0, "cfd": null, "forex": null, "sort": 1, "master_id": null, "master_account": null, "follow_order_remark": 1}]
INFO     2025-08-28 11:51:08 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:08] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s ORDER BY create_time DESC
参数: ('300160',)
INFO     2025-08-28 11:51:09 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:09] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:09 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:09] 查询结果: [{"id": 1535, "cloud_id": 109, "account": "300160", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7109, "template_id": null, "remark": "测试数据", "source_type": 0, "account_status": 0, "running_status": 1, "type": 0, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:45", "updater": 10101, "update_time": "2025-08-28 11:51:01", "follow_mode": 0, "follow_param": 0.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshiceluebeizhu", "comment_type": null, "digits": 0, "cfd": null, "forex": null, "sort": 1, "master_id": null, "master_account": null, "follow_order_remark": 1}]
INFO     2025-08-28 11:51:11 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:11] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s ORDER BY create_time DESC
参数: ('300160',)
INFO     2025-08-28 11:51:11 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:11] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:11 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:11] 查询结果: [{"id": 1535, "cloud_id": 109, "account": "300160", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7109, "template_id": null, "remark": "测试数据", "source_type": 0, "account_status": 0, "running_status": 1, "type": 0, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:45", "updater": 10101, "update_time": "2025-08-28 11:51:01", "follow_mode": 0, "follow_param": 0.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshiceluebeizhu", "comment_type": null, "digits": 0, "cfd": null, "forex": null, "sort": 1, "master_id": null, "master_account": null, "follow_order_remark": 1}]
INFO     2025-08-28 11:51:11 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:51:11] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:51:11 [lingkuan_refine.conftest;62]  : [2025-08-28 11:51:11] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_bargain_masOrderSend 开始登录，环境: uat
INFO     2025-08-28 11:51:11 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 871525
INFO     2025-08-28 11:51:12 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:51:12 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:51:12 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:51:12] POST请求（JSON）: /bargain/masOrderSend | 数据: {'traderList': [6667], 'type': 0, 'tradeType': 1, 'intervalTime': 100, 'symbol': 'XAUUSD', 'placedType': 0, 'startSize': '0.10', 'endSize': '1.00', 'totalNum': '3', 'totalSzie': '1.00', 'remark': '测试交易下单数据'}
INFO     2025-08-28 11:51:12 [lingkuan_refine.conftest;157]  : [2025-08-28 11:51:12] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_bargain_masOrderSend 执行完毕
INFO     2025-08-28 11:51:13 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:51:13] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:51:13 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:13] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:51:16 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:16] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:16 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:16] 查询结果: [{"send_no": "1039915657859", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "1039915657859", "operation_type": 0, "create_time": "2025-08-28 11:51:11", "status": 0, "master_order": 550163, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:51:18 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:18] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:51:20 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:20] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:20 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:20] 查询结果: [{"send_no": "1039915657859", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "1039915657859", "operation_type": 0, "create_time": "2025-08-28 11:51:11", "status": 2, "master_order": 550163, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:51:22 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:22] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:51:25 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:25] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:25 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:25] 查询结果: [{"send_no": "1039915657859", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "1039915657859", "operation_type": 0, "create_time": "2025-08-28 11:51:11", "status": 2, "master_order": 550163, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:51:27 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:27] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:51:30 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:30] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:30 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:30] 查询结果: [{"send_no": "1039915657859", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "1039915657859", "operation_type": 0, "create_time": "2025-08-28 11:51:11", "status": 2, "master_order": 550163, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:51:30 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:51:30] 数据已稳定2秒（耗时16.9秒）| 结果数: 1
INFO     2025-08-28 11:51:30 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:51:31 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:51:31] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:51:31 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:31] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:51:34 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:34] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:34 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:34] 查询结果: [{"id": 22700308, "symbol": "XAUUSD", "type": 0, "order_no": 550163, "send_no": "2860369564623", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:51:10", "request_open_price": 3389.27, "open_time": "2025-08-28 06:51:10", "response_open_time": "2025-08-28 11:51:10", "open_price": 3389.25, "open_price_slip": 0.36, "open_time_difference": 237, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:51:11", "updater": null, "update_time": "2025-08-28 11:51:12", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 79335, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.02, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:51:36 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:36] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:51:39 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:39] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:39 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:39] 查询结果: [{"id": 22700308, "symbol": "XAUUSD", "type": 0, "order_no": 550163, "send_no": "2860369564623", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:51:10", "request_open_price": 3389.27, "open_time": "2025-08-28 06:51:10", "response_open_time": "2025-08-28 11:51:10", "open_price": 3389.25, "open_price_slip": 0.36, "open_time_difference": 237, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:51:11", "updater": null, "update_time": "2025-08-28 11:51:12", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 79335, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.02, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:51:41 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:41] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:51:45 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:45] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:45 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:45] 查询结果: [{"id": 22700308, "symbol": "XAUUSD", "type": 0, "order_no": 550163, "send_no": "2860369564623", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:51:10", "request_open_price": 3389.27, "open_time": "2025-08-28 06:51:10", "response_open_time": "2025-08-28 11:51:10", "open_price": 3389.25, "open_price_slip": 0.36, "open_time_difference": 237, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:51:11", "updater": null, "update_time": "2025-08-28 11:51:12", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 79335, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": -0.02, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:51:45 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:51:45] 数据已稳定2秒（耗时14.2秒）| 结果数: 1
INFO     2025-08-28 11:51:45 [root;1289]  : 转换后的Redis数据: [{'order_no': 550163, 'magical': 79335, 'size': 1.0, 'open_price': 3389.25, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:51:45 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:51:45 [root;1311]  : 数据库转换后: [{'order_no': 550163, 'magical': 79335, 'size': 1.0, 'open_price': 3389.25, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:51:45 [lingkuan_refine.conftest;62]  : [2025-08-28 11:51:45] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_mascontrol_cloudTrader2 开始登录，环境: uat
INFO     2025-08-28 11:51:45 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 409195
INFO     2025-08-28 11:51:46 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:51:46 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:51:47 [lingkuan_refine.commons.api_base;280]  : [2025-08-28 11:51:47] PUT请求: /mascontrol/cloudTrader | 数据: {'id': 1535, 'cloudId': 109, 'sourceType': 0, 'remark': '测试数据', 'runningStatus': 0, 'followOrderRemark': 1, 'traderId': 7109, 'managerIp': None, 'managerAccount': None, 'account': '300160', 'platform': 'FXAdamantStone-Real', 'templateId': None, 'fixedComment': 'ceshiceluebeizhu', 'commentType': None, 'digits': 0}
INFO     2025-08-28 11:51:48 [lingkuan_refine.conftest;157]  : [2025-08-28 11:51:48] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_mascontrol_cloudTrader2 执行完毕
INFO     2025-08-28 11:51:48 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:51:48] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:51:48 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:48] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s ORDER BY create_time DESC
参数: ('300160',)
INFO     2025-08-28 11:51:48 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:48] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:48 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:48] 查询结果: [{"id": 1535, "cloud_id": 109, "account": "300160", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7109, "template_id": null, "remark": "测试数据", "source_type": 0, "account_status": 0, "running_status": 0, "type": 0, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:45", "updater": 10101, "update_time": "2025-08-28 11:51:44", "follow_mode": 0, "follow_param": 0.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshiceluebeizhu", "comment_type": null, "digits": 0, "cfd": null, "forex": null, "sort": 1, "master_id": null, "master_account": null, "follow_order_remark": 1}]
INFO     2025-08-28 11:51:50 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:50] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s ORDER BY create_time DESC
参数: ('300160',)
INFO     2025-08-28 11:51:50 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:50] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:50 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:50] 查询结果: [{"id": 1535, "cloud_id": 109, "account": "300160", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7109, "template_id": null, "remark": "测试数据", "source_type": 0, "account_status": 0, "running_status": 0, "type": 0, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:45", "updater": 10101, "update_time": "2025-08-28 11:51:44", "follow_mode": 0, "follow_param": 0.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshiceluebeizhu", "comment_type": null, "digits": 0, "cfd": null, "forex": null, "sort": 1, "master_id": null, "master_account": null, "follow_order_remark": 1}]
INFO     2025-08-28 11:51:52 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:52] 执行SQL: SELECT * FROM follow_cloud_trader WHERE account = %s ORDER BY create_time DESC
参数: ('300160',)
INFO     2025-08-28 11:51:53 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:53] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:53 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:53] 查询结果: [{"id": 1535, "cloud_id": 109, "account": "300160", "platform": "FXAdamantStone-Real", "manager_ip": null, "manager_account": null, "manager_password": null, "trader_id": 7109, "template_id": null, "remark": "测试数据", "source_type": 0, "account_status": 0, "running_status": 0, "type": 0, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:45", "updater": 10101, "update_time": "2025-08-28 11:51:44", "follow_mode": 0, "follow_param": 0.0, "follow_status": 1, "follow_open": 1, "follow_close": 0, "placed_type": 0, "follow_direction": 0, "remainder": 0, "fixed_comment": "ceshiceluebeizhu", "comment_type": null, "digits": 0, "cfd": null, "forex": null, "sort": 1, "master_id": null, "master_account": null, "follow_order_remark": 1}]
INFO     2025-08-28 11:51:53 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:51:53] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:51:53 [lingkuan_refine.conftest;62]  : [2025-08-28 11:51:53] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_follow_repairSend 开始登录，环境: uat
INFO     2025-08-28 11:51:53 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 409195
INFO     2025-08-28 11:51:53 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:51:53 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:51:54 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:51:54] POST请求（JSON）: /mascontrol/cloudTrader/batchRepairSend | 数据: [{'cloudId': 109, 'repairType': 0, 'masterId': 1535, 'slaveId': 1537, 'masterOrder': 550163}]
INFO     2025-08-28 11:51:54 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:51:54] 请求后等待 1 秒
INFO     2025-08-28 11:51:55 [lingkuan_refine.conftest;157]  : [2025-08-28 11:51:55] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_follow_repairSend 执行完毕
INFO     2025-08-28 11:51:55 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:51:55] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:51:55 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:55] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:51:56 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:56] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:56 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:56] 查询结果: [{"size": 1.0, "send_no": "1039915657859", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "1039915657859", "operation_type": 0, "create_time": "2025-08-28 11:51:11", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:51:59 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:51:59] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:51:59 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:51:59] 查询成功，结果数量: 1
INFO     2025-08-28 11:51:59 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:51:59] 查询结果: [{"size": 1.0, "send_no": "1039915657859", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "1039915657859", "operation_type": 0, "create_time": "2025-08-28 11:51:11", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:52:02 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:02] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:52:03 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:03] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:03 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:03] 查询结果: [{"size": 1.0, "send_no": "1039915657859", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "1039915657859", "operation_type": 0, "create_time": "2025-08-28 11:51:11", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:52:03 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:52:03] 数据已稳定2秒（耗时7.2秒）| 结果数: 1
INFO     2025-08-28 11:52:03 [root;1306]  : 校验通过: 指令总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:52:03 [root;1471]  : 指令总手数验证通过: 1.0
INFO     2025-08-28 11:52:03 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:52:03 [root;1485]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:52:03 [lingkuan_refine.conftest;62]  : [2025-08-28 11:52:03] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_cloudTrader_cloudOrderClose 开始登录，环境: uat
INFO     2025-08-28 11:52:03 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 894051
INFO     2025-08-28 11:52:04 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:52:04 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:52:05 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:52:05] POST请求（JSON）: /bargain/masOrderClose | 数据: {'isCloseAll': 1, 'intervalTime': 100, 'traderList': [6667]}
INFO     2025-08-28 11:52:05 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:52:05] 请求后等待 1 秒
INFO     2025-08-28 11:52:06 [lingkuan_refine.conftest;157]  : [2025-08-28 11:52:06] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_addstatus::test_cloudTrader_cloudOrderClose 执行完毕
INFO     2025-08-28 11:52:06 [lingkuan_refine.commons.api_base;950]  : [2025-08-28 11:52:06] 开始轮询（时区+05:00）| 超时: 30秒
INFO     2025-08-28 11:52:06 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:06] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:52:07 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:07] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:07 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:07] 查询结果: [{"size": 1.0, "close_no": "2700196467086", "magical": 550163, "open_price": 3389.3, "symbol": "XAUUSD", "order_no": 550164, "true_total_lots": 1.0, "foi.order_no": "2700196467086", "operation_type": 1, "create_time": "2025-08-28 11:52:03", "status": 0, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550163, "total_orders": 1}]
INFO     2025-08-28 11:52:09 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:09] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:52:10 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:10] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:10 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:10] 查询结果: [{"size": 1.0, "close_no": "2700196467086", "magical": 550163, "open_price": 3389.3, "symbol": "XAUUSD", "order_no": 550164, "true_total_lots": 1.0, "foi.order_no": "2700196467086", "operation_type": 1, "create_time": "2025-08-28 11:52:03", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550163, "total_orders": 1}]
INFO     2025-08-28 11:52:12 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:12] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:52:13 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:13] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:13 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:13] 查询结果: [{"size": 1.0, "close_no": "2700196467086", "magical": 550163, "open_price": 3389.3, "symbol": "XAUUSD", "order_no": 550164, "true_total_lots": 1.0, "foi.order_no": "2700196467086", "operation_type": 1, "create_time": "2025-08-28 11:52:03", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550163, "total_orders": 1}]
INFO     2025-08-28 11:52:15 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:15] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:52:17 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:17] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:17 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:17] 查询结果: [{"size": 1.0, "close_no": "2700196467086", "magical": 550163, "open_price": 3389.3, "symbol": "XAUUSD", "order_no": 550164, "true_total_lots": 1.0, "foi.order_no": "2700196467086", "operation_type": 1, "create_time": "2025-08-28 11:52:03", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550163, "total_orders": 1}]
INFO     2025-08-28 11:52:17 [lingkuan_refine.commons.api_base;989]  : [2025-08-28 11:52:17] 数据稳定，轮询结束
INFO     2025-08-28 11:52:17 [root;1306]  : 校验通过: 订单状态应为0或1

实际: 1
操作: in
预期: (0, 1)

INFO     2025-08-28 11:52:17 [root;1570]  : 订单状态验证通过: 1
INFO     2025-08-28 11:52:17 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:52:17 [root;1584]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:52:42 [lingkuan_refine.conftest;62]  : [2025-08-28 11:52:42] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_mascontrol_cloudMaster 开始登录，环境: uat
INFO     2025-08-28 11:52:42 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 476390
INFO     2025-08-28 11:52:43 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:52:43 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:52:43 [lingkuan_refine.commons.api_base;280]  : [2025-08-28 11:52:43] PUT请求: /mascontrol/cloudMaster | 数据: {'id': 109, 'name': '自动化测试', 'type': 0, 'remark': None, 'status': 1, 'groupId': 351, 'sort': None, 'isMonitorRepair': 1, 'isAutoRepair': 1}
INFO     2025-08-28 11:52:45 [lingkuan_refine.conftest;157]  : [2025-08-28 11:52:45] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_mascontrol_cloudMaster 执行完毕
INFO     2025-08-28 11:52:45 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:52:45] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:52:45 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:45] 执行SQL: SELECT * FROM follow_cloud_master WHERE name = %s ORDER BY create_time DESC
参数: ('自动化测试',)
INFO     2025-08-28 11:52:45 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:45] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:45 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:45] 查询结果: [{"id": 109, "name": "自动化测试", "type": 0, "status": 1, "remark": null, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:41", "updater": 10101, "update_time": "2025-08-28 11:52:41", "start_time": "2025-08-28 11:52:41", "sort": null, "group_id": "351", "is_monitor_repair": 1, "is_auto_repair": 1, "single_miss": 0}]
INFO     2025-08-28 11:52:47 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:47] 执行SQL: SELECT * FROM follow_cloud_master WHERE name = %s ORDER BY create_time DESC
参数: ('自动化测试',)
INFO     2025-08-28 11:52:47 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:47] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:47 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:47] 查询结果: [{"id": 109, "name": "自动化测试", "type": 0, "status": 1, "remark": null, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:41", "updater": 10101, "update_time": "2025-08-28 11:52:41", "start_time": "2025-08-28 11:52:41", "sort": null, "group_id": "351", "is_monitor_repair": 1, "is_auto_repair": 1, "single_miss": 0}]
INFO     2025-08-28 11:52:49 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:49] 执行SQL: SELECT * FROM follow_cloud_master WHERE name = %s ORDER BY create_time DESC
参数: ('自动化测试',)
INFO     2025-08-28 11:52:49 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:49] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:49 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:49] 查询结果: [{"id": 109, "name": "自动化测试", "type": 0, "status": 1, "remark": null, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:41", "updater": 10101, "update_time": "2025-08-28 11:52:41", "start_time": "2025-08-28 11:52:41", "sort": null, "group_id": "351", "is_monitor_repair": 1, "is_auto_repair": 1, "single_miss": 0}]
INFO     2025-08-28 11:52:49 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:52:49] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:52:49 [lingkuan_refine.conftest;62]  : [2025-08-28 11:52:49] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_bargain_masOrderSend 开始登录，环境: uat
INFO     2025-08-28 11:52:49 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 476390
INFO     2025-08-28 11:52:51 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:52:51 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:52:51 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:52:51] POST请求（JSON）: /bargain/masOrderSend | 数据: {'traderList': [6667], 'type': 0, 'tradeType': 1, 'intervalTime': 100, 'symbol': 'XAUUSD', 'placedType': 0, 'startSize': '0.10', 'endSize': '1.00', 'totalNum': '3', 'totalSzie': '1.00', 'remark': '测试交易下单数据'}
INFO     2025-08-28 11:52:51 [lingkuan_refine.conftest;157]  : [2025-08-28 11:52:51] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_bargain_masOrderSend 执行完毕
INFO     2025-08-28 11:52:52 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:52:52] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:52:52 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:52] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:52:54 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:54] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:54 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:54] 查询结果: [{"send_no": "3116019513718", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "3116019513718", "operation_type": 0, "create_time": "2025-08-28 11:52:49", "status": 0, "master_order": 550165, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:52:56 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:52:56] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:52:59 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:52:59] 查询成功，结果数量: 1
INFO     2025-08-28 11:52:59 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:52:59] 查询结果: [{"send_no": "3116019513718", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "3116019513718", "operation_type": 0, "create_time": "2025-08-28 11:52:49", "status": 2, "master_order": 550165, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:53:01 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:01] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:53:04 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:04] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:04 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:04] 查询结果: [{"send_no": "3116019513718", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "3116019513718", "operation_type": 0, "create_time": "2025-08-28 11:52:49", "status": 2, "master_order": 550165, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:53:06 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:06] 执行SQL:
                    SELECT 
                        fod.send_no,
                        fod.magical,
                        fod.remark,
                        fod.symbol,
                        fod.order_no,
                        foi.true_total_lots,
                        foi.order_no,
                        foi.operation_type,
                        foi.create_time,
                        foi.status,
                        foi.master_order,
                        foi.cloud_account,
                        foi.total_orders
                    FROM 
                        follow_order_detail fod
                    INNER JOIN 
                        follow_order_instruct foi 
                    ON 
                        foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                    WHERE foi.operation_type = %s
                        AND foi.cloud_account = %s
                                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300160', 1, 1)
INFO     2025-08-28 11:53:09 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:09] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:09 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:09] 查询结果: [{"send_no": "3116019513718", "magical": null, "remark": "未开通下单状态", "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "3116019513718", "operation_type": 0, "create_time": "2025-08-28 11:52:49", "status": 2, "master_order": 550165, "cloud_account": "300160", "total_orders": 1}]
INFO     2025-08-28 11:53:09 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:53:09] 数据已稳定2秒（耗时17.1秒）| 结果数: 1
INFO     2025-08-28 11:53:09 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:53:09 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:53:09] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:53:10 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:10] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:53:13 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:13] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:13 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:13] 查询结果: [{"id": 22700311, "symbol": "XAUUSD", "type": 0, "order_no": 550165, "send_no": "9534532958746", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:52:48", "request_open_price": 3389.57, "open_time": "2025-08-28 06:52:49", "response_open_time": "2025-08-28 11:52:49", "open_price": 3389.57, "open_price_slip": 0.33, "open_time_difference": 269, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:52:49", "updater": null, "update_time": "2025-08-28 11:52:50", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 59014, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": 0.0, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:53:15 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:15] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:53:19 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:19] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:19 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:19] 查询结果: [{"id": 22700311, "symbol": "XAUUSD", "type": 0, "order_no": 550165, "send_no": "9534532958746", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:52:48", "request_open_price": 3389.57, "open_time": "2025-08-28 06:52:49", "response_open_time": "2025-08-28 11:52:49", "open_price": 3389.57, "open_price_slip": 0.33, "open_time_difference": 269, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:52:49", "updater": null, "update_time": "2025-08-28 11:52:50", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 59014, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": 0.0, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:53:21 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:21] 执行SQL:
                               SELECT * 
                               FROM follow_order_detail 
                               WHERE symbol LIKE %s 
                                 AND source_user = %s
                                 AND account = %s
                                AND  create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('%XAUUSD%', '300160', '300160', 1, 1)
INFO     2025-08-28 11:53:25 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:25] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:25 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:25] 查询结果: [{"id": 22700311, "symbol": "XAUUSD", "type": 0, "order_no": 550165, "send_no": "9534532958746", "trader_id": 7109, "account": "300160", "request_open_time": "2025-08-28 11:52:48", "request_open_price": 3389.57, "open_time": "2025-08-28 06:52:49", "response_open_time": "2025-08-28 11:52:49", "open_price": 3389.57, "open_price_slip": 0.33, "open_time_difference": 269, "request_close_time": null, "request_close_price": null, "close_time": null, "response_close_time": null, "close_price": null, "close_price_slip": null, "close_time_difference": null, "size": 1.0, "tp": 0.0, "sl": 0.0, "commission": 0.0, "swap": 0.0, "profit": 0.0, "remark": null, "version": 0, "deleted": 0, "creator": null, "create_time": "2025-08-28 11:52:49", "updater": null, "update_time": "2025-08-28 11:52:50", "placed_type": 0, "broker_name": "AS", "server": "FXAdamantStone-Real", "ip_addr": "39.99.145.155", "server_name": "39.99.145.155-Allon专用张家口3", "close_id": null, "close_status": 0, "magical": 59014, "source_user": "300160", "rate_margin": 1.0, "server_host": "47.238.99.66:443", "close_ip_addr": null, "close_server_name": null, "close_server_host": null, "is_external": 0, "ordering_system": null, "comment": "测试交易下单数据", "open_price_difference": 0.0, "close_price_difference": null, "cloud_id": null, "cloud_name": null, "cloud_trader_id": null, "close_no": null, "close_remark": null, "ordering_type": 2, "send_mas_difference": null, "close_mas_difference": null}]
INFO     2025-08-28 11:53:25 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:53:25] 数据已稳定2秒（耗时15.5秒）| 结果数: 1
INFO     2025-08-28 11:53:25 [root;1777]  : 转换后的Redis数据: [{'order_no': 550165, 'magical': 59014, 'size': 1.0, 'open_price': 3389.57, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:53:25 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:53:25 [root;1799]  : 数据库转换后: [{'order_no': 550165, 'magical': 59014, 'size': 1.0, 'open_price': 3389.57, 'symbol': 'XAUUSD'}]
INFO     2025-08-28 11:53:25 [lingkuan_refine.conftest;62]  : [2025-08-28 11:53:25] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_mascontrol_cloudMaster2 开始登录，环境: uat
INFO     2025-08-28 11:53:25 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 745069
INFO     2025-08-28 11:53:27 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:53:27 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:53:28 [lingkuan_refine.commons.api_base;280]  : [2025-08-28 11:53:28] PUT请求: /mascontrol/cloudMaster | 数据: {'id': 109, 'name': '自动化测试', 'type': 0, 'remark': None, 'status': 0, 'groupId': 351, 'sort': None, 'isMonitorRepair': 1, 'isAutoRepair': 1}
INFO     2025-08-28 11:53:29 [lingkuan_refine.conftest;157]  : [2025-08-28 11:53:29] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_mascontrol_cloudMaster2 执行完毕
INFO     2025-08-28 11:53:29 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:53:29] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:53:29 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:29] 执行SQL: SELECT * FROM follow_cloud_master WHERE name = %s ORDER BY create_time DESC
参数: ('自动化测试',)
INFO     2025-08-28 11:53:29 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:29] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:29 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:29] 查询结果: [{"id": 109, "name": "自动化测试", "type": 0, "status": 0, "remark": null, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:41", "updater": 10101, "update_time": "2025-08-28 11:53:25", "start_time": "2025-08-28 11:53:25", "sort": null, "group_id": "351", "is_monitor_repair": 1, "is_auto_repair": 1, "single_miss": 0}]
INFO     2025-08-28 11:53:31 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:31] 执行SQL: SELECT * FROM follow_cloud_master WHERE name = %s ORDER BY create_time DESC
参数: ('自动化测试',)
INFO     2025-08-28 11:53:31 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:31] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:31 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:31] 查询结果: [{"id": 109, "name": "自动化测试", "type": 0, "status": 0, "remark": null, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:41", "updater": 10101, "update_time": "2025-08-28 11:53:25", "start_time": "2025-08-28 11:53:25", "sort": null, "group_id": "351", "is_monitor_repair": 1, "is_auto_repair": 1, "single_miss": 0}]
INFO     2025-08-28 11:53:33 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:33] 执行SQL: SELECT * FROM follow_cloud_master WHERE name = %s ORDER BY create_time DESC
参数: ('自动化测试',)
INFO     2025-08-28 11:53:34 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:34] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:34 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:34] 查询结果: [{"id": 109, "name": "自动化测试", "type": 0, "status": 0, "remark": null, "version": 0, "deleted": 0, "creator": 10101, "create_time": "2025-08-28 09:32:41", "updater": 10101, "update_time": "2025-08-28 11:53:25", "start_time": "2025-08-28 11:53:25", "sort": null, "group_id": "351", "is_monitor_repair": 1, "is_auto_repair": 1, "single_miss": 0}]
INFO     2025-08-28 11:53:34 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:53:34] 数据已稳定2秒（耗时4.3秒）| 结果数: 1
INFO     2025-08-28 11:53:34 [lingkuan_refine.conftest;62]  : [2025-08-28 11:53:34] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_follow_repairSend 开始登录，环境: uat
INFO     2025-08-28 11:53:34 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 345594
INFO     2025-08-28 11:53:35 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:53:35 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:53:35 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:53:35] POST请求（JSON）: /mascontrol/cloudTrader/batchRepairSend | 数据: [{'cloudId': 109, 'repairType': 0, 'masterId': 1535, 'slaveId': 1537, 'masterOrder': 550165}]
INFO     2025-08-28 11:53:35 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:53:35] 请求后等待 1 秒
INFO     2025-08-28 11:53:36 [lingkuan_refine.conftest;157]  : [2025-08-28 11:53:36] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_follow_repairSend 执行完毕
INFO     2025-08-28 11:53:37 [lingkuan_refine.commons.api_base;533]  : [2025-08-28 11:53:37] 开始轮询等待数据稳定 | 超时: 30秒 | 稳定期: 2秒
INFO     2025-08-28 11:53:37 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:37] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:53:38 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:38] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:38 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:38] 查询结果: [{"size": 1.0, "send_no": "3116019513718", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "3116019513718", "operation_type": 0, "create_time": "2025-08-28 11:52:49", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:53:40 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:40] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:53:41 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:41] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:41 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:41] 查询结果: [{"size": 1.0, "send_no": "3116019513718", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "3116019513718", "operation_type": 0, "create_time": "2025-08-28 11:52:49", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:53:43 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:43] 执行SQL:
                        SELECT 
                            fod.size,
                            fod.send_no,
                            fod.magical,
                            fod.open_price,
                            fod.symbol,
                            fod.order_no,
                            foi.true_total_lots,
                            foi.order_no,
                            foi.operation_type,
                            foi.create_time,
                            foi.status,
                            foi.min_lot_size,
                            foi.max_lot_size,
                            foi.total_lots,
                            foi.total_orders
                        FROM 
                            follow_order_detail fod
                        INNER JOIN 
                            follow_order_instruct foi 
                        ON 
                            foi.order_no = fod.send_no COLLATE utf8mb4_0900_ai_ci
                        WHERE foi.operation_type = %s
                            AND fod.account = %s
                             AND  foi.create_time BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('0', '300162', 1, 1)
INFO     2025-08-28 11:53:44 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:44] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:44 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:44] 查询结果: [{"size": 1.0, "send_no": "3116019513718", "magical": null, "open_price": null, "symbol": "XAUUSD", "order_no": null, "true_total_lots": 1.0, "foi.order_no": "3116019513718", "operation_type": 0, "create_time": "2025-08-28 11:52:49", "status": 2, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "total_orders": 1}]
INFO     2025-08-28 11:53:44 [lingkuan_refine.commons.api_base;574]  : [2025-08-28 11:53:44] 数据已稳定2秒（耗时7.1秒）| 结果数: 1
INFO     2025-08-28 11:53:44 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:53:44 [root;1950]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:53:44 [lingkuan_refine.test_cloudTrader.test_cloudOrder_open_level;1960]  : 手数一致: 详情[1.0], 指令[1.0]
INFO     2025-08-28 11:53:44 [lingkuan_refine.conftest;62]  : [2025-08-28 11:53:44] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_cloudTrader_cloudOrderClose 开始登录，环境: uat
INFO     2025-08-28 11:53:44 [lingkuan_refine.conftest;100]  : UAT登录尝试 1/5，MFA验证码: 345594
INFO     2025-08-28 11:53:46 [lingkuan_refine.conftest;124]  : UAT登录成功（第1次尝试）
INFO     2025-08-28 11:53:46 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:53:46 [lingkuan_refine.commons.api_base;152]  : [2025-08-28 11:53:46] POST请求（JSON）: /bargain/masOrderClose | 数据: {'isCloseAll': 1, 'intervalTime': 100, 'traderList': [6667]}
INFO     2025-08-28 11:53:46 [lingkuan_refine.commons.api_base;160]  : [2025-08-28 11:53:46] 请求后等待 1 秒
INFO     2025-08-28 11:53:47 [lingkuan_refine.conftest;157]  : [2025-08-28 11:53:47] 用例 test_cloudTrader/test_cloudOrder_open_level.py::TestcloudTrader_openandlevel::Testcloudstargy_status::test_cloudTrader_cloudOrderClose 执行完毕
INFO     2025-08-28 11:53:48 [lingkuan_refine.commons.api_base;950]  : [2025-08-28 11:53:48] 开始轮询（时区+05:00）| 超时: 30秒
INFO     2025-08-28 11:53:48 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:48] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:53:49 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:49] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:49 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:49] 查询结果: [{"size": 1.0, "close_no": "1871085626291", "magical": 550165, "open_price": 3389.67, "symbol": "XAUUSD", "order_no": 550166, "true_total_lots": 1.0, "foi.order_no": "1871085626291", "operation_type": 1, "create_time": "2025-08-28 11:53:44", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550165, "total_orders": 1}]
INFO     2025-08-28 11:53:51 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:51] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:53:52 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:52] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:52 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:52] 查询结果: [{"size": 1.0, "close_no": "1871085626291", "magical": 550165, "open_price": 3389.67, "symbol": "XAUUSD", "order_no": 550166, "true_total_lots": 1.0, "foi.order_no": "1871085626291", "operation_type": 1, "create_time": "2025-08-28 11:53:44", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550165, "total_orders": 1}]
INFO     2025-08-28 11:53:54 [lingkuan_refine.commons.api_base;451]  : [2025-08-28 11:53:54] 执行SQL:
                           SELECT 
                               fod.size,
                               fod.close_no,
                               fod.magical,
                               fod.open_price,
                               fod.symbol,
                               fod.order_no,
                               foi.true_total_lots,
                               foi.order_no,
                               foi.operation_type,
                               foi.create_time,
                               foi.status,
                               foi.min_lot_size,
                               foi.max_lot_size,
                               foi.total_lots,
                               foi.master_order,
                               foi.total_orders
                           FROM 
                               follow_order_detail fod
                           INNER JOIN 
                               follow_order_instruct foi 
                           ON 
                               foi.order_no = fod.close_no COLLATE utf8mb4_0900_ai_ci
                           WHERE foi.operation_type = %s
                               AND fod.account = %s
                                AND  CONVERT_TZ(fod.close_time, '+00:00', '+05:00') BETWEEN NOW() - INTERVAL %s MINUTE AND NOW() + INTERVAL %s MINUTE  ORDER BY create_time DESC 
参数: ('1', '300162', 1, 1)
INFO     2025-08-28 11:53:55 [lingkuan_refine.commons.api_base;454]  : [2025-08-28 11:53:55] 查询成功，结果数量: 1
INFO     2025-08-28 11:53:55 [lingkuan_refine.commons.api_base;466]  : [2025-08-28 11:53:55] 查询结果: [{"size": 1.0, "close_no": "1871085626291", "magical": 550165, "open_price": 3389.67, "symbol": "XAUUSD", "order_no": 550166, "true_total_lots": 1.0, "foi.order_no": "1871085626291", "operation_type": 1, "create_time": "2025-08-28 11:53:44", "status": 1, "min_lot_size": 0.0, "max_lot_size": 0.0, "total_lots": 1.0, "master_order": 550165, "total_orders": 1}]
INFO     2025-08-28 11:53:55 [lingkuan_refine.commons.api_base;989]  : [2025-08-28 11:53:55] 数据稳定，轮询结束
INFO     2025-08-28 11:53:55 [root;1306]  : 校验通过: 订单状态应为0或1

实际: 1
操作: in
预期: (0, 1)

INFO     2025-08-28 11:53:55 [root;2044]  : 订单状态验证通过: 1
INFO     2025-08-28 11:53:55 [root;1306]  : 校验通过: 详情总手数应符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     2025-08-28 11:53:55 [root;2058]  : 详情总手数验证通过: 1.0
INFO     2025-08-28 11:54:20 [lingkuan_refine.commons.variable_manager;111]  : [2025-08-28 11:47] 运行时变量已保存到: D:\pycharm_test\lingkuan_refine\VAR\runtime_vars_cloud.json
INFO     2025-08-28 11:54:20 [lingkuan_refine.conftest;303]  : [2025-08-28 11:47] 测试会话结束，总耗时: 394.00秒
INFO     2025-08-28 11:54:20 [lingkuan_refine.commons.feishu_notification;131]  : [2025-08-28 11:47] 发送飞书消息，URL: https://open.feishu.cn/open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f
INFO     2025-08-28 11:54:20 [lingkuan_refine.commons.feishu_notification;139]  : [2025-08-28 11:47] 飞书响应状态码: 200
INFO     2025-08-28 11:54:20 [lingkuan_refine.commons.feishu_notification;140]  : [2025-08-28 11:47] 飞书响应内容: {"StatusCode":0,"StatusMessage":"success","code":0,"data":{},"msg":"success"}
INFO     2025-08-28 11:54:20 [lingkuan_refine.commons.feishu_notification;145]  : [2025-08-28 11:47] [FEISHU] 消息发送成功
INFO     2025-08-28 11:54:20 [lingkuan_refine.conftest;315]  : [2025-08-28 11:47] 飞书通知发送成功
