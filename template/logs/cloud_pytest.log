INFO     2025-09-16 17:58:50 [template.conftest;342]  : [2025-09-16 17:58:50] 测试会话开始: 2025-09-16 17:58:50, 测试组: cloud
INFO     2025-09-16 17:58:50 [template.commons.variable_manager;40]  : [2025-09-16 17:58:50] 成功加载静态变量: VAR\uat_data.json
INFO     2025-09-16 17:58:50 [template.commons.variable_manager;64]  : [2025-09-16 17:58:50] 成功加载运行时变量: VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:58:50 [template.conftest;72]  : [2025-09-16 17:58:50] 用例  开始登录，环境: uat
INFO     2025-09-16 17:58:51 [template.conftest;141]  : 第1次尝试 - 验证码识别结果: PqH7
INFO     2025-09-16 17:58:52 [template.conftest;184]  : uat环境登录成功（第1次尝试）
INFO     2025-09-16 17:58:52 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:58:52 [template.commons.api_base;257]  : [2025-09-16 17:58:52] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758016730, 'trader_id': '1967760685055004674', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     2025-09-16 17:58:56 [template.commons.api_base;257]  : [2025-09-16 17:58:56] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758016730, 'trader_id': '1967760842374959105', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     2025-09-16 17:58:59 [root;91]  : 查询结果符合预期：records为空列表
INFO     2025-09-16 17:59:32 [root;127]  : 第1次登录尝试 - 响应内容: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
WARNING  2025-09-16 17:59:32 [root;135]  : 第1次尝试失败 - 无效的token格式: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
INFO     2025-09-16 17:59:32 [root;142]  : 将在5秒后进行第2次重试...
INFO     2025-09-16 17:59:38 [root;127]  : 第2次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     2025-09-16 17:59:38 [root;132]  : 第2次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     2025-09-16 17:59:38 [root;151]  : 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     2025-09-16 17:59:39 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:59:39 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:59:39 [root;167]  : ticket: 44253408,lots_open:0.01
INFO     2025-09-16 17:59:40 [template.commons.api_base;257]  : [2025-09-16 17:59:40] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758016730, 'trader_id': '1967760685055004674', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     2025-09-16 17:59:43 [root;200]  : 喊单者手数是: 0.01
INFO     2025-09-16 17:59:43 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:59:43 [root;1365]  : 校验通过: 第 1 条记录的账号ID应为1967760685055004674

实际: 1967760685055004674
操作: ==
预期: 1967760685055004674

INFO     2025-09-16 17:59:43 [template.commons.api_base;510]  : [2025-09-16 17:59:43] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44253408,)
INFO     2025-09-16 17:59:43 [template.commons.api_base;513]  : [2025-09-16 17:59:43] 查询成功，结果数量: 1
INFO     2025-09-16 17:59:43 [template.commons.api_base;525]  : [2025-09-16 17:59:43] 查询结果: [{"id": "1967891117973135362", "master_id": "1967760685055004674", "master_ticket": 44253408, "master_type": 0, "master_open_time": "2025-09-16 12:59:38", "detected_open_time": "2025-09-16 17:59:38", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1967760842374959105", "slave_ticket": 44253409, "slave_type": 0, "slave_open_time": "2025-09-16 17:59:39", "slave_receive_time": "2025-09-16 17:59:38", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.01, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-16 17:59:39", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 345, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     2025-09-16 17:59:43 [root;280]  : 跟单账号订单号: 44253409
INFO     2025-09-16 17:59:43 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:59:43 [root;285]  : 开仓时间差（毫秒）: 345
INFO     2025-09-16 17:59:43 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:59:44 [template.commons.api_base;257]  : [2025-09-16 17:59:44] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758016730, 'trader_id': '1967760842374959105', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     2025-09-16 17:59:47 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 17:59:47 [root;1365]  : 校验通过: 第 1 条记录的账号ID应为1967760842374959105

实际: 1967760842374959105
操作: ==
预期: 1967760842374959105

INFO     2025-09-16 17:59:47 [root;1365]  : 校验通过: 订单号数据正确

实际: 44253408
操作: ==
预期: 44253408

INFO     2025-09-16 17:59:47 [template.commons.api_base;365]  : 订单号数据正确,开仓订单号：44253408 喊单者订单号：44253408
INFO     2025-09-16 17:59:47 [root;1365]  : 校验通过: 订单号数据正确

实际: 44253409
操作: ==
预期: 44253409

INFO     2025-09-16 17:59:47 [template.commons.api_base;377]  : 订单号数据正确,跟单者订单号：44253409 数据库数据：44253409
INFO     2025-09-16 17:59:47 [root;1365]  : 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     2025-09-16 17:59:47 [template.commons.api_base;390]  : 喊单者手数：0.01 跟单者手数：0.01
INFO     2025-09-16 17:59:48 [template.commons.api_base;257]  : [2025-09-16 17:59:48] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758016730, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     2025-09-16 17:59:51 [template.commons.api_base;257]  : [2025-09-16 17:59:51] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758016730, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44253408}
INFO     2025-09-16 17:59:54 [root;1365]  : 校验通过: 第 1 条记录的订单号应为44253409

实际: 44253409
操作: ==
预期: 44253409

INFO     2025-09-16 17:59:54 [root;1365]  : 校验通过: 喊单者订单号符合预期

实际: 44253408
操作: ==
预期: 44253408

INFO     2025-09-16 17:59:54 [template.commons.api_base;550]  : 喊单者订单号验证通过: 44253408
INFO     2025-09-16 17:59:54 [root;1365]  : 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     2025-09-16 17:59:54 [template.commons.api_base;564]  : 喊单者手数验证通过: 0.01
INFO     2025-09-16 17:59:54 [root;1365]  : 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     2025-09-16 17:59:54 [template.commons.api_base;578]  : 跟单手数验证通过: 0.01
INFO     2025-09-16 17:59:54 [root;1365]  : 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     2025-09-16 17:59:54 [template.commons.api_base;593]  : 交易币种验证通过: XAUUSDzero
INFO     2025-09-16 17:59:55 [root;1365]  : 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44253408
操作: ==
预期: 44253408

INFO     2025-09-16 17:59:55 [template.commons.api_base;617]  : 开仓订单号和平仓订单号一致,开仓订单号：44253408 平仓订单号：44253408
INFO     2025-09-16 17:59:56 [template.commons.api_base;257]  : [2025-09-16 17:59:56] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758016730, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44253408}
INFO     2025-09-16 17:59:59 [root;1365]  : 校验通过: 第 1 条记录的订单号应为44253409

实际: 44253409
操作: ==
预期: 44253409

INFO     2025-09-16 17:59:59 [root;1365]  : 校验通过: 喊单者订单号符合预期

实际: 44253408
操作: ==
预期: 44253408

INFO     2025-09-16 17:59:59 [template.commons.api_base;689]  : 喊单者订单号验证通过: 44253408
INFO     2025-09-16 17:59:59 [root;1365]  : 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     2025-09-16 17:59:59 [template.commons.api_base;703]  : 喊单者手数验证通过: 0.01
INFO     2025-09-16 17:59:59 [root;1365]  : 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     2025-09-16 17:59:59 [template.commons.api_base;717]  : 跟单手数验证通过: 0.01
INFO     2025-09-16 17:59:59 [root;1365]  : 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     2025-09-16 17:59:59 [template.commons.api_base;732]  : 交易币种验证通过: XAUUSDzero
INFO     2025-09-16 18:00:00 [template.commons.api_base;257]  : [2025-09-16 18:00:00] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758016730, 'trader_id': '1967760685055004674', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     2025-09-16 18:00:04 [template.commons.api_base;257]  : [2025-09-16 18:00:04] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758016730, 'trader_id': '1967760842374959105', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     2025-09-16 18:00:07 [root;803]  : 查询结果符合预期：records为空列表
INFO     2025-09-16 18:00:07 [template.commons.api_base;510]  : [2025-09-16 18:00:07] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44253408,)
INFO     2025-09-16 18:00:07 [template.commons.api_base;513]  : [2025-09-16 18:00:07] 查询成功，结果数量: 1
INFO     2025-09-16 18:00:07 [template.commons.api_base;525]  : [2025-09-16 18:00:07] 查询结果: [{"id": "1967891117973135362", "master_id": "1967760685055004674", "master_ticket": 44253408, "master_type": 0, "master_open_time": "2025-09-16 12:59:38", "detected_open_time": "2025-09-16 17:59:38", "master_close_time": "2025-09-16 12:59:54", "detected_close_time": "2025-09-16 17:59:54", "master_lots": 0.01, "comment": "", "master_profit": -6.0, "master_symbol": "XAUUSDzero", "slave_id": "1967760842374959105", "slave_ticket": 44253409, "slave_type": 0, "slave_open_time": "2025-09-16 17:59:39", "slave_receive_time": "2025-09-16 17:59:38", "slave_close_time": "2025-09-16 12:59:54", "slave_receive_close_time": "2025-09-16 17:59:55", "slave_lots": 0.01, "slave_position": null, "slave_profit": -0.1, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-16 17:59:39", "update_by": null, "update_time": "2025-09-16 17:59:59", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 345, "close_time_difference": 319, "open_price_difference": 0.0, "close_price_difference": 0.02}]
INFO     2025-09-16 18:00:07 [root;826]  : 跟单账号订单号: 44253409
INFO     2025-09-16 18:00:07 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 18:00:07 [root;831]  : 平仓时间差（毫秒）: 319
INFO     2025-09-16 18:00:07 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 18:00:07 [template.conftest;223]  : [2025-09-16 18:00:07] 用例  执行完毕
INFO     2025-09-16 18:00:07 [template.commons.variable_manager;111]  : [2025-09-16 17:58:50] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     2025-09-16 18:00:07 [template.conftest;369]  : [2025-09-16 17:58:50] 测试会话结束，总耗时: 77.00秒
INFO     2025-09-16 18:00:07 [template.commons.feishu_notification;131]  : [2025-09-16 17:58:50] 发送飞书消息，URL: https://open.feishu.cn/open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f
INFO     2025-09-16 18:00:08 [template.commons.feishu_notification;139]  : [2025-09-16 17:58:50] 飞书响应状态码: 200
INFO     2025-09-16 18:00:08 [template.commons.feishu_notification;140]  : [2025-09-16 17:58:50] 飞书响应内容: {"StatusCode":0,"StatusMessage":"success","code":0,"data":{},"msg":"success"}
INFO     2025-09-16 18:00:08 [template.commons.feishu_notification;145]  : [2025-09-16 17:58:50] [FEISHU] 消息发送成功
INFO     2025-09-16 18:00:08 [template.conftest;381]  : [2025-09-16 17:58:50] 飞书通知发送成功
