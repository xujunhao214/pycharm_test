INFO     - 2025-09-19 10:31:45 - [conftest:342] - [2025-09-19 10:31:45] 测试会话开始: 2025-09-19 10:31:45, 测试组: cloud
INFO     - 2025-09-19 10:31:45 - [variable_manager:40] - [2025-09-19 10:31:45] 成功加载静态变量: VAR\uat_data.json
INFO     - 2025-09-19 10:31:45 - [variable_manager:64] - [2025-09-19 10:31:45] 成功加载运行时变量: VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:31:45 - [conftest:72] - [2025-09-19 10:31:45] 用例  开始登录，环境: uat
DEBUG    - 2025-09-19 10:31:45 - [connectionpool:1051] - Starting new HTTPS connection (1): dev.lgcopytrade.top:443
DEBUG    - 2025-09-19 10:31:46 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/sys/randomImage/1758249105964?_t=1758249105 HTTP/11" 200 None
INFO     - 2025-09-19 10:31:46 - [conftest:141] - 第1次尝试 - 验证码识别结果: IL7w
DEBUG    - 2025-09-19 10:31:47 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "POST /api/sys/login HTTP/11" 200 None
ERROR    - 2025-09-19 10:31:47 - [conftest:189] - 第1次登录失败: 验证码错误: 验证码错误
DEBUG    - 2025-09-19 10:31:58 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/sys/randomImage/1758249117569?_t=1758249117 HTTP/11" 200 None
INFO     - 2025-09-19 10:31:58 - [conftest:141] - 第2次尝试 - 验证码识别结果: RsKj
DEBUG    - 2025-09-19 10:31:58 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "POST /api/sys/login HTTP/11" 200 None
INFO     - 2025-09-19 10:31:58 - [conftest:184] - uat环境登录成功（第2次尝试）
INFO     - 2025-09-19 10:31:58 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:31:59 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-19 10:31:59 - [api_base:339] - [2025-09-19 10:31:59] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1968599379498471426', 'direction': 'FORWARD', 'followingMode': 4, 'fixedProportion': 100, 'fixedLots': None}
DEBUG    - 2025-09-19 10:32:03 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758249105&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-19 10:32:03 - [api_base:257] - [2025-09-19 10:32:03] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758249105, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-19 10:32:06 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:32:06 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:32:06 - [api_base:257] - [2025-09-19 10:32:06] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:32:32 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:32:32 - [api_base:257] - [2025-09-19 10:32:32] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:32:55 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:32:55 - [api_base:257] - [2025-09-19 10:32:55] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:33:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:33:19 - [api_base:257] - [2025-09-19 10:33:19] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:33:22 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:33:22 - [api_base:257] - [2025-09-19 10:33:22] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:33:26 - [test_oac_equit:187] - 币种的转换详情,当前币种AUD，转换前：4993795.89,转换后：3121621.81
INFO     - 2025-09-19 10:33:26 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:33:26 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:33:27 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-19 10:33:27 - [test_oac_equit:225] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:33:27 - [test_oac_equit:230] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:33:27 - [test_oac_equit:249] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-19 10:33:27 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:33:28 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 941
INFO     - 2025-09-19 10:33:28 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:33:28 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:33:28 - [test_oac_equit:265] - ticket: 44279838,lots_open:0.01
DEBUG    - 2025-09-19 10:33:29 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599116693766146&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:33:29 - [api_base:257] - [2025-09-19 10:33:29] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599116693766146', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:33:32 - [test_oac_equit:299] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:33:32 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:33:32 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599116693766146

实际: 1968599116693766146
操作: ==
预期: 1968599116693766146

INFO     - 2025-09-19 10:33:32 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279838
操作: ==
预期: 44279838

INFO     - 2025-09-19 10:33:32 - [test_oac_equit:343] - 订单号数据正确,开仓订单号：44279838 喊单者订单号：44279838
INFO     - 2025-09-19 10:33:32 - [test_oac_equit:347] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:33:32 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:33:32 - [test_oac_equit:358] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-19 10:33:32 - [test_oac_equit:362] - 喊单者方向是: 0
INFO     - 2025-09-19 10:33:32 - [api_base:1363] - 校验通过: 喊单者方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:33:32 - [test_oac_equit:371] - 喊单者方向：0
INFO     - 2025-09-19 10:33:33 - [api_base:508] - [2025-09-19 10:33:33] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279838,)
INFO     - 2025-09-19 10:33:33 - [api_base:511] - [2025-09-19 10:33:33] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:33:33 - [api_base:523] - [2025-09-19 10:33:33] 查询结果: [{"id": "1968865999714201601", "master_id": "1968599116693766146", "master_ticket": 44279838, "master_type": 0, "master_open_time": "2025-09-19 05:33:28", "detected_open_time": "2025-09-19 10:33:28", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279839, "slave_type": 0, "slave_open_time": "2025-09-19 10:33:29", "slave_receive_time": "2025-09-19 10:33:28", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 1.09, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 100, "ratio": 109.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:33:29", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 296, "close_time_difference": null, "open_price_difference": -0.05, "close_price_difference": null}]
INFO     - 2025-09-19 10:33:33 - [test_oac_equit:394] - 跟单账号订单号: 44279839
INFO     - 2025-09-19 10:33:33 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:33:33 - [test_oac_equit:399] - 开仓时间差（毫秒）: 296
INFO     - 2025-09-19 10:33:33 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:33:33 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599271295811586&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:33:33 - [api_base:257] - [2025-09-19 10:33:33] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599271295811586', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:33:36 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:33:36 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599271295811586

实际: 1968599271295811586
操作: ==
预期: 1968599271295811586

INFO     - 2025-09-19 10:33:36 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279838
操作: ==
预期: 44279838

INFO     - 2025-09-19 10:33:36 - [test_oac_equit:479] - 订单号数据正确,开仓订单号：44279838 喊单者订单号：44279838
INFO     - 2025-09-19 10:33:36 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279839
操作: ==
预期: 44279839

INFO     - 2025-09-19 10:33:36 - [test_oac_equit:491] - 订单号数据正确,跟单者订单号：44279839 数据库数据：44279839
INFO     - 2025-09-19 10:33:36 - [api_base:1363] - 校验通过: 手数符合预期

实际: 1.09
操作: ==
预期: 1.09

INFO     - 2025-09-19 10:33:36 - [test_oac_equit:524] - 跟单者手数：1.09
INFO     - 2025-09-19 10:33:36 - [test_oac_equit:528] - 跟单方向是: 0
INFO     - 2025-09-19 10:33:36 - [api_base:1363] - 校验通过: 跟单方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:33:36 - [test_oac_equit:537] - 跟单方向：0
DEBUG    - 2025-09-19 10:33:37 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758249105&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:33:37 - [api_base:257] - [2025-09-19 10:33:37] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758249105, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:33:40 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279838

实际: 44279838
操作: ==
预期: 44279838

INFO     - 2025-09-19 10:33:40 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:33:40 - [test_oac_equit:611] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:33:40 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:33:40 - [test_oac_equit:626] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:33:41 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279838 HTTP/11" 200 None
INFO     - 2025-09-19 10:33:41 - [api_base:257] - [2025-09-19 10:33:41] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279838}
INFO     - 2025-09-19 10:33:44 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279839

实际: 44279839
操作: ==
预期: 44279839

INFO     - 2025-09-19 10:33:44 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279838
操作: ==
预期: 44279838

INFO     - 2025-09-19 10:33:44 - [test_oac_equit:698] - 喊单者订单号验证通过: 44279838
INFO     - 2025-09-19 10:33:44 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:33:44 - [test_oac_equit:712] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:33:44 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 1.09
操作: ==
预期: 1.09

INFO     - 2025-09-19 10:33:44 - [test_oac_equit:746] - 跟单手数验证通过: 1.09
INFO     - 2025-09-19 10:33:44 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:33:44 - [test_oac_equit:761] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:33:44 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:33:44 - [api_base:257] - [2025-09-19 10:33:44] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:33:47 - [test_oac_equit:798] - 手数是: None
DEBUG    - 2025-09-19 10:34:08 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:34:08 - [api_base:257] - [2025-09-19 10:34:08] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:34:11 - [test_oac_equit:798] - 手数是: None
DEBUG    - 2025-09-19 10:34:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:34:31 - [api_base:257] - [2025-09-19 10:34:31] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:34:35 - [test_oac_equit:798] - 手数是: None
DEBUG    - 2025-09-19 10:34:55 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:34:55 - [api_base:257] - [2025-09-19 10:34:55] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:34:58 - [test_oac_equit:798] - 手数是: None
DEBUG    - 2025-09-19 10:34:59 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:34:59 - [api_base:257] - [2025-09-19 10:34:59] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:35:02 - [test_oac_equit:844] - 手数是: 1.09
INFO     - 2025-09-19 10:35:02 - [api_base:1363] - 校验通过: 手数符合预期

实际: 1.09
操作: ==
预期: 1.09

INFO     - 2025-09-19 10:35:02 - [test_oac_equit:874] - 跟单者手数：1.09
DEBUG    - 2025-09-19 10:35:02 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:35:03 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44279838&price=0.00 HTTP/11" 201 2265
INFO     - 2025-09-19 10:35:03 - [test_oac_equit:901] - 第1次平仓响应: {'message': 'Client with id = 5fc8d7cb-b427-487d-9055-775b4ed7893b not found. Please use /Connect to create new token. Headers = Content-Type : application/json___Accept : */*___Accept-Encoding : gzip, deflate___Authorization : e5f9f574-fd0a-42bd-904b-3a7a088de27e___Host : mt4.mtapi.io___User-Agent : Apifox/1.0.0 (https://apifox.com)___x-sign : 417B110F1E71BD2CFE96366E67849B0B___x-forwarded-for : 14.155.207.242___x-forwarded-proto : https___x-envoy-external-address : 14.155.207.242___x-request-id : 1806e052-65f6-971a-bb16-a538f6a0ec1b___x-envoy-decorator-operation : mt4resttrial.rest.svc.cluster.local:8050/*___x-envoy-peer-metadata : ChQKDkFQUF9DT05UQUlORVJTEgIaAAoaCgpDTFVTVEVSX0lEEgwaCkt1YmVybmV0ZXMKHQoMSU5TVEFOQ0VfSVBTEg0aCzEwLjEuNTguMjIwChkKDUlTVElPX1ZFUlNJT04SCBoGMS4xOC4yCpwDCgZMQUJFTFMSkQMqjgMKHQoDYXBwEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5ChMKBWNoYXJ0EgoaCGdhdGV3YXlzChQKCGhlcml0YWdlEggaBlRpbGxlcgo2CilpbnN0YWxsLm9wZXJhdG9yLmlzdGlvLmlvL293bmluZy1yZXNvdXJjZRIJGgd1bmtub3duChkKBWlzdGlvEhAaDmluZ3Jlc3NnYXRld2F5ChkKDGlzdGlvLmlvL3JldhIJGgdkZWZhdWx0CjAKG29wZXJhdG9yLmlzdGlvLmlvL2NvbXBvbmVudBIRGg9JbmdyZXNzR2F0ZXdheXMKEgoHcmVsZWFzZRIHGgVpc3Rpbwo5Ch9zZXJ2aWNlLmlzdGlvLmlvL2Nhbm9uaWNhbC1uYW1lEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5Ci8KI3NlcnZpY2UuaXN0aW8uaW8vY2Fub25pY2FsLXJldmlzaW9uEggaBmxhdGVzdAoiChdzaWRlY2FyLmlzdGlvLmlvL2luamVjdBIHGgVmYWxzZQoaCgdNRVNIX0lEEg8aDWNsdXN0ZXIubG9jYWwKLwoETkFNRRInGiVpc3Rpby1pbmdyZXNzZ2F0ZXdheS02OWM2OGI2Y2Q1LXI2d3drChsKCU5BTUVTUEFDRRIOGgxpc3Rpby1zeXN0ZW0KXQoFT1dORVISVBpSa3ViZXJuZXRlczovL2FwaXMvYXBwcy92MS9uYW1lc3BhY2VzL2lzdGlvLXN5c3RlbS9kZXBsb3ltZW50cy9pc3Rpby1pbmdyZXNzZ2F0ZXdheQoXChFQTEFURk9STV9NRVRBREFUQRICKgAKJwoNV09SS0xPQURfTkFNRRIWGhRpc3Rpby1pbmdyZXNzZ2F0ZXdheQ==___x-envoy-peer-metadata-id : router~10.1.58.220~istio-ingressgateway-69c68b6cd5-r6wwk.istio-system~istio-system.svc.cluster.local___x-envoy-attempt-count : 1___x-b3-traceid : a32f59fbb0ee0cc2ca11707363277507___x-b3-spanid : ca11707363277507___x-b3-sampled : 1___', 'code': 'INVALID_TOKEN', 'stackTrace': '   at mtrestapi.MyControllerBase.GetClient(String id, String method) in /src/mt4rest/MyControllerBase.cs:line 75\n   at mtrestapi.Trading.OrderClose(String id, Int32 ticket, Double lots, Double price, Int32 slippage) in /src/mt4rest/Controllers/Trading.cs:line 261'}
WARNING  - 2025-09-19 10:35:03 - [test_oac_equit:921] - 第1次平仓失败，未获取到平仓订单号
INFO     - 2025-09-19 10:35:03 - [test_oac_equit:928] - 将在10秒后进行第2次尝试...
DEBUG    - 2025-09-19 10:35:13 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:35:16 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-19 10:35:16 - [test_oac_equit:225] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:35:16 - [test_oac_equit:230] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:35:16 - [test_oac_equit:249] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-19 10:35:16 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:35:19 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44279838&price=0.00 HTTP/11" 200 980
INFO     - 2025-09-19 10:35:19 - [test_oac_equit:901] - 第2次平仓响应: {'ticket': 44279838, 'openTime': '2025-09-19T05:33:28', 'closeTime': '2025-09-19T05:35:18', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSDzero', 'openPrice': 3645.99, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3645.67, 'magicNumber': 0, 'swap': 0.0, 'commission': -7.0, 'comment': '', 'profit': -48.0, 'rateOpen': 539649.02584, 'rateClose': 539525.7711199999, 'rateMargin': 148.0145, 'ex': {'order': 44279838, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758260008, 'state': 3, 'open_price': 3645.99, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758260118, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [539649.02584, 539525.7711199999], 'commission': -7.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3645.67, 'profit': -48.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 148.0145, 'timestamp': 1758260118, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-19 10:35:19 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44279838
操作: ==
预期: 44279838

INFO     - 2025-09-19 10:35:19 - [test_oac_equit:917] - 开仓订单号和平仓订单号一致,开仓订单号：44279838 平仓订单号：44279838
DEBUG    - 2025-09-19 10:35:23 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279838 HTTP/11" 200 None
INFO     - 2025-09-19 10:35:23 - [api_base:257] - [2025-09-19 10:35:23] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279838}
INFO     - 2025-09-19 10:35:26 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279839

实际: 44279839
操作: ==
预期: 44279839

INFO     - 2025-09-19 10:35:26 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279838
操作: ==
预期: 44279838

INFO     - 2025-09-19 10:35:26 - [test_oac_equit:1008] - 喊单者订单号验证通过: 44279838
INFO     - 2025-09-19 10:35:26 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:35:26 - [test_oac_equit:1022] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:35:26 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 1.09
操作: ==
预期: 1.09

INFO     - 2025-09-19 10:35:26 - [test_oac_equit:1056] - 跟单手数验证通过: 1.09
INFO     - 2025-09-19 10:35:26 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:35:26 - [test_oac_equit:1071] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:35:27 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599116693766146&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:35:27 - [api_base:257] - [2025-09-19 10:35:27] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599116693766146', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:35:30 - [test_oac_equit:1106] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-19 10:35:38 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599271295811586&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:35:38 - [api_base:257] - [2025-09-19 10:35:38] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599271295811586', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:35:41 - [test_oac_equit:1142] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-19 10:35:41 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:35:41 - [api_base:257] - [2025-09-19 10:35:41] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:35:44 - [test_oac_equit:1179] - 手数是: None
DEBUG    - 2025-09-19 10:36:05 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:36:05 - [api_base:257] - [2025-09-19 10:36:05] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:36:08 - [test_oac_equit:1179] - 手数是: None
DEBUG    - 2025-09-19 10:36:29 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:36:29 - [api_base:257] - [2025-09-19 10:36:29] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:36:32 - [test_oac_equit:1179] - 手数是: None
DEBUG    - 2025-09-19 10:36:52 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:36:52 - [api_base:257] - [2025-09-19 10:36:52] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:36:55 - [test_oac_equit:1179] - 手数是: None
DEBUG    - 2025-09-19 10:36:56 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:36:56 - [api_base:257] - [2025-09-19 10:36:56] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:36:59 - [test_oac_equit:1223] - 手数是: 0.00
INFO     - 2025-09-19 10:36:59 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:36:59 - [test_oac_equit:1232] - 平仓后手数应为：0，实际是：0.00
INFO     - 2025-09-19 10:37:00 - [api_base:508] - [2025-09-19 10:37:00] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279838,)
INFO     - 2025-09-19 10:37:00 - [api_base:511] - [2025-09-19 10:37:00] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:37:00 - [api_base:523] - [2025-09-19 10:37:00] 查询结果: [{"id": "1968865999714201601", "master_id": "1968599116693766146", "master_ticket": 44279838, "master_type": 0, "master_open_time": "2025-09-19 05:33:28", "detected_open_time": "2025-09-19 10:33:28", "master_close_time": "2025-09-19 05:35:18", "detected_close_time": "2025-09-19 10:35:18", "master_lots": 0.01, "comment": "", "master_profit": -55.0, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279839, "slave_type": 0, "slave_open_time": "2025-09-19 10:33:29", "slave_receive_time": "2025-09-19 10:33:28", "slave_close_time": "2025-09-19 05:35:18", "slave_receive_close_time": "2025-09-19 10:35:18", "slave_lots": 1.09, "slave_position": null, "slave_profit": -48.31, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 100, "ratio": 109.0, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:33:29", "update_by": null, "update_time": "2025-09-19 10:35:23", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 296, "close_time_difference": 527, "open_price_difference": -0.05, "close_price_difference": -0.03}]
INFO     - 2025-09-19 10:37:00 - [test_oac_equit:1254] - 跟单账号订单号: 44279839
INFO     - 2025-09-19 10:37:00 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:37:00 - [test_oac_equit:1259] - 平仓时间差（毫秒）: 527
INFO     - 2025-09-19 10:37:00 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:37:00 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-19 10:37:00 - [api_base:339] - [2025-09-19 10:37:00] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1968599379498471426', 'direction': 'FORWARD', 'followingMode': 4, 'fixedProportion': 50, 'fixedLots': None}
DEBUG    - 2025-09-19 10:37:04 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758249105&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-19 10:37:04 - [api_base:257] - [2025-09-19 10:37:04] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758249105, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-19 10:37:07 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:37:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:37:07 - [api_base:257] - [2025-09-19 10:37:07] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:37:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:37:31 - [api_base:257] - [2025-09-19 10:37:31] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:37:55 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:37:55 - [api_base:257] - [2025-09-19 10:37:55] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:38:18 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:38:18 - [api_base:257] - [2025-09-19 10:38:18] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:38:22 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:38:22 - [api_base:257] - [2025-09-19 10:38:22] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:38:25 - [test_oac_equit:1432] - 币种的转换详情,当前币种AUD，转换前：4993747.58,转换后：3121591.61
INFO     - 2025-09-19 10:38:25 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:38:25 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:38:27 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-19 10:38:27 - [test_oac_equit:1470] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:38:27 - [test_oac_equit:1475] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:38:27 - [test_oac_equit:1494] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-19 10:38:27 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:38:28 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 951
INFO     - 2025-09-19 10:38:28 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:38:28 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:38:28 - [test_oac_equit:1510] - ticket: 44279865,lots_open:0.01
DEBUG    - 2025-09-19 10:38:29 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599116693766146&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:38:29 - [api_base:257] - [2025-09-19 10:38:29] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599116693766146', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1544] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:38:32 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:38:32 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599116693766146

实际: 1968599116693766146
操作: ==
预期: 1968599116693766146

INFO     - 2025-09-19 10:38:32 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279865
操作: ==
预期: 44279865

INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1588] - 订单号数据正确,开仓订单号：44279865 喊单者订单号：44279865
INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1592] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:38:32 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1603] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1607] - 喊单者方向是: 0
INFO     - 2025-09-19 10:38:32 - [api_base:1363] - 校验通过: 喊单者方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1616] - 喊单者方向：0
INFO     - 2025-09-19 10:38:32 - [api_base:508] - [2025-09-19 10:38:32] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279865,)
INFO     - 2025-09-19 10:38:32 - [api_base:511] - [2025-09-19 10:38:32] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:38:32 - [api_base:523] - [2025-09-19 10:38:32] 查询结果: [{"id": "1968867255832752130", "master_id": "1968599116693766146", "master_ticket": 44279865, "master_type": 0, "master_open_time": "2025-09-19 05:38:27", "detected_open_time": "2025-09-19 10:38:28", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279866, "slave_type": 0, "slave_open_time": "2025-09-19 10:38:28", "slave_receive_time": "2025-09-19 10:38:28", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.54, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 50, "ratio": 54.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:38:28", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 263, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1639] - 跟单账号订单号: 44279866
INFO     - 2025-09-19 10:38:32 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:38:32 - [test_oac_equit:1644] - 开仓时间差（毫秒）: 263
INFO     - 2025-09-19 10:38:32 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:38:33 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599271295811586&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:38:33 - [api_base:257] - [2025-09-19 10:38:33] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599271295811586', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:38:36 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:38:36 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599271295811586

实际: 1968599271295811586
操作: ==
预期: 1968599271295811586

INFO     - 2025-09-19 10:38:36 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279865
操作: ==
预期: 44279865

INFO     - 2025-09-19 10:38:36 - [test_oac_equit:1724] - 订单号数据正确,开仓订单号：44279865 喊单者订单号：44279865
INFO     - 2025-09-19 10:38:36 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279866
操作: ==
预期: 44279866

INFO     - 2025-09-19 10:38:36 - [test_oac_equit:1736] - 订单号数据正确,跟单者订单号：44279866 数据库数据：44279866
INFO     - 2025-09-19 10:38:36 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.54
操作: ==
预期: 0.54

INFO     - 2025-09-19 10:38:36 - [test_oac_equit:1769] - 跟单者手数：0.54
INFO     - 2025-09-19 10:38:36 - [test_oac_equit:1773] - 跟单方向是: 0
INFO     - 2025-09-19 10:38:36 - [api_base:1363] - 校验通过: 跟单方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:38:36 - [test_oac_equit:1782] - 跟单方向：0
DEBUG    - 2025-09-19 10:38:36 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758249105&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:38:36 - [api_base:257] - [2025-09-19 10:38:36] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758249105, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:38:39 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279865

实际: 44279865
操作: ==
预期: 44279865

INFO     - 2025-09-19 10:38:39 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:38:39 - [test_oac_equit:1856] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:38:39 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:38:39 - [test_oac_equit:1871] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:38:40 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279865 HTTP/11" 200 None
INFO     - 2025-09-19 10:38:40 - [api_base:257] - [2025-09-19 10:38:40] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279865}
INFO     - 2025-09-19 10:38:43 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279866

实际: 44279866
操作: ==
预期: 44279866

INFO     - 2025-09-19 10:38:43 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279865
操作: ==
预期: 44279865

INFO     - 2025-09-19 10:38:43 - [test_oac_equit:1943] - 喊单者订单号验证通过: 44279865
INFO     - 2025-09-19 10:38:43 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:38:43 - [test_oac_equit:1957] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:38:43 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.54
操作: ==
预期: 0.54

INFO     - 2025-09-19 10:38:43 - [test_oac_equit:1991] - 跟单手数验证通过: 0.54
INFO     - 2025-09-19 10:38:43 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:38:43 - [test_oac_equit:2006] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:38:44 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:38:44 - [api_base:257] - [2025-09-19 10:38:44] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:38:47 - [test_oac_equit:2043] - 手数是: None
DEBUG    - 2025-09-19 10:39:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:39:07 - [api_base:257] - [2025-09-19 10:39:07] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:39:10 - [test_oac_equit:2043] - 手数是: None
DEBUG    - 2025-09-19 10:39:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:39:31 - [api_base:257] - [2025-09-19 10:39:31] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:39:34 - [test_oac_equit:2043] - 手数是: None
DEBUG    - 2025-09-19 10:39:55 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:39:55 - [api_base:257] - [2025-09-19 10:39:55] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:39:58 - [test_oac_equit:2043] - 手数是: None
DEBUG    - 2025-09-19 10:39:58 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:39:58 - [api_base:257] - [2025-09-19 10:39:58] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:40:01 - [test_oac_equit:2089] - 手数是: 0.54
INFO     - 2025-09-19 10:40:01 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.54
操作: ==
预期: 0.54

INFO     - 2025-09-19 10:40:01 - [test_oac_equit:2119] - 跟单者手数：0.54
DEBUG    - 2025-09-19 10:40:01 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:40:02 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44279865&price=0.00 HTTP/11" 201 2265
INFO     - 2025-09-19 10:40:02 - [test_oac_equit:2146] - 第1次平仓响应: {'message': 'Client with id = 5fc8d7cb-b427-487d-9055-775b4ed7893b not found. Please use /Connect to create new token. Headers = Content-Type : application/json___Accept : */*___Accept-Encoding : gzip, deflate___Authorization : e5f9f574-fd0a-42bd-904b-3a7a088de27e___Host : mt4.mtapi.io___User-Agent : Apifox/1.0.0 (https://apifox.com)___x-sign : 417B110F1E71BD2CFE96366E67849B0B___x-forwarded-for : 14.155.207.242___x-forwarded-proto : https___x-envoy-external-address : 14.155.207.242___x-request-id : e865f047-9569-9bd7-8b8b-a8eff46488b9___x-envoy-decorator-operation : mt4resttrial.rest.svc.cluster.local:8050/*___x-envoy-peer-metadata : ChQKDkFQUF9DT05UQUlORVJTEgIaAAoaCgpDTFVTVEVSX0lEEgwaCkt1YmVybmV0ZXMKHQoMSU5TVEFOQ0VfSVBTEg0aCzEwLjEuNTguMjIwChkKDUlTVElPX1ZFUlNJT04SCBoGMS4xOC4yCpwDCgZMQUJFTFMSkQMqjgMKHQoDYXBwEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5ChMKBWNoYXJ0EgoaCGdhdGV3YXlzChQKCGhlcml0YWdlEggaBlRpbGxlcgo2CilpbnN0YWxsLm9wZXJhdG9yLmlzdGlvLmlvL293bmluZy1yZXNvdXJjZRIJGgd1bmtub3duChkKBWlzdGlvEhAaDmluZ3Jlc3NnYXRld2F5ChkKDGlzdGlvLmlvL3JldhIJGgdkZWZhdWx0CjAKG29wZXJhdG9yLmlzdGlvLmlvL2NvbXBvbmVudBIRGg9JbmdyZXNzR2F0ZXdheXMKEgoHcmVsZWFzZRIHGgVpc3Rpbwo5Ch9zZXJ2aWNlLmlzdGlvLmlvL2Nhbm9uaWNhbC1uYW1lEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5Ci8KI3NlcnZpY2UuaXN0aW8uaW8vY2Fub25pY2FsLXJldmlzaW9uEggaBmxhdGVzdAoiChdzaWRlY2FyLmlzdGlvLmlvL2luamVjdBIHGgVmYWxzZQoaCgdNRVNIX0lEEg8aDWNsdXN0ZXIubG9jYWwKLwoETkFNRRInGiVpc3Rpby1pbmdyZXNzZ2F0ZXdheS02OWM2OGI2Y2Q1LXI2d3drChsKCU5BTUVTUEFDRRIOGgxpc3Rpby1zeXN0ZW0KXQoFT1dORVISVBpSa3ViZXJuZXRlczovL2FwaXMvYXBwcy92MS9uYW1lc3BhY2VzL2lzdGlvLXN5c3RlbS9kZXBsb3ltZW50cy9pc3Rpby1pbmdyZXNzZ2F0ZXdheQoXChFQTEFURk9STV9NRVRBREFUQRICKgAKJwoNV09SS0xPQURfTkFNRRIWGhRpc3Rpby1pbmdyZXNzZ2F0ZXdheQ==___x-envoy-peer-metadata-id : router~10.1.58.220~istio-ingressgateway-69c68b6cd5-r6wwk.istio-system~istio-system.svc.cluster.local___x-envoy-attempt-count : 1___x-b3-traceid : 838ebcaa8c1c0a99c8bbb6c8e4aba1a2___x-b3-spanid : c8bbb6c8e4aba1a2___x-b3-sampled : 1___', 'code': 'INVALID_TOKEN', 'stackTrace': '   at mtrestapi.MyControllerBase.GetClient(String id, String method) in /src/mt4rest/MyControllerBase.cs:line 75\n   at mtrestapi.Trading.OrderClose(String id, Int32 ticket, Double lots, Double price, Int32 slippage) in /src/mt4rest/Controllers/Trading.cs:line 261'}
WARNING  - 2025-09-19 10:40:02 - [test_oac_equit:2166] - 第1次平仓失败，未获取到平仓订单号
INFO     - 2025-09-19 10:40:02 - [test_oac_equit:2173] - 将在10秒后进行第2次尝试...
DEBUG    - 2025-09-19 10:40:12 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:40:45 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 201 595
INFO     - 2025-09-19 10:40:45 - [test_oac_equit:1470] - 第1次登录尝试 - 响应内容: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
WARNING  - 2025-09-19 10:40:45 - [test_oac_equit:1478] - 第1次尝试失败 - 无效的token格式: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
INFO     - 2025-09-19 10:40:45 - [test_oac_equit:1485] - 将在5秒后进行第2次重试...
DEBUG    - 2025-09-19 10:40:50 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:40:51 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-19 10:40:51 - [test_oac_equit:1470] - 第2次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:40:51 - [test_oac_equit:1475] - 第2次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:40:51 - [test_oac_equit:1494] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-19 10:40:51 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:40:52 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44279865&price=0.00 HTTP/11" 200 990
INFO     - 2025-09-19 10:40:52 - [test_oac_equit:2146] - 第2次平仓响应: {'ticket': 44279865, 'openTime': '2025-09-19T05:38:27', 'closeTime': '2025-09-19T05:40:52', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSDzero', 'openPrice': 3645.42, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3646.39, 'magicNumber': 0, 'swap': 0.0, 'commission': -7.0, 'comment': '', 'profit': 143.0, 'rateOpen': 539484.4598750001, 'rateClose': 539685.4857000001, 'rateMargin': 147.9925, 'ex': {'order': 44279865, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758260307, 'state': 3, 'open_price': 3645.42, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758260452, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [539484.4598750001, 539685.4857000001], 'commission': -7.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3646.39, 'profit': 143.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 147.9925, 'timestamp': 1758260452, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-19 10:40:52 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44279865
操作: ==
预期: 44279865

INFO     - 2025-09-19 10:40:52 - [test_oac_equit:2162] - 开仓订单号和平仓订单号一致,开仓订单号：44279865 平仓订单号：44279865
DEBUG    - 2025-09-19 10:40:53 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279865 HTTP/11" 200 None
INFO     - 2025-09-19 10:40:53 - [api_base:257] - [2025-09-19 10:40:53] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279865}
INFO     - 2025-09-19 10:40:56 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279866

实际: 44279866
操作: ==
预期: 44279866

INFO     - 2025-09-19 10:40:56 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279865
操作: ==
预期: 44279865

INFO     - 2025-09-19 10:40:56 - [test_oac_equit:2253] - 喊单者订单号验证通过: 44279865
INFO     - 2025-09-19 10:40:56 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:40:56 - [test_oac_equit:2267] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:40:56 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.54
操作: ==
预期: 0.54

INFO     - 2025-09-19 10:40:56 - [test_oac_equit:2301] - 跟单手数验证通过: 0.54
INFO     - 2025-09-19 10:40:56 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:40:56 - [test_oac_equit:2316] - 交易币种验证通过: XAUUSDzero
INFO     - 2025-09-19 10:40:56 - [api_base:508] - [2025-09-19 10:40:56] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279865,)
INFO     - 2025-09-19 10:40:56 - [api_base:511] - [2025-09-19 10:40:56] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:40:56 - [api_base:523] - [2025-09-19 10:40:56] 查询结果: [{"id": "1968867255832752130", "master_id": "1968599116693766146", "master_ticket": 44279865, "master_type": 0, "master_open_time": "2025-09-19 05:38:27", "detected_open_time": "2025-09-19 10:38:28", "master_close_time": "2025-09-19 05:40:52", "detected_close_time": "2025-09-19 10:40:52", "master_lots": 0.01, "comment": "", "master_profit": 136.0, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279866, "slave_type": 0, "slave_open_time": "2025-09-19 10:38:28", "slave_receive_time": "2025-09-19 10:38:28", "slave_close_time": "2025-09-19 05:40:52", "slave_receive_close_time": "2025-09-19 10:40:52", "slave_lots": 0.54, "slave_position": null, "slave_profit": 74.94, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 50, "ratio": 54.0, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:38:28", "update_by": null, "update_time": "2025-09-19 10:40:55", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 263, "close_time_difference": 295, "open_price_difference": 0.0, "close_price_difference": 0.0}]
INFO     - 2025-09-19 10:40:56 - [test_oac_equit:2338] - 跟单账号订单号: 44279866
INFO     - 2025-09-19 10:40:56 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:40:56 - [test_oac_equit:2343] - 平仓时间差（毫秒）: 295
INFO     - 2025-09-19 10:40:56 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:40:57 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-19 10:40:57 - [api_base:339] - [2025-09-19 10:40:57] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1968599379498471426', 'direction': 'FORWARD', 'followingMode': 4, 'fixedProportion': 1, 'fixedLots': None}
DEBUG    - 2025-09-19 10:41:01 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758249105&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-19 10:41:01 - [api_base:257] - [2025-09-19 10:41:01] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758249105, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-19 10:41:04 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:41:04 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:41:04 - [api_base:257] - [2025-09-19 10:41:04] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:41:28 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:41:28 - [api_base:257] - [2025-09-19 10:41:28] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:41:56 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:41:56 - [api_base:257] - [2025-09-19 10:41:56] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:42:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:42:19 - [api_base:257] - [2025-09-19 10:42:19] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:42:23 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:42:23 - [api_base:257] - [2025-09-19 10:42:23] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:42:26 - [test_oac_equit:2516] - 币种的转换详情,当前币种AUD，转换前：4993822.52,转换后：3121638.46
INFO     - 2025-09-19 10:42:26 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:42:26 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:42:27 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-19 10:42:27 - [test_oac_equit:2554] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:42:27 - [test_oac_equit:2559] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:42:27 - [test_oac_equit:2578] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-19 10:42:27 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:42:29 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 963
INFO     - 2025-09-19 10:42:29 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:42:29 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:42:29 - [test_oac_equit:2594] - ticket: 44279904,lots_open:0.01
DEBUG    - 2025-09-19 10:42:29 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599116693766146&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:42:29 - [api_base:257] - [2025-09-19 10:42:29] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599116693766146', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:42:32 - [test_oac_equit:2628] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:42:32 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:42:32 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599116693766146

实际: 1968599116693766146
操作: ==
预期: 1968599116693766146

INFO     - 2025-09-19 10:42:32 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279904
操作: ==
预期: 44279904

INFO     - 2025-09-19 10:42:32 - [test_oac_equit:2672] - 订单号数据正确,开仓订单号：44279904 喊单者订单号：44279904
INFO     - 2025-09-19 10:42:32 - [test_oac_equit:2676] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:42:32 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:42:32 - [test_oac_equit:2687] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-19 10:42:32 - [test_oac_equit:2691] - 喊单者方向是: 0
INFO     - 2025-09-19 10:42:32 - [api_base:1363] - 校验通过: 喊单者方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:42:32 - [test_oac_equit:2700] - 喊单者方向：0
INFO     - 2025-09-19 10:42:33 - [api_base:508] - [2025-09-19 10:42:33] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279904,)
INFO     - 2025-09-19 10:42:33 - [api_base:511] - [2025-09-19 10:42:33] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:42:33 - [api_base:523] - [2025-09-19 10:42:33] 查询结果: [{"id": "1968868265502388225", "master_id": "1968599116693766146", "master_ticket": 44279904, "master_type": 0, "master_open_time": "2025-09-19 05:42:28", "detected_open_time": "2025-09-19 10:42:29", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279905, "slave_type": 0, "slave_open_time": "2025-09-19 10:42:29", "slave_receive_time": "2025-09-19 10:42:29", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.01, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 1, "ratio": 1.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:42:29", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 316, "close_time_difference": null, "open_price_difference": -0.03, "close_price_difference": null}]
INFO     - 2025-09-19 10:42:33 - [test_oac_equit:2723] - 跟单账号订单号: 44279905
INFO     - 2025-09-19 10:42:33 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:42:33 - [test_oac_equit:2728] - 开仓时间差（毫秒）: 316
INFO     - 2025-09-19 10:42:33 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:42:33 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599271295811586&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:42:33 - [api_base:257] - [2025-09-19 10:42:33] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599271295811586', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:42:36 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:42:36 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599271295811586

实际: 1968599271295811586
操作: ==
预期: 1968599271295811586

INFO     - 2025-09-19 10:42:36 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279904
操作: ==
预期: 44279904

INFO     - 2025-09-19 10:42:36 - [test_oac_equit:2808] - 订单号数据正确,开仓订单号：44279904 喊单者订单号：44279904
INFO     - 2025-09-19 10:42:36 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279905
操作: ==
预期: 44279905

INFO     - 2025-09-19 10:42:36 - [test_oac_equit:2820] - 订单号数据正确,跟单者订单号：44279905 数据库数据：44279905
INFO     - 2025-09-19 10:42:36 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.010896242839131607

INFO     - 2025-09-19 10:42:36 - [test_oac_equit:2852] - 跟单者手数：0.01
INFO     - 2025-09-19 10:42:36 - [test_oac_equit:2856] - 跟单方向是: 0
INFO     - 2025-09-19 10:42:36 - [api_base:1363] - 校验通过: 跟单方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:42:36 - [test_oac_equit:2865] - 跟单方向：0
DEBUG    - 2025-09-19 10:42:37 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758249105&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:42:37 - [api_base:257] - [2025-09-19 10:42:37] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758249105, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:42:40 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279904

实际: 44279904
操作: ==
预期: 44279904

INFO     - 2025-09-19 10:42:40 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:42:40 - [test_oac_equit:2939] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:42:40 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:42:40 - [test_oac_equit:2954] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:42:41 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279904 HTTP/11" 200 None
INFO     - 2025-09-19 10:42:41 - [api_base:257] - [2025-09-19 10:42:41] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279904}
INFO     - 2025-09-19 10:42:44 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279905

实际: 44279905
操作: ==
预期: 44279905

INFO     - 2025-09-19 10:42:44 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279904
操作: ==
预期: 44279904

INFO     - 2025-09-19 10:42:44 - [test_oac_equit:3026] - 喊单者订单号验证通过: 44279904
INFO     - 2025-09-19 10:42:44 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:42:44 - [test_oac_equit:3040] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:42:44 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.010896242839131607

INFO     - 2025-09-19 10:42:44 - [test_oac_equit:3073] - 跟单手数验证通过: 0.01
INFO     - 2025-09-19 10:42:44 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:42:44 - [test_oac_equit:3088] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:42:44 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:42:44 - [api_base:257] - [2025-09-19 10:42:44] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:42:47 - [test_oac_equit:3125] - 手数是: None
DEBUG    - 2025-09-19 10:43:08 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:43:08 - [api_base:257] - [2025-09-19 10:43:08] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:43:11 - [test_oac_equit:3125] - 手数是: None
DEBUG    - 2025-09-19 10:43:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:43:31 - [api_base:257] - [2025-09-19 10:43:31] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:43:34 - [test_oac_equit:3125] - 手数是: None
DEBUG    - 2025-09-19 10:43:55 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:43:55 - [api_base:257] - [2025-09-19 10:43:55] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:43:58 - [test_oac_equit:3125] - 手数是: None
DEBUG    - 2025-09-19 10:43:59 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:43:59 - [api_base:257] - [2025-09-19 10:43:59] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:44:02 - [test_oac_equit:3171] - 手数是: 0.01
INFO     - 2025-09-19 10:44:02 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.010896242839131607

INFO     - 2025-09-19 10:44:02 - [test_oac_equit:3200] - 跟单者手数：0.01
DEBUG    - 2025-09-19 10:44:02 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:44:03 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44279904&price=0.00 HTTP/11" 200 1000
INFO     - 2025-09-19 10:44:03 - [test_oac_equit:3227] - 第1次平仓响应: {'ticket': 44279904, 'openTime': '2025-09-19T05:42:28', 'closeTime': '2025-09-19T05:44:02', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSDzero', 'openPrice': 3646.98, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3647.28, 'magicNumber': 0, 'swap': 0.0, 'commission': -7.0, 'comment': '', 'profit': 44.0, 'rateOpen': 539776.242235, 'rateClose': 539789.5106999999, 'rateMargin': 148.00900000000001, 'ex': {'order': 44279904, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758260548, 'state': 3, 'open_price': 3646.98, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758260642, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [539776.242235, 539789.5106999999], 'commission': -7.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3647.28, 'profit': 44.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 148.00900000000001, 'timestamp': 1758260642, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-19 10:44:03 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44279904
操作: ==
预期: 44279904

INFO     - 2025-09-19 10:44:03 - [test_oac_equit:3243] - 开仓订单号和平仓订单号一致,开仓订单号：44279904 平仓订单号：44279904
DEBUG    - 2025-09-19 10:44:04 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279904 HTTP/11" 200 None
INFO     - 2025-09-19 10:44:04 - [api_base:257] - [2025-09-19 10:44:04] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279904}
INFO     - 2025-09-19 10:44:07 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279905

实际: 44279905
操作: ==
预期: 44279905

INFO     - 2025-09-19 10:44:07 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279904
操作: ==
预期: 44279904

INFO     - 2025-09-19 10:44:07 - [test_oac_equit:3334] - 喊单者订单号验证通过: 44279904
INFO     - 2025-09-19 10:44:07 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:44:07 - [test_oac_equit:3348] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:44:07 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.010896242839131607

INFO     - 2025-09-19 10:44:07 - [test_oac_equit:3381] - 跟单手数验证通过: 0.01
INFO     - 2025-09-19 10:44:07 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:44:07 - [test_oac_equit:3396] - 交易币种验证通过: XAUUSDzero
INFO     - 2025-09-19 10:44:07 - [api_base:508] - [2025-09-19 10:44:07] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279904,)
INFO     - 2025-09-19 10:44:07 - [api_base:511] - [2025-09-19 10:44:07] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:44:07 - [api_base:523] - [2025-09-19 10:44:07] 查询结果: [{"id": "1968868265502388225", "master_id": "1968599116693766146", "master_ticket": 44279904, "master_type": 0, "master_open_time": "2025-09-19 05:42:28", "detected_open_time": "2025-09-19 10:42:29", "master_close_time": "2025-09-19 05:44:02", "detected_close_time": "2025-09-19 10:44:03", "master_lots": 0.01, "comment": "", "master_profit": 37.0, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279905, "slave_type": 0, "slave_open_time": "2025-09-19 10:42:29", "slave_receive_time": "2025-09-19 10:42:29", "slave_close_time": "2025-09-19 05:44:03", "slave_receive_close_time": "2025-09-19 10:44:03", "slave_lots": 0.01, "slave_position": null, "slave_profit": 0.41, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 1, "ratio": 1.0, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:42:29", "update_by": null, "update_time": "2025-09-19 10:44:07", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 316, "close_time_difference": 261, "open_price_difference": -0.03, "close_price_difference": 0.01}]
INFO     - 2025-09-19 10:44:07 - [test_oac_equit:3418] - 跟单账号订单号: 44279905
INFO     - 2025-09-19 10:44:07 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:44:07 - [test_oac_equit:3423] - 平仓时间差（毫秒）: 261
INFO     - 2025-09-19 10:44:07 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:44:08 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-19 10:44:08 - [api_base:339] - [2025-09-19 10:44:08] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1968599379498471426', 'direction': 'REVERSE', 'followingMode': 4, 'fixedProportion': 100, 'fixedLots': None}
DEBUG    - 2025-09-19 10:44:11 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758249105&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-19 10:44:11 - [api_base:257] - [2025-09-19 10:44:11] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758249105, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-19 10:44:14 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:44:15 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:44:15 - [api_base:257] - [2025-09-19 10:44:15] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:44:39 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:44:39 - [api_base:257] - [2025-09-19 10:44:39] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:45:02 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:45:02 - [api_base:257] - [2025-09-19 10:45:02] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:45:26 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:45:26 - [api_base:257] - [2025-09-19 10:45:26] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
DEBUG    - 2025-09-19 10:45:30 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:45:30 - [api_base:257] - [2025-09-19 10:45:30] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:45:33 - [test_oac_equit:3596] - 币种的转换详情,当前币种AUD，转换前：4993822.93,转换后：3121638.71
INFO     - 2025-09-19 10:45:33 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:45:33 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:45:34 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-19 10:45:34 - [test_oac_equit:3634] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:45:34 - [test_oac_equit:3639] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-19 10:45:34 - [test_oac_equit:3658] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-19 10:45:34 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:45:35 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 949
INFO     - 2025-09-19 10:45:35 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:45:35 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:45:35 - [test_oac_equit:3674] - ticket: 44279945,lots_open:0.01
DEBUG    - 2025-09-19 10:45:36 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599116693766146&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:45:36 - [api_base:257] - [2025-09-19 10:45:36] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599116693766146', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3708] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:45:39 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:45:39 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599116693766146

实际: 1968599116693766146
操作: ==
预期: 1968599116693766146

INFO     - 2025-09-19 10:45:39 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279945
操作: ==
预期: 44279945

INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3752] - 订单号数据正确,开仓订单号：44279945 喊单者订单号：44279945
INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3756] - 喊单者手数是: 0.01
INFO     - 2025-09-19 10:45:39 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3767] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3771] - 喊单者方向是: 0
INFO     - 2025-09-19 10:45:39 - [api_base:1363] - 校验通过: 喊单者方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3780] - 喊单者方向：0
INFO     - 2025-09-19 10:45:39 - [api_base:508] - [2025-09-19 10:45:39] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279945,)
INFO     - 2025-09-19 10:45:39 - [api_base:511] - [2025-09-19 10:45:39] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:45:39 - [api_base:523] - [2025-09-19 10:45:39] 查询结果: [{"id": "1968869048700579841", "master_id": "1968599116693766146", "master_ticket": 44279945, "master_type": 0, "master_open_time": "2025-09-19 05:45:35", "detected_open_time": "2025-09-19 10:45:35", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279946, "slave_type": 1, "slave_open_time": "2025-09-19 10:45:36", "slave_receive_time": "2025-09-19 10:45:35", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 1.09, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 100, "ratio": 109.0, "flag": 1, "direction": "REVERSE", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:45:36", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 321, "close_time_difference": null, "open_price_difference": 0.01, "close_price_difference": null}]
INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3803] - 跟单账号订单号: 44279946
INFO     - 2025-09-19 10:45:39 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:45:39 - [test_oac_equit:3808] - 开仓时间差（毫秒）: 321
INFO     - 2025-09-19 10:45:39 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-19 10:45:40 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758249105&trader_id=1968599271295811586&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:45:40 - [api_base:257] - [2025-09-19 10:45:40] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758249105, 'trader_id': '1968599271295811586', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:45:43 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:45:43 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1968599271295811586

实际: 1968599271295811586
操作: ==
预期: 1968599271295811586

INFO     - 2025-09-19 10:45:43 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279945
操作: ==
预期: 44279945

INFO     - 2025-09-19 10:45:43 - [test_oac_equit:3888] - 订单号数据正确,开仓订单号：44279945 喊单者订单号：44279945
INFO     - 2025-09-19 10:45:43 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44279946
操作: ==
预期: 44279946

INFO     - 2025-09-19 10:45:43 - [test_oac_equit:3900] - 订单号数据正确,跟单者订单号：44279946 数据库数据：44279946
INFO     - 2025-09-19 10:45:43 - [api_base:1363] - 校验通过: 手数符合预期

实际: 1.09
操作: ==
预期: 1.0896243711769724

INFO     - 2025-09-19 10:45:43 - [test_oac_equit:3932] - 跟单者手数：1.09
INFO     - 2025-09-19 10:45:43 - [test_oac_equit:3936] - 跟单方向是: 1
INFO     - 2025-09-19 10:45:43 - [api_base:1363] - 校验通过: 跟单方向符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     - 2025-09-19 10:45:43 - [test_oac_equit:3945] - 跟单方向：1
DEBUG    - 2025-09-19 10:45:44 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758249105&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-19 10:45:44 - [api_base:257] - [2025-09-19 10:45:44] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758249105, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-19 10:45:47 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279945

实际: 44279945
操作: ==
预期: 44279945

INFO     - 2025-09-19 10:45:47 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:45:47 - [test_oac_equit:4019] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:45:47 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:45:47 - [test_oac_equit:4034] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:45:47 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279945 HTTP/11" 200 None
INFO     - 2025-09-19 10:45:47 - [api_base:257] - [2025-09-19 10:45:47] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279945}
INFO     - 2025-09-19 10:45:50 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279946

实际: 44279946
操作: ==
预期: 44279946

INFO     - 2025-09-19 10:45:50 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279945
操作: ==
预期: 44279945

INFO     - 2025-09-19 10:45:50 - [test_oac_equit:4106] - 喊单者订单号验证通过: 44279945
INFO     - 2025-09-19 10:45:50 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:45:50 - [test_oac_equit:4120] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:45:50 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 1.09
操作: ==
预期: 1.0896243711769724

INFO     - 2025-09-19 10:45:50 - [test_oac_equit:4153] - 跟单手数验证通过: 1.09
INFO     - 2025-09-19 10:45:50 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:45:50 - [test_oac_equit:4168] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-19 10:45:51 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:45:51 - [api_base:257] - [2025-09-19 10:45:51] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:45:54 - [test_oac_equit:4205] - 手数是: None
DEBUG    - 2025-09-19 10:46:15 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:46:15 - [api_base:257] - [2025-09-19 10:46:15] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:46:18 - [test_oac_equit:4205] - 手数是: None
DEBUG    - 2025-09-19 10:46:38 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:46:38 - [api_base:257] - [2025-09-19 10:46:38] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:46:41 - [test_oac_equit:4205] - 手数是: None
DEBUG    - 2025-09-19 10:47:02 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:47:02 - [api_base:257] - [2025-09-19 10:47:02] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:47:05 - [test_oac_equit:4205] - 手数是: None
DEBUG    - 2025-09-19 10:47:06 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758249105&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-19 10:47:06 - [api_base:257] - [2025-09-19 10:47:06] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758249105, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-19 10:47:09 - [test_oac_equit:4251] - 手数是: 1.09
INFO     - 2025-09-19 10:47:09 - [api_base:1363] - 校验通过: 手数符合预期

实际: 1.09
操作: ==
预期: 1.0896243711769724

INFO     - 2025-09-19 10:47:09 - [test_oac_equit:4280] - 跟单者手数：1.09
DEBUG    - 2025-09-19 10:47:09 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-19 10:47:10 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44279945&price=0.00 HTTP/11" 200 982
INFO     - 2025-09-19 10:47:10 - [test_oac_equit:4307] - 第1次平仓响应: {'ticket': 44279945, 'openTime': '2025-09-19T05:45:35', 'closeTime': '2025-09-19T05:47:09', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSDzero', 'openPrice': 3647.31, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3648.36, 'magicNumber': 0, 'swap': 0.0, 'commission': -7.0, 'comment': '', 'profit': 156.0, 'rateOpen': 539851.4091249999, 'rateClose': 539992.7831125, 'rateMargin': 148.015, 'ex': {'order': 44279945, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758260735, 'state': 3, 'open_price': 3647.31, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758260829, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [539851.4091249999, 539992.7831125], 'commission': -7.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3648.36, 'profit': 156.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 148.015, 'timestamp': 1758260829, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-19 10:47:10 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44279945
操作: ==
预期: 44279945

INFO     - 2025-09-19 10:47:10 - [test_oac_equit:4323] - 开仓订单号和平仓订单号一致,开仓订单号：44279945 平仓订单号：44279945
DEBUG    - 2025-09-19 10:47:10 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758249105&pageNo=1&pageSize=50&self_master_ticket=44279945 HTTP/11" 200 None
INFO     - 2025-09-19 10:47:10 - [api_base:257] - [2025-09-19 10:47:10] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758249105, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44279945}
INFO     - 2025-09-19 10:47:13 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44279946

实际: 44279946
操作: ==
预期: 44279946

INFO     - 2025-09-19 10:47:13 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44279945
操作: ==
预期: 44279945

INFO     - 2025-09-19 10:47:13 - [test_oac_equit:4414] - 喊单者订单号验证通过: 44279945
INFO     - 2025-09-19 10:47:13 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-19 10:47:13 - [test_oac_equit:4428] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-19 10:47:13 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 1.09
操作: ==
预期: 1.0896243711769724

INFO     - 2025-09-19 10:47:13 - [test_oac_equit:4461] - 跟单手数验证通过: 1.09
INFO     - 2025-09-19 10:47:13 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-19 10:47:13 - [test_oac_equit:4476] - 交易币种验证通过: XAUUSDzero
INFO     - 2025-09-19 10:47:14 - [api_base:508] - [2025-09-19 10:47:14] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44279945,)
INFO     - 2025-09-19 10:47:14 - [api_base:511] - [2025-09-19 10:47:14] 查询成功，结果数量: 1
INFO     - 2025-09-19 10:47:14 - [api_base:523] - [2025-09-19 10:47:14] 查询结果: [{"id": "1968869048700579841", "master_id": "1968599116693766146", "master_ticket": 44279945, "master_type": 0, "master_open_time": "2025-09-19 05:45:35", "detected_open_time": "2025-09-19 10:45:35", "master_close_time": "2025-09-19 05:47:09", "detected_close_time": "2025-09-19 10:47:10", "master_lots": 0.01, "comment": "", "master_profit": 149.0, "master_symbol": "XAUUSDzero", "slave_id": "1968599271295811586", "slave_ticket": 44279946, "slave_type": 1, "slave_open_time": "2025-09-19 10:45:36", "slave_receive_time": "2025-09-19 10:45:35", "slave_close_time": "2025-09-19 05:47:09", "slave_receive_close_time": "2025-09-19 10:47:10", "slave_lots": 1.09, "slave_position": null, "slave_profit": -214.9, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 4, "fixed_lots": null, "fixed_proportion": 100, "ratio": 109.0, "flag": 6, "direction": "REVERSE", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-19 10:45:36", "update_by": null, "update_time": "2025-09-19 10:47:12", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 321, "close_time_difference": 304, "open_price_difference": 0.01, "close_price_difference": 0.01}]
INFO     - 2025-09-19 10:47:14 - [test_oac_equit:4498] - 跟单账号订单号: 44279946
INFO     - 2025-09-19 10:47:14 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:47:14 - [test_oac_equit:4503] - 平仓时间差（毫秒）: 304
INFO     - 2025-09-19 10:47:14 - [variable_manager:111] - [2025-09-19 10:31:45] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-19 10:47:14 - [conftest:369] - [2025-09-19 10:31:45] 测试会话结束，总耗时: 929.00秒
INFO     - 2025-09-19 10:47:14 - [feishu_notification:131] - [2025-09-19 10:31:45] 发送飞书消息，URL: https://open.feishu.cn/open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f
DEBUG    - 2025-09-19 10:47:14 - [connectionpool:1051] - Starting new HTTPS connection (1): open.feishu.cn:443
DEBUG    - 2025-09-19 10:47:14 - [connectionpool:546] - https://open.feishu.cn:443 "POST /open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f HTTP/11" 200 77
INFO     - 2025-09-19 10:47:14 - [feishu_notification:139] - [2025-09-19 10:31:45] 飞书响应状态码: 200
INFO     - 2025-09-19 10:47:14 - [feishu_notification:140] - [2025-09-19 10:31:45] 飞书响应内容: {"StatusCode":0,"StatusMessage":"success","code":0,"data":{},"msg":"success"}
INFO     - 2025-09-19 10:47:14 - [feishu_notification:145] - [2025-09-19 10:31:45] [FEISHU] 消息发送成功
INFO     - 2025-09-19 10:47:14 - [conftest:381] - [2025-09-19 10:31:45] 飞书通知发送成功
