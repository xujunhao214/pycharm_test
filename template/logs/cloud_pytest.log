INFO     - 2025-09-22 09:22:17 - [conftest:342] - [2025-09-22 09:22:17] 测试会话开始: 2025-09-22 09:22:17, 测试组: cloud
INFO     - 2025-09-22 09:22:17 - [variable_manager:40] - [2025-09-22 09:22:17] 成功加载静态变量: VAR\uat_data.json
INFO     - 2025-09-22 09:22:17 - [variable_manager:64] - [2025-09-22 09:22:17] 成功加载运行时变量: VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:22:17 - [conftest:72] - [2025-09-22 09:22:17] 用例  开始登录，环境: uat
DEBUG    - 2025-09-22 09:22:17 - [connectionpool:1051] - Starting new HTTPS connection (1): dev.lgcopytrade.top:443
DEBUG    - 2025-09-22 09:22:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/sys/randomImage/1758504137834?_t=1758504137 HTTP/11" 200 None
INFO     - 2025-09-22 09:22:19 - [conftest:141] - 第1次尝试 - 验证码识别结果: UjJE
DEBUG    - 2025-09-22 09:22:20 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "POST /api/sys/login HTTP/11" 200 None
ERROR    - 2025-09-22 09:22:20 - [conftest:189] - 第1次登录失败: 验证码错误: 验证码错误
DEBUG    - 2025-09-22 09:22:30 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/sys/randomImage/1758504150063?_t=1758504150 HTTP/11" 200 None
INFO     - 2025-09-22 09:22:30 - [conftest:141] - 第2次尝试 - 验证码识别结果: agdv
DEBUG    - 2025-09-22 09:22:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "POST /api/sys/login HTTP/11" 200 None
INFO     - 2025-09-22 09:22:31 - [conftest:184] - uat环境登录成功（第2次尝试）
INFO     - 2025-09-22 09:22:31 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:22:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 09:22:31 - [api_base:339] - [2025-09-22 09:22:31] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1969933620358291457', 'direction': 'FORWARD', 'followingMode': 2, 'fixedProportion': 100, 'fixedLots': None}
DEBUG    - 2025-09-22 09:22:35 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758504137&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 09:22:35 - [api_base:257] - [2025-09-22 09:22:35] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758504137, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 09:22:38 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:22:39 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:22:39 - [api_base:257] - [2025-09-22 09:22:39] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:22:42 - [test_oac_proportion:126] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:22:42 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:22:42 - [api_base:257] - [2025-09-22 09:22:42] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:22:45 - [test_oac_proportion:162] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:22:45 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:22:46 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 09:22:46 - [test_oac_proportion:198] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:22:46 - [test_oac_proportion:203] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:22:46 - [test_oac_proportion:222] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-22 09:22:46 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:22:48 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 951
INFO     - 2025-09-22 09:22:48 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:22:48 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:22:48 - [test_oac_proportion:238] - ticket: 44299345,lots_open:0.01
DEBUG    - 2025-09-22 09:22:48 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:22:48 - [api_base:257] - [2025-09-22 09:22:48] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:22:51 - [test_oac_proportion:272] - 喊单者手数是: 0.01
INFO     - 2025-09-22 09:22:51 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:22:51 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933354290536449

实际: 1969933354290536449
操作: ==
预期: 1969933354290536449

INFO     - 2025-09-22 09:22:51 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299345
操作: ==
预期: 44299345

INFO     - 2025-09-22 09:22:51 - [test_oac_proportion:316] - 订单号数据正确,开仓订单号：44299345 喊单者订单号：44299345
INFO     - 2025-09-22 09:22:51 - [test_oac_proportion:320] - 喊单者手数是: 0.01
INFO     - 2025-09-22 09:22:51 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:22:51 - [test_oac_proportion:330] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-22 09:22:52 - [api_base:508] - [2025-09-22 09:22:52] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299345,)
INFO     - 2025-09-22 09:22:52 - [api_base:511] - [2025-09-22 09:22:52] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:22:52 - [api_base:523] - [2025-09-22 09:22:52] 查询结果: [{"id": "1969935349749522433", "master_id": "1969933354290536449", "master_ticket": 44299345, "master_type": 0, "master_open_time": "2025-09-22 04:22:41", "detected_open_time": "2025-09-22 09:22:41", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299346, "slave_type": 0, "slave_open_time": "2025-09-22 09:22:42", "slave_receive_time": "2025-09-22 09:22:41", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.01, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:22:42", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 285, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-22 09:22:52 - [test_oac_proportion:352] - 跟单账号订单号: 44299346
INFO     - 2025-09-22 09:22:52 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:22:52 - [test_oac_proportion:357] - 开仓时间差（毫秒）: 285
INFO     - 2025-09-22 09:22:52 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:22:52 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:22:52 - [api_base:257] - [2025-09-22 09:22:52] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:22:55 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:22:55 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933512818450433

实际: 1969933512818450433
操作: ==
预期: 1969933512818450433

INFO     - 2025-09-22 09:22:55 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299345
操作: ==
预期: 44299345

INFO     - 2025-09-22 09:22:55 - [test_oac_proportion:437] - 订单号数据正确,开仓订单号：44299345 喊单者订单号：44299345
INFO     - 2025-09-22 09:22:55 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299346
操作: ==
预期: 44299346

INFO     - 2025-09-22 09:22:55 - [test_oac_proportion:449] - 订单号数据正确,跟单者订单号：44299346 数据库数据：44299346
INFO     - 2025-09-22 09:22:55 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:22:55 - [test_oac_proportion:478] - 跟单者手数：0.01
DEBUG    - 2025-09-22 09:22:56 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758504137&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:22:56 - [api_base:257] - [2025-09-22 09:22:56] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758504137, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:22:59 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299345

实际: 44299345
操作: ==
预期: 44299345

INFO     - 2025-09-22 09:22:59 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:22:59 - [test_oac_proportion:551] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 09:22:59 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:22:59 - [test_oac_proportion:566] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:23:00 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299345 HTTP/11" 200 None
INFO     - 2025-09-22 09:23:00 - [api_base:257] - [2025-09-22 09:23:00] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299345}
INFO     - 2025-09-22 09:23:03 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299346

实际: 44299346
操作: ==
预期: 44299346

INFO     - 2025-09-22 09:23:03 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299345
操作: ==
预期: 44299345

INFO     - 2025-09-22 09:23:03 - [test_oac_proportion:638] - 喊单者订单号验证通过: 44299345
INFO     - 2025-09-22 09:23:03 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:23:03 - [test_oac_proportion:652] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 09:23:03 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:23:03 - [test_oac_proportion:679] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 09:23:03 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:23:03 - [test_oac_proportion:694] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:23:03 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:23:03 - [api_base:257] - [2025-09-22 09:23:03] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:23:07 - [test_oac_proportion:731] - 手数是: 0.01
INFO     - 2025-09-22 09:23:07 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:23:07 - [test_oac_proportion:742] - 喊单者手数：0.01 MT4开仓手数：0.01
DEBUG    - 2025-09-22 09:23:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:23:07 - [api_base:257] - [2025-09-22 09:23:07] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:23:10 - [test_oac_proportion:777] - 手数是: 0.01
INFO     - 2025-09-22 09:23:10 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:23:10 - [test_oac_proportion:800] - 跟单者手数：0.01 MT4开仓手数：0.01
DEBUG    - 2025-09-22 09:23:10 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:23:11 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44299345&price=0.00 HTTP/11" 200 980
INFO     - 2025-09-22 09:23:11 - [test_oac_proportion:826] - 第1次平仓响应: {'ticket': 44299345, 'openTime': '2025-09-22T04:22:41', 'closeTime': '2025-09-22T04:23:04', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSDzero', 'openPrice': 3693.86, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3694.16, 'magicNumber': 0, 'swap': 0.0, 'commission': -7.0, 'comment': '', 'profit': 45.0, 'rateOpen': 547229.4478150001, 'rateClose': 547279.856235, 'rateMargin': 148.1485, 'ex': {'order': 44299345, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758514961, 'state': 3, 'open_price': 3693.86, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758514984, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [547229.4478150001, 547279.856235], 'commission': -7.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3694.16, 'profit': 45.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 148.1485, 'timestamp': 1758514984, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 09:23:11 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44299345
操作: ==
预期: 44299345

INFO     - 2025-09-22 09:23:11 - [test_oac_proportion:842] - 开仓订单号和平仓订单号一致,开仓订单号：44299345 平仓订单号：44299345
DEBUG    - 2025-09-22 09:23:12 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299345 HTTP/11" 200 None
INFO     - 2025-09-22 09:23:12 - [api_base:257] - [2025-09-22 09:23:12] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299345}
INFO     - 2025-09-22 09:23:15 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299346

实际: 44299346
操作: ==
预期: 44299346

INFO     - 2025-09-22 09:23:15 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299345
操作: ==
预期: 44299345

INFO     - 2025-09-22 09:23:15 - [test_oac_proportion:933] - 喊单者订单号验证通过: 44299345
INFO     - 2025-09-22 09:23:15 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:23:15 - [test_oac_proportion:947] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 09:23:15 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:23:15 - [test_oac_proportion:974] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 09:23:15 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:23:15 - [test_oac_proportion:989] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:23:16 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:23:16 - [api_base:257] - [2025-09-22 09:23:16] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:23:19 - [test_oac_proportion:1024] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:23:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:23:19 - [api_base:257] - [2025-09-22 09:23:19] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:23:22 - [test_oac_proportion:1060] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:23:23 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:23:23 - [api_base:257] - [2025-09-22 09:23:23] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:23:26 - [test_oac_proportion:1097] - 手数是: 0.00
INFO     - 2025-09-22 09:23:26 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-22 09:23:26 - [test_oac_proportion:1106] - 平仓后手数应为：0，实际是：0.00
DEBUG    - 2025-09-22 09:23:26 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:23:26 - [api_base:257] - [2025-09-22 09:23:26] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:23:29 - [test_oac_proportion:1141] - 手数是: 0.01
DEBUG    - 2025-09-22 09:23:50 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:23:50 - [api_base:257] - [2025-09-22 09:23:50] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:23:53 - [test_oac_proportion:1141] - 手数是: 0.01
DEBUG    - 2025-09-22 09:24:14 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:24:14 - [api_base:257] - [2025-09-22 09:24:14] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:24:17 - [test_oac_proportion:1141] - 手数是: 0.00
INFO     - 2025-09-22 09:24:17 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-22 09:24:17 - [test_oac_proportion:1150] - 平仓后手数应为：0，实际是：0.00
INFO     - 2025-09-22 09:24:18 - [api_base:508] - [2025-09-22 09:24:18] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299345,)
INFO     - 2025-09-22 09:24:18 - [api_base:511] - [2025-09-22 09:24:18] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:24:18 - [api_base:523] - [2025-09-22 09:24:18] 查询结果: [{"id": "1969935349749522433", "master_id": "1969933354290536449", "master_ticket": 44299345, "master_type": 0, "master_open_time": "2025-09-22 04:22:41", "detected_open_time": "2025-09-22 09:22:41", "master_close_time": "2025-09-22 04:23:04", "detected_close_time": "2025-09-22 09:23:05", "master_lots": 0.01, "comment": "", "master_profit": 38.0, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299346, "slave_type": 0, "slave_open_time": "2025-09-22 09:22:42", "slave_receive_time": "2025-09-22 09:22:41", "slave_close_time": "2025-09-22 04:23:05", "slave_receive_close_time": "2025-09-22 09:23:05", "slave_lots": 0.01, "slave_position": null, "slave_profit": 0.38, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:22:42", "update_by": null, "update_time": "2025-09-22 09:23:09", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 285, "close_time_difference": 292, "open_price_difference": 0.0, "close_price_difference": 0.0}]
INFO     - 2025-09-22 09:24:18 - [test_oac_proportion:1172] - 跟单账号订单号: 44299346
INFO     - 2025-09-22 09:24:18 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:24:18 - [test_oac_proportion:1177] - 平仓时间差（毫秒）: 292
INFO     - 2025-09-22 09:24:18 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:24:18 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 09:24:18 - [api_base:339] - [2025-09-22 09:24:18] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1969933620358291457', 'direction': 'FORWARD', 'followingMode': 2, 'fixedProportion': 50, 'fixedLots': None}
DEBUG    - 2025-09-22 09:24:22 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758504137&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 09:24:22 - [api_base:257] - [2025-09-22 09:24:22] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758504137, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 09:24:25 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:24:25 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:24:25 - [api_base:257] - [2025-09-22 09:24:25] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:24:28 - [test_oac_proportion:1289] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:24:29 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:24:29 - [api_base:257] - [2025-09-22 09:24:29] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:24:32 - [test_oac_proportion:1325] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:24:32 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:24:33 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 09:24:33 - [test_oac_proportion:1361] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:24:33 - [test_oac_proportion:1366] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:24:33 - [test_oac_proportion:1385] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-22 09:24:33 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:24:35 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.2&placedType=Client&price=0.00 HTTP/11" 200 951
INFO     - 2025-09-22 09:24:35 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:24:35 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:24:35 - [test_oac_proportion:1401] - ticket: 44299348,lots_open:0.2
DEBUG    - 2025-09-22 09:24:35 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:24:35 - [api_base:257] - [2025-09-22 09:24:35] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:24:38 - [test_oac_proportion:1435] - 喊单者手数是: 0.2
INFO     - 2025-09-22 09:24:38 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:24:38 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933354290536449

实际: 1969933354290536449
操作: ==
预期: 1969933354290536449

INFO     - 2025-09-22 09:24:38 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299348
操作: ==
预期: 44299348

INFO     - 2025-09-22 09:24:38 - [test_oac_proportion:1479] - 订单号数据正确,开仓订单号：44299348 喊单者订单号：44299348
INFO     - 2025-09-22 09:24:38 - [test_oac_proportion:1483] - 喊单者手数是: 0.2
INFO     - 2025-09-22 09:24:38 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:24:38 - [test_oac_proportion:1493] - 喊单者手数：0.2 MT4开仓手数：0.2
INFO     - 2025-09-22 09:24:39 - [api_base:508] - [2025-09-22 09:24:39] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299348,)
INFO     - 2025-09-22 09:24:39 - [api_base:511] - [2025-09-22 09:24:39] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:24:39 - [api_base:523] - [2025-09-22 09:24:39] 查询结果: [{"id": "1969935798552633346", "master_id": "1969933354290536449", "master_ticket": 44299348, "master_type": 0, "master_open_time": "2025-09-22 04:24:28", "detected_open_time": "2025-09-22 09:24:28", "master_close_time": null, "detected_close_time": null, "master_lots": 0.2, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299349, "slave_type": 0, "slave_open_time": "2025-09-22 09:24:29", "slave_receive_time": "2025-09-22 09:24:28", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.1, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 50, "ratio": 0.5, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:24:29", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 261, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-22 09:24:39 - [test_oac_proportion:1515] - 跟单账号订单号: 44299349
INFO     - 2025-09-22 09:24:39 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:24:39 - [test_oac_proportion:1520] - 开仓时间差（毫秒）: 261
INFO     - 2025-09-22 09:24:39 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:24:39 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:24:39 - [api_base:257] - [2025-09-22 09:24:39] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:24:42 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:24:42 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933512818450433

实际: 1969933512818450433
操作: ==
预期: 1969933512818450433

INFO     - 2025-09-22 09:24:42 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299348
操作: ==
预期: 44299348

INFO     - 2025-09-22 09:24:42 - [test_oac_proportion:1600] - 订单号数据正确,开仓订单号：44299348 喊单者订单号：44299348
INFO     - 2025-09-22 09:24:42 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299349
操作: ==
预期: 44299349

INFO     - 2025-09-22 09:24:42 - [test_oac_proportion:1612] - 订单号数据正确,跟单者订单号：44299349 数据库数据：44299349
INFO     - 2025-09-22 09:24:42 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 09:24:42 - [test_oac_proportion:1641] - 跟单者手数：0.1
DEBUG    - 2025-09-22 09:24:43 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758504137&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:24:43 - [api_base:257] - [2025-09-22 09:24:43] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758504137, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:24:46 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299348

实际: 44299348
操作: ==
预期: 44299348

INFO     - 2025-09-22 09:24:46 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:24:46 - [test_oac_proportion:1714] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 09:24:46 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:24:46 - [test_oac_proportion:1729] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:24:47 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299348 HTTP/11" 200 None
INFO     - 2025-09-22 09:24:47 - [api_base:257] - [2025-09-22 09:24:47] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299348}
INFO     - 2025-09-22 09:24:50 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299349

实际: 44299349
操作: ==
预期: 44299349

INFO     - 2025-09-22 09:24:50 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299348
操作: ==
预期: 44299348

INFO     - 2025-09-22 09:24:50 - [test_oac_proportion:1801] - 喊单者订单号验证通过: 44299348
INFO     - 2025-09-22 09:24:50 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:24:50 - [test_oac_proportion:1815] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 09:24:50 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 09:24:50 - [test_oac_proportion:1842] - 跟单手数验证通过: 0.1
INFO     - 2025-09-22 09:24:50 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:24:50 - [test_oac_proportion:1857] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:24:50 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 31
INFO     - 2025-09-22 09:24:50 - [api_base:257] - [2025-09-22 09:24:50] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
ERROR    - 2025-09-22 09:24:53 - [api_base:458] - JSONPath解析失败: $.searchCount | 响应: 访问超时，请稍后再试!
ERROR    - 2025-09-22 09:24:53 - [api_base:480] - [2025-09-22 09:24:53] JSON断言失败: Failed: JSONPath解析失败（$.searchCount） | 路径: $.searchCount | 响应: 访问超时，请稍后再试!
DEBUG    - 2025-09-22 09:25:14 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 31
INFO     - 2025-09-22 09:25:14 - [api_base:257] - [2025-09-22 09:25:14] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
ERROR    - 2025-09-22 09:25:17 - [api_base:458] - JSONPath解析失败: $.searchCount | 响应: 访问超时，请稍后再试!
ERROR    - 2025-09-22 09:25:17 - [api_base:480] - [2025-09-22 09:25:17] JSON断言失败: Failed: JSONPath解析失败（$.searchCount） | 路径: $.searchCount | 响应: 访问超时，请稍后再试!
DEBUG    - 2025-09-22 09:25:38 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 31
INFO     - 2025-09-22 09:25:38 - [api_base:257] - [2025-09-22 09:25:38] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
ERROR    - 2025-09-22 09:25:41 - [api_base:458] - JSONPath解析失败: $.searchCount | 响应: 访问超时，请稍后再试!
ERROR    - 2025-09-22 09:25:41 - [api_base:480] - [2025-09-22 09:25:41] JSON断言失败: Failed: JSONPath解析失败（$.searchCount） | 路径: $.searchCount | 响应: 访问超时，请稍后再试!
DEBUG    - 2025-09-22 09:26:03 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:26:03 - [api_base:257] - [2025-09-22 09:26:03] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:26:06 - [test_oac_proportion:1894] - 手数是: None
DEBUG    - 2025-09-22 09:26:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:26:07 - [api_base:257] - [2025-09-22 09:26:07] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:26:10 - [test_oac_proportion:1940] - 手数是: 0.10
INFO     - 2025-09-22 09:26:10 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 09:26:10 - [test_oac_proportion:1963] - 跟单者手数：0.10 MT4开仓手数：0.1
DEBUG    - 2025-09-22 09:26:10 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:26:11 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44299348&price=0.00 HTTP/11" 201 2263
INFO     - 2025-09-22 09:26:11 - [test_oac_proportion:1989] - 第1次平仓响应: {'message': 'Client with id = 5fc8d7cb-b427-487d-9055-775b4ed7893b not found. Please use /Connect to create new token. Headers = Content-Type : application/json___Accept : */*___Accept-Encoding : gzip, deflate___Authorization : e5f9f574-fd0a-42bd-904b-3a7a088de27e___Host : mt4.mtapi.io___User-Agent : Apifox/1.0.0 (https://apifox.com)___x-sign : 417B110F1E71BD2CFE96366E67849B0B___x-forwarded-for : 14.153.94.232___x-forwarded-proto : https___x-envoy-external-address : 14.153.94.232___x-request-id : a34da1f9-0314-98f0-9c72-2029f9a567a0___x-envoy-decorator-operation : mt4resttrial.rest.svc.cluster.local:8050/*___x-envoy-peer-metadata : ChQKDkFQUF9DT05UQUlORVJTEgIaAAoaCgpDTFVTVEVSX0lEEgwaCkt1YmVybmV0ZXMKHQoMSU5TVEFOQ0VfSVBTEg0aCzEwLjEuNTguMjIwChkKDUlTVElPX1ZFUlNJT04SCBoGMS4xOC4yCpwDCgZMQUJFTFMSkQMqjgMKHQoDYXBwEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5ChMKBWNoYXJ0EgoaCGdhdGV3YXlzChQKCGhlcml0YWdlEggaBlRpbGxlcgo2CilpbnN0YWxsLm9wZXJhdG9yLmlzdGlvLmlvL293bmluZy1yZXNvdXJjZRIJGgd1bmtub3duChkKBWlzdGlvEhAaDmluZ3Jlc3NnYXRld2F5ChkKDGlzdGlvLmlvL3JldhIJGgdkZWZhdWx0CjAKG29wZXJhdG9yLmlzdGlvLmlvL2NvbXBvbmVudBIRGg9JbmdyZXNzR2F0ZXdheXMKEgoHcmVsZWFzZRIHGgVpc3Rpbwo5Ch9zZXJ2aWNlLmlzdGlvLmlvL2Nhbm9uaWNhbC1uYW1lEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5Ci8KI3NlcnZpY2UuaXN0aW8uaW8vY2Fub25pY2FsLXJldmlzaW9uEggaBmxhdGVzdAoiChdzaWRlY2FyLmlzdGlvLmlvL2luamVjdBIHGgVmYWxzZQoaCgdNRVNIX0lEEg8aDWNsdXN0ZXIubG9jYWwKLwoETkFNRRInGiVpc3Rpby1pbmdyZXNzZ2F0ZXdheS02OWM2OGI2Y2Q1LXI2d3drChsKCU5BTUVTUEFDRRIOGgxpc3Rpby1zeXN0ZW0KXQoFT1dORVISVBpSa3ViZXJuZXRlczovL2FwaXMvYXBwcy92MS9uYW1lc3BhY2VzL2lzdGlvLXN5c3RlbS9kZXBsb3ltZW50cy9pc3Rpby1pbmdyZXNzZ2F0ZXdheQoXChFQTEFURk9STV9NRVRBREFUQRICKgAKJwoNV09SS0xPQURfTkFNRRIWGhRpc3Rpby1pbmdyZXNzZ2F0ZXdheQ==___x-envoy-peer-metadata-id : router~10.1.58.220~istio-ingressgateway-69c68b6cd5-r6wwk.istio-system~istio-system.svc.cluster.local___x-envoy-attempt-count : 1___x-b3-traceid : f2a75deb87e859531ec782a7f8511202___x-b3-spanid : 1ec782a7f8511202___x-b3-sampled : 1___', 'code': 'INVALID_TOKEN', 'stackTrace': '   at mtrestapi.MyControllerBase.GetClient(String id, String method) in /src/mt4rest/MyControllerBase.cs:line 75\n   at mtrestapi.Trading.OrderClose(String id, Int32 ticket, Double lots, Double price, Int32 slippage) in /src/mt4rest/Controllers/Trading.cs:line 261'}
WARNING  - 2025-09-22 09:26:11 - [test_oac_proportion:2009] - 第1次平仓失败，未获取到平仓订单号
INFO     - 2025-09-22 09:26:11 - [test_oac_proportion:2016] - 将在10秒后进行第2次尝试...
DEBUG    - 2025-09-22 09:26:21 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:26:54 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 201 595
INFO     - 2025-09-22 09:26:54 - [test_oac_proportion:1361] - 第1次登录尝试 - 响应内容: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
WARNING  - 2025-09-22 09:26:54 - [test_oac_proportion:1369] - 第1次尝试失败 - 无效的token格式: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
INFO     - 2025-09-22 09:26:54 - [test_oac_proportion:1376] - 将在5秒后进行第2次重试...
DEBUG    - 2025-09-22 09:26:59 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:27:00 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 09:27:00 - [test_oac_proportion:1361] - 第2次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:27:00 - [test_oac_proportion:1366] - 第2次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:27:00 - [test_oac_proportion:1385] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-22 09:27:00 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:27:02 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44299348&price=0.00 HTTP/11" 200 984
INFO     - 2025-09-22 09:27:02 - [test_oac_proportion:1989] - 第2次平仓响应: {'ticket': 44299348, 'openTime': '2025-09-22T04:24:28', 'closeTime': '2025-09-22T04:26:55', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.2, 'symbol': 'XAUUSDzero', 'openPrice': 3693.41, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3691.27, 'magicNumber': 0, 'swap': 0.0, 'commission': -130.0, 'comment': '', 'profit': -6341.0, 'rateOpen': 547229.2719075, 'rateClose': 546885.317315, 'rateMargin': 148.1655, 'ex': {'order': 44299348, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 20, 'open_time': 1758515068, 'state': 3, 'open_price': 3693.41, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758515215, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [547229.2719075, 546885.317315], 'commission': -130.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3691.27, 'profit': -6341.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 148.1655, 'timestamp': 1758515215, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 09:27:02 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44299348
操作: ==
预期: 44299348

INFO     - 2025-09-22 09:27:02 - [test_oac_proportion:2005] - 开仓订单号和平仓订单号一致,开仓订单号：44299348 平仓订单号：44299348
DEBUG    - 2025-09-22 09:27:02 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299348 HTTP/11" 200 None
INFO     - 2025-09-22 09:27:02 - [api_base:257] - [2025-09-22 09:27:02] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299348}
INFO     - 2025-09-22 09:27:05 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299349

实际: 44299349
操作: ==
预期: 44299349

INFO     - 2025-09-22 09:27:05 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299348
操作: ==
预期: 44299348

INFO     - 2025-09-22 09:27:05 - [test_oac_proportion:2096] - 喊单者订单号验证通过: 44299348
INFO     - 2025-09-22 09:27:05 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:27:05 - [test_oac_proportion:2110] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 09:27:05 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 09:27:05 - [test_oac_proportion:2137] - 跟单手数验证通过: 0.1
INFO     - 2025-09-22 09:27:05 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:27:05 - [test_oac_proportion:2152] - 交易币种验证通过: XAUUSDzero
INFO     - 2025-09-22 09:27:06 - [api_base:508] - [2025-09-22 09:27:06] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299348,)
INFO     - 2025-09-22 09:27:06 - [api_base:511] - [2025-09-22 09:27:06] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:27:06 - [api_base:523] - [2025-09-22 09:27:06] 查询结果: [{"id": "1969935798552633346", "master_id": "1969933354290536449", "master_ticket": 44299348, "master_type": 0, "master_open_time": "2025-09-22 04:24:28", "detected_open_time": "2025-09-22 09:24:28", "master_close_time": "2025-09-22 04:26:55", "detected_close_time": "2025-09-22 09:26:55", "master_lots": 0.2, "comment": "", "master_profit": -6471.0, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299349, "slave_type": 0, "slave_open_time": "2025-09-22 09:24:29", "slave_receive_time": "2025-09-22 09:24:28", "slave_close_time": "2025-09-22 04:26:55", "slave_receive_close_time": "2025-09-22 09:26:55", "slave_lots": 0.1, "slave_position": null, "slave_profit": -32.7, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 50, "ratio": 0.5, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:24:29", "update_by": null, "update_time": "2025-09-22 09:26:58", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 261, "close_time_difference": 307, "open_price_difference": 0.0, "close_price_difference": -0.03}]
INFO     - 2025-09-22 09:27:06 - [test_oac_proportion:2174] - 跟单账号订单号: 44299349
INFO     - 2025-09-22 09:27:06 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:27:06 - [test_oac_proportion:2179] - 平仓时间差（毫秒）: 307
INFO     - 2025-09-22 09:27:06 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:27:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 09:27:07 - [api_base:339] - [2025-09-22 09:27:07] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1969933620358291457', 'direction': 'FORWARD', 'followingMode': 2, 'fixedProportion': 25, 'fixedLots': None}
DEBUG    - 2025-09-22 09:27:10 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758504137&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 09:27:10 - [api_base:257] - [2025-09-22 09:27:10] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758504137, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 09:27:13 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:27:14 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:27:14 - [api_base:257] - [2025-09-22 09:27:14] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:27:17 - [test_oac_proportion:2291] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:27:18 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:27:18 - [api_base:257] - [2025-09-22 09:27:18] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:27:21 - [test_oac_proportion:2327] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:27:21 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:27:22 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 09:27:22 - [test_oac_proportion:2363] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:27:22 - [test_oac_proportion:2368] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:27:22 - [test_oac_proportion:2387] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-22 09:27:22 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:27:23 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 951
INFO     - 2025-09-22 09:27:23 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:27:23 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:27:23 - [test_oac_proportion:2403] - ticket: 44299355,lots_open:0.01
DEBUG    - 2025-09-22 09:27:23 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:27:23 - [api_base:257] - [2025-09-22 09:27:23] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:27:26 - [test_oac_proportion:2437] - 喊单者手数是: 0.01
INFO     - 2025-09-22 09:27:26 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:27:26 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933354290536449

实际: 1969933354290536449
操作: ==
预期: 1969933354290536449

INFO     - 2025-09-22 09:27:26 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299355
操作: ==
预期: 44299355

INFO     - 2025-09-22 09:27:26 - [test_oac_proportion:2481] - 订单号数据正确,开仓订单号：44299355 喊单者订单号：44299355
INFO     - 2025-09-22 09:27:26 - [test_oac_proportion:2485] - 喊单者手数是: 0.01
INFO     - 2025-09-22 09:27:26 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:27:26 - [test_oac_proportion:2495] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-22 09:27:27 - [api_base:508] - [2025-09-22 09:27:27] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299355,)
INFO     - 2025-09-22 09:27:27 - [api_base:511] - [2025-09-22 09:27:27] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:27:27 - [api_base:523] - [2025-09-22 09:27:27] 查询结果: [{"id": "1969936503858405377", "master_id": "1969933354290536449", "master_ticket": 44299355, "master_type": 0, "master_open_time": "2025-09-22 04:27:16", "detected_open_time": "2025-09-22 09:27:16", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299356, "slave_type": 0, "slave_open_time": "2025-09-22 09:27:17", "slave_receive_time": "2025-09-22 09:27:16", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.01, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 25, "ratio": 1.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:27:17", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 301, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-22 09:27:27 - [test_oac_proportion:2517] - 跟单账号订单号: 44299356
INFO     - 2025-09-22 09:27:27 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:27:27 - [test_oac_proportion:2522] - 开仓时间差（毫秒）: 301
INFO     - 2025-09-22 09:27:27 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:27:27 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:27:27 - [api_base:257] - [2025-09-22 09:27:27] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:27:30 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:27:30 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933512818450433

实际: 1969933512818450433
操作: ==
预期: 1969933512818450433

INFO     - 2025-09-22 09:27:30 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299355
操作: ==
预期: 44299355

INFO     - 2025-09-22 09:27:30 - [test_oac_proportion:2602] - 订单号数据正确,开仓订单号：44299355 喊单者订单号：44299355
INFO     - 2025-09-22 09:27:30 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299356
操作: ==
预期: 44299356

INFO     - 2025-09-22 09:27:30 - [test_oac_proportion:2614] - 订单号数据正确,跟单者订单号：44299356 数据库数据：44299356
INFO     - 2025-09-22 09:27:30 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:27:30 - [test_oac_proportion:2643] - 跟单者手数：0.01
DEBUG    - 2025-09-22 09:27:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758504137&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:27:31 - [api_base:257] - [2025-09-22 09:27:31] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758504137, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:27:34 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299355

实际: 44299355
操作: ==
预期: 44299355

INFO     - 2025-09-22 09:27:34 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:27:34 - [test_oac_proportion:2716] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 09:27:34 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:27:34 - [test_oac_proportion:2731] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:27:35 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299355 HTTP/11" 200 None
INFO     - 2025-09-22 09:27:35 - [api_base:257] - [2025-09-22 09:27:35] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299355}
INFO     - 2025-09-22 09:27:38 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299356

实际: 44299356
操作: ==
预期: 44299356

INFO     - 2025-09-22 09:27:38 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299355
操作: ==
预期: 44299355

INFO     - 2025-09-22 09:27:38 - [test_oac_proportion:2803] - 喊单者订单号验证通过: 44299355
INFO     - 2025-09-22 09:27:38 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:27:38 - [test_oac_proportion:2817] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 09:27:38 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:27:38 - [test_oac_proportion:2844] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 09:27:38 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:27:38 - [test_oac_proportion:2859] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:27:38 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:27:38 - [api_base:257] - [2025-09-22 09:27:38] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:27:41 - [test_oac_proportion:2896] - 手数是: None
DEBUG    - 2025-09-22 09:28:02 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:28:02 - [api_base:257] - [2025-09-22 09:28:02] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:28:05 - [test_oac_proportion:2896] - 手数是: None
DEBUG    - 2025-09-22 09:28:26 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:28:26 - [api_base:257] - [2025-09-22 09:28:26] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:28:29 - [test_oac_proportion:2896] - 手数是: None
DEBUG    - 2025-09-22 09:28:49 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:28:49 - [api_base:257] - [2025-09-22 09:28:49] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:28:52 - [test_oac_proportion:2896] - 手数是: None
DEBUG    - 2025-09-22 09:28:53 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:28:53 - [api_base:257] - [2025-09-22 09:28:53] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:28:56 - [test_oac_proportion:2942] - 手数是: 0.01
INFO     - 2025-09-22 09:28:56 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:28:56 - [test_oac_proportion:2965] - 跟单者手数：0.01 MT4开仓手数：0.01
DEBUG    - 2025-09-22 09:28:56 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:28:57 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44299355&price=0.00 HTTP/11" 200 982
INFO     - 2025-09-22 09:28:57 - [test_oac_proportion:2991] - 第1次平仓响应: {'ticket': 44299355, 'openTime': '2025-09-22T04:27:16', 'closeTime': '2025-09-22T04:28:50', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSDzero', 'openPrice': 3690.83, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3691.22, 'magicNumber': 0, 'swap': 0.0, 'commission': -7.0, 'comment': '', 'profit': 57.0, 'rateOpen': 546817.4654600001, 'rateClose': 546845.8051375, 'rateMargin': 148.1585, 'ex': {'order': 44299355, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758515236, 'state': 3, 'open_price': 3690.83, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758515330, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [546817.4654600001, 546845.8051375], 'commission': -7.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3691.22, 'profit': 57.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 148.1585, 'timestamp': 1758515330, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 09:28:57 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44299355
操作: ==
预期: 44299355

INFO     - 2025-09-22 09:28:57 - [test_oac_proportion:3007] - 开仓订单号和平仓订单号一致,开仓订单号：44299355 平仓订单号：44299355
DEBUG    - 2025-09-22 09:28:58 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299355 HTTP/11" 200 None
INFO     - 2025-09-22 09:28:58 - [api_base:257] - [2025-09-22 09:28:58] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299355}
INFO     - 2025-09-22 09:29:01 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299356

实际: 44299356
操作: ==
预期: 44299356

INFO     - 2025-09-22 09:29:01 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299355
操作: ==
预期: 44299355

INFO     - 2025-09-22 09:29:01 - [test_oac_proportion:3098] - 喊单者订单号验证通过: 44299355
INFO     - 2025-09-22 09:29:01 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:29:01 - [test_oac_proportion:3112] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 09:29:01 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 09:29:01 - [test_oac_proportion:3139] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 09:29:01 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:29:01 - [test_oac_proportion:3154] - 交易币种验证通过: XAUUSDzero
INFO     - 2025-09-22 09:29:01 - [api_base:508] - [2025-09-22 09:29:01] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299355,)
INFO     - 2025-09-22 09:29:01 - [api_base:511] - [2025-09-22 09:29:01] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:29:01 - [api_base:523] - [2025-09-22 09:29:01] 查询结果: [{"id": "1969936503858405377", "master_id": "1969933354290536449", "master_ticket": 44299355, "master_type": 0, "master_open_time": "2025-09-22 04:27:16", "detected_open_time": "2025-09-22 09:27:16", "master_close_time": "2025-09-22 04:28:50", "detected_close_time": "2025-09-22 09:28:51", "master_lots": 0.01, "comment": "", "master_profit": 50.0, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299356, "slave_type": 0, "slave_open_time": "2025-09-22 09:27:17", "slave_receive_time": "2025-09-22 09:27:16", "slave_close_time": "2025-09-22 04:28:51", "slave_receive_close_time": "2025-09-22 09:28:51", "slave_lots": 0.01, "slave_position": null, "slave_profit": 0.29, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 25, "ratio": 1.0, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:27:17", "update_by": null, "update_time": "2025-09-22 09:28:55", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 301, "close_time_difference": 299, "open_price_difference": 0.0, "close_price_difference": 0.15}]
INFO     - 2025-09-22 09:29:01 - [test_oac_proportion:3176] - 跟单账号订单号: 44299356
INFO     - 2025-09-22 09:29:01 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:29:01 - [test_oac_proportion:3181] - 平仓时间差（毫秒）: 299
INFO     - 2025-09-22 09:29:01 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:29:02 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 09:29:02 - [api_base:339] - [2025-09-22 09:29:02] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1969933620358291457', 'direction': 'REVERSE', 'followingMode': 2, 'fixedProportion': 100, 'fixedLots': None}
DEBUG    - 2025-09-22 09:29:05 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758504137&account=2088767546&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 09:29:05 - [api_base:257] - [2025-09-22 09:29:05] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758504137, 'account': '2088767546', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 09:29:08 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:29:09 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:29:09 - [api_base:257] - [2025-09-22 09:29:09] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:29:12 - [test_oac_proportion:3293] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:29:13 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:29:13 - [api_base:257] - [2025-09-22 09:29:13] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:29:16 - [test_oac_proportion:3329] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 09:29:16 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:29:17 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 09:29:17 - [test_oac_proportion:3365] - 第1次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:29:17 - [test_oac_proportion:3370] - 第1次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:29:17 - [test_oac_proportion:3389] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-22 09:29:17 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:29:18 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&symbol=XAUUSDzero&operation=Buy&volume=0.2&placedType=Client&price=0.00 HTTP/11" 200 943
INFO     - 2025-09-22 09:29:18 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:29:18 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:29:18 - [test_oac_proportion:3405] - ticket: 44299362,lots_open:0.2
DEBUG    - 2025-09-22 09:29:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933354290536449&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:29:19 - [api_base:257] - [2025-09-22 09:29:19] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933354290536449', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3439] - 喊单者手数是: 0.2
INFO     - 2025-09-22 09:29:22 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:29:22 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933354290536449

实际: 1969933354290536449
操作: ==
预期: 1969933354290536449

INFO     - 2025-09-22 09:29:22 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299362
操作: ==
预期: 44299362

INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3483] - 订单号数据正确,开仓订单号：44299362 喊单者订单号：44299362
INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3487] - 喊单者手数是: 0.2
INFO     - 2025-09-22 09:29:22 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3497] - 喊单者手数：0.2 MT4开仓手数：0.2
INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3501] - 喊单者方向是: 0
INFO     - 2025-09-22 09:29:22 - [api_base:1363] - 校验通过: 喊单者方向符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3510] - 喊单者方向：0
INFO     - 2025-09-22 09:29:22 - [api_base:508] - [2025-09-22 09:29:22] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299362,)
INFO     - 2025-09-22 09:29:22 - [api_base:511] - [2025-09-22 09:29:22] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:29:22 - [api_base:523] - [2025-09-22 09:29:22] 查询结果: [{"id": "1969936987910447105", "master_id": "1969933354290536449", "master_ticket": 44299362, "master_type": 0, "master_open_time": "2025-09-22 04:29:11", "detected_open_time": "2025-09-22 09:29:12", "master_close_time": null, "detected_close_time": null, "master_lots": 0.2, "comment": "", "master_profit": null, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299363, "slave_type": 1, "slave_open_time": "2025-09-22 09:29:12", "slave_receive_time": "2025-09-22 09:29:12", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.2, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 1, "direction": "REVERSE", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:29:12", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 305, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3533] - 跟单账号订单号: 44299363
INFO     - 2025-09-22 09:29:22 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:29:22 - [test_oac_proportion:3538] - 开仓时间差（毫秒）: 305
INFO     - 2025-09-22 09:29:22 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 09:29:23 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758504137&trader_id=1969933512818450433&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:29:23 - [api_base:257] - [2025-09-22 09:29:23] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758504137, 'trader_id': '1969933512818450433', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:29:26 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:29:26 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1969933512818450433

实际: 1969933512818450433
操作: ==
预期: 1969933512818450433

INFO     - 2025-09-22 09:29:26 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299362
操作: ==
预期: 44299362

INFO     - 2025-09-22 09:29:26 - [test_oac_proportion:3618] - 订单号数据正确,开仓订单号：44299362 喊单者订单号：44299362
INFO     - 2025-09-22 09:29:26 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 44299363
操作: ==
预期: 44299363

INFO     - 2025-09-22 09:29:26 - [test_oac_proportion:3630] - 订单号数据正确,跟单者订单号：44299363 数据库数据：44299363
INFO     - 2025-09-22 09:29:26 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:29:26 - [test_oac_proportion:3659] - 跟单者手数：0.2
INFO     - 2025-09-22 09:29:26 - [test_oac_proportion:3663] - 跟单方向是: 1
INFO     - 2025-09-22 09:29:26 - [api_base:1363] - 校验通过: 跟单方向符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     - 2025-09-22 09:29:26 - [test_oac_proportion:3672] - 跟单方向：1
DEBUG    - 2025-09-22 09:29:27 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758504137&master_account=2088767545&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 09:29:27 - [api_base:257] - [2025-09-22 09:29:27] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758504137, 'master_account': '2088767545', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 09:29:30 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299362

实际: 44299362
操作: ==
预期: 44299362

INFO     - 2025-09-22 09:29:30 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:29:30 - [test_oac_proportion:3746] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 09:29:30 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:29:30 - [test_oac_proportion:3761] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:29:30 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299362 HTTP/11" 200 None
INFO     - 2025-09-22 09:29:30 - [api_base:257] - [2025-09-22 09:29:30] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299362}
INFO     - 2025-09-22 09:29:33 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299363

实际: 44299363
操作: ==
预期: 44299363

INFO     - 2025-09-22 09:29:33 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299362
操作: ==
预期: 44299362

INFO     - 2025-09-22 09:29:33 - [test_oac_proportion:3833] - 喊单者订单号验证通过: 44299362
INFO     - 2025-09-22 09:29:33 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:29:33 - [test_oac_proportion:3847] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 09:29:33 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:29:33 - [test_oac_proportion:3874] - 跟单手数验证通过: 0.2
INFO     - 2025-09-22 09:29:33 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:29:33 - [test_oac_proportion:3889] - 交易币种验证通过: XAUUSDzero
DEBUG    - 2025-09-22 09:29:34 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:29:34 - [api_base:257] - [2025-09-22 09:29:34] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:29:37 - [test_oac_proportion:3925] - 手数是: None
DEBUG    - 2025-09-22 09:29:57 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:29:57 - [api_base:257] - [2025-09-22 09:29:57] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:30:00 - [test_oac_proportion:3925] - 手数是: None
DEBUG    - 2025-09-22 09:30:21 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:30:21 - [api_base:257] - [2025-09-22 09:30:21] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:30:24 - [test_oac_proportion:3925] - 手数是: None
DEBUG    - 2025-09-22 09:30:45 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767545&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:30:45 - [api_base:257] - [2025-09-22 09:30:45] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767545', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:30:48 - [test_oac_proportion:3925] - 手数是: None
DEBUG    - 2025-09-22 09:30:48 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758504137&pageNo=1&pageSize=50&accountLike=2088767546&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 09:30:48 - [api_base:257] - [2025-09-22 09:30:48] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758504137, 'pageNo': '1', 'pageSize': '50', 'accountLike': '2088767546', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 09:30:51 - [test_oac_proportion:3971] - 手数是: 0.20
INFO     - 2025-09-22 09:30:51 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:30:51 - [test_oac_proportion:3994] - 跟单者手数：0.20 MT4开仓手数：0.2
DEBUG    - 2025-09-22 09:30:51 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:30:52 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44299362&price=0.00 HTTP/11" 201 2263
INFO     - 2025-09-22 09:30:52 - [test_oac_proportion:4020] - 第1次平仓响应: {'message': 'Client with id = 5fc8d7cb-b427-487d-9055-775b4ed7893b not found. Please use /Connect to create new token. Headers = Content-Type : application/json___Accept : */*___Accept-Encoding : gzip, deflate___Authorization : e5f9f574-fd0a-42bd-904b-3a7a088de27e___Host : mt4.mtapi.io___User-Agent : Apifox/1.0.0 (https://apifox.com)___x-sign : 417B110F1E71BD2CFE96366E67849B0B___x-forwarded-for : 14.153.94.232___x-forwarded-proto : https___x-envoy-external-address : 14.153.94.232___x-request-id : 613aeb5f-86f7-9fbe-ba38-f08aa5c6e4e3___x-envoy-decorator-operation : mt4resttrial.rest.svc.cluster.local:8050/*___x-envoy-peer-metadata : ChQKDkFQUF9DT05UQUlORVJTEgIaAAoaCgpDTFVTVEVSX0lEEgwaCkt1YmVybmV0ZXMKHQoMSU5TVEFOQ0VfSVBTEg0aCzEwLjEuNTguMjIwChkKDUlTVElPX1ZFUlNJT04SCBoGMS4xOC4yCpwDCgZMQUJFTFMSkQMqjgMKHQoDYXBwEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5ChMKBWNoYXJ0EgoaCGdhdGV3YXlzChQKCGhlcml0YWdlEggaBlRpbGxlcgo2CilpbnN0YWxsLm9wZXJhdG9yLmlzdGlvLmlvL293bmluZy1yZXNvdXJjZRIJGgd1bmtub3duChkKBWlzdGlvEhAaDmluZ3Jlc3NnYXRld2F5ChkKDGlzdGlvLmlvL3JldhIJGgdkZWZhdWx0CjAKG29wZXJhdG9yLmlzdGlvLmlvL2NvbXBvbmVudBIRGg9JbmdyZXNzR2F0ZXdheXMKEgoHcmVsZWFzZRIHGgVpc3Rpbwo5Ch9zZXJ2aWNlLmlzdGlvLmlvL2Nhbm9uaWNhbC1uYW1lEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5Ci8KI3NlcnZpY2UuaXN0aW8uaW8vY2Fub25pY2FsLXJldmlzaW9uEggaBmxhdGVzdAoiChdzaWRlY2FyLmlzdGlvLmlvL2luamVjdBIHGgVmYWxzZQoaCgdNRVNIX0lEEg8aDWNsdXN0ZXIubG9jYWwKLwoETkFNRRInGiVpc3Rpby1pbmdyZXNzZ2F0ZXdheS02OWM2OGI2Y2Q1LXI2d3drChsKCU5BTUVTUEFDRRIOGgxpc3Rpby1zeXN0ZW0KXQoFT1dORVISVBpSa3ViZXJuZXRlczovL2FwaXMvYXBwcy92MS9uYW1lc3BhY2VzL2lzdGlvLXN5c3RlbS9kZXBsb3ltZW50cy9pc3Rpby1pbmdyZXNzZ2F0ZXdheQoXChFQTEFURk9STV9NRVRBREFUQRICKgAKJwoNV09SS0xPQURfTkFNRRIWGhRpc3Rpby1pbmdyZXNzZ2F0ZXdheQ==___x-envoy-peer-metadata-id : router~10.1.58.220~istio-ingressgateway-69c68b6cd5-r6wwk.istio-system~istio-system.svc.cluster.local___x-envoy-attempt-count : 1___x-b3-traceid : 7ff5fe9c7a0de97567b2fad136eb1b54___x-b3-spanid : 67b2fad136eb1b54___x-b3-sampled : 1___', 'code': 'INVALID_TOKEN', 'stackTrace': '   at mtrestapi.MyControllerBase.GetClient(String id, String method) in /src/mt4rest/MyControllerBase.cs:line 75\n   at mtrestapi.Trading.OrderClose(String id, Int32 ticket, Double lots, Double price, Int32 slippage) in /src/mt4rest/Controllers/Trading.cs:line 261'}
WARNING  - 2025-09-22 09:30:52 - [test_oac_proportion:4040] - 第1次平仓失败，未获取到平仓订单号
INFO     - 2025-09-22 09:30:52 - [test_oac_proportion:4047] - 将在10秒后进行第2次尝试...
DEBUG    - 2025-09-22 09:31:02 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:31:35 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 201 595
INFO     - 2025-09-22 09:31:35 - [test_oac_proportion:3365] - 第1次登录尝试 - 响应内容: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
WARNING  - 2025-09-22 09:31:35 - [test_oac_proportion:3373] - 第1次尝试失败 - 无效的token格式: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
INFO     - 2025-09-22 09:31:35 - [test_oac_proportion:3380] - 将在5秒后进行第2次重试...
DEBUG    - 2025-09-22 09:31:40 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:32:11 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 201 595
INFO     - 2025-09-22 09:32:11 - [test_oac_proportion:3365] - 第2次登录尝试 - 响应内容: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
WARNING  - 2025-09-22 09:32:11 - [test_oac_proportion:3373] - 第2次尝试失败 - 无效的token格式: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
INFO     - 2025-09-22 09:32:11 - [test_oac_proportion:3380] - 将在5秒后进行第3次重试...
DEBUG    - 2025-09-22 09:32:16 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:32:18 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=2088767545&password=j7gdppb&host=acymt4demo01dns01.dnslogix.com&port=443&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 09:32:18 - [test_oac_proportion:3365] - 第3次登录尝试 - 响应内容: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:32:18 - [test_oac_proportion:3370] - 第3次尝试成功 - 获取到token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
INFO     - 2025-09-22 09:32:18 - [test_oac_proportion:3389] - 登录MT4账号获取token: 5fc8d7cb-b427-487d-9055-775b4ed7893b
DEBUG    - 2025-09-22 09:32:18 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 09:32:19 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=5fc8d7cb-b427-487d-9055-775b4ed7893b&ticket=44299362&price=0.00 HTTP/11" 200 984
INFO     - 2025-09-22 09:32:19 - [test_oac_proportion:4020] - 第2次平仓响应: {'ticket': 44299362, 'openTime': '2025-09-22T04:29:11', 'closeTime': '2025-09-22T04:32:12', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.2, 'symbol': 'XAUUSDzero', 'openPrice': 3690.9, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3690.42, 'magicNumber': 0, 'swap': 0.0, 'commission': -130.0, 'comment': '', 'profit': -1423.0, 'rateOpen': 546785.39201, 'rateClose': 546899.2488350001, 'rateMargin': 148.147, 'ex': {'order': 44299362, 'login': 2088767545, 'symbol': 'WEFVVVNEemVybwAA', 'digits': 2, 'cmd': 0, 'volume': 20, 'open_time': 1758515351, 'state': 3, 'open_price': 3690.9, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758515532, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [546785.39201, 546899.2488350001], 'commission': -130.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3690.42, 'profit': -1423.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 148.147, 'timestamp': 1758515532, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 09:32:19 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 44299362
操作: ==
预期: 44299362

INFO     - 2025-09-22 09:32:19 - [test_oac_proportion:4036] - 开仓订单号和平仓订单号一致,开仓订单号：44299362 平仓订单号：44299362
DEBUG    - 2025-09-22 09:32:20 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758504137&pageNo=1&pageSize=50&self_master_ticket=44299362 HTTP/11" 200 None
INFO     - 2025-09-22 09:32:20 - [api_base:257] - [2025-09-22 09:32:20] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758504137, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 44299362}
INFO     - 2025-09-22 09:32:23 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为44299363

实际: 44299363
操作: ==
预期: 44299363

INFO     - 2025-09-22 09:32:23 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 44299362
操作: ==
预期: 44299362

INFO     - 2025-09-22 09:32:23 - [test_oac_proportion:4127] - 喊单者订单号验证通过: 44299362
INFO     - 2025-09-22 09:32:23 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:32:23 - [test_oac_proportion:4141] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 09:32:23 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 09:32:23 - [test_oac_proportion:4168] - 跟单手数验证通过: 0.2
INFO     - 2025-09-22 09:32:23 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSDzero
操作: ==
预期: XAUUSDzero

INFO     - 2025-09-22 09:32:23 - [test_oac_proportion:4183] - 交易币种验证通过: XAUUSDzero
INFO     - 2025-09-22 09:32:23 - [api_base:508] - [2025-09-22 09:32:23] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (44299362,)
INFO     - 2025-09-22 09:32:23 - [api_base:511] - [2025-09-22 09:32:23] 查询成功，结果数量: 1
INFO     - 2025-09-22 09:32:23 - [api_base:523] - [2025-09-22 09:32:23] 查询结果: [{"id": "1969936987910447105", "master_id": "1969933354290536449", "master_ticket": 44299362, "master_type": 0, "master_open_time": "2025-09-22 04:29:11", "detected_open_time": "2025-09-22 09:29:12", "master_close_time": "2025-09-22 04:32:12", "detected_close_time": "2025-09-22 09:32:13", "master_lots": 0.2, "comment": "", "master_profit": -1553.0, "master_symbol": "XAUUSDzero", "slave_id": "1969933512818450433", "slave_ticket": 44299363, "slave_type": 1, "slave_open_time": "2025-09-22 09:29:12", "slave_receive_time": "2025-09-22 09:29:12", "slave_close_time": "2025-09-22 04:32:12", "slave_receive_close_time": "2025-09-22 09:32:13", "slave_lots": 0.2, "slave_position": null, "slave_profit": 4.48, "slave_open_price": null, "slave_symbol": "XAUUSDzero", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 6, "direction": "REVERSE", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-22 09:29:12", "update_by": null, "update_time": "2025-09-22 09:32:15", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 305, "close_time_difference": 313, "open_price_difference": 0.0, "close_price_difference": 0.0}]
INFO     - 2025-09-22 09:32:23 - [test_oac_proportion:4205] - 跟单账号订单号: 44299363
INFO     - 2025-09-22 09:32:23 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:32:23 - [test_oac_proportion:4210] - 平仓时间差（毫秒）: 313
INFO     - 2025-09-22 09:32:23 - [variable_manager:111] - [2025-09-22 09:22:17] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 09:32:23 - [conftest:369] - [2025-09-22 09:22:17] 测试会话结束，总耗时: 606.00秒
INFO     - 2025-09-22 09:32:23 - [feishu_notification:131] - [2025-09-22 09:22:17] 发送飞书消息，URL: https://open.feishu.cn/open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f
DEBUG    - 2025-09-22 09:32:23 - [connectionpool:1051] - Starting new HTTPS connection (1): open.feishu.cn:443
DEBUG    - 2025-09-22 09:32:24 - [connectionpool:546] - https://open.feishu.cn:443 "POST /open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f HTTP/11" 200 77
INFO     - 2025-09-22 09:32:24 - [feishu_notification:139] - [2025-09-22 09:22:17] 飞书响应状态码: 200
INFO     - 2025-09-22 09:32:24 - [feishu_notification:140] - [2025-09-22 09:22:17] 飞书响应内容: {"StatusCode":0,"StatusMessage":"success","code":0,"data":{},"msg":"success"}
INFO     - 2025-09-22 09:32:24 - [feishu_notification:145] - [2025-09-22 09:22:17] [FEISHU] 消息发送成功
INFO     - 2025-09-22 09:32:24 - [conftest:381] - [2025-09-22 09:22:17] 飞书通知发送成功
