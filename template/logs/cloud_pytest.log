INFO     - 2025-09-22 17:36:06 - [conftest:344] - [2025-09-22 17:36:06] 测试会话开始: 2025-09-22 17:36:06, 测试组: cloud
INFO     - 2025-09-22 17:36:06 - [variable_manager:40] - [2025-09-22 17:36:06] 成功加载静态变量: VAR\uat_data.json
INFO     - 2025-09-22 17:36:06 - [variable_manager:64] - [2025-09-22 17:36:06] 成功加载运行时变量: VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:36:06 - [conftest:74] - [2025-09-22 17:36:06] 用例  开始登录，环境: uat
DEBUG    - 2025-09-22 17:36:06 - [connectionpool:1051] - Starting new HTTPS connection (1): dev.lgcopytrade.top:443
DEBUG    - 2025-09-22 17:36:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/sys/randomImage/1758533766787?_t=1758533766 HTTP/11" 200 None
INFO     - 2025-09-22 17:36:07 - [conftest:143] - 第1次尝试 - 验证码识别结果: s3FL
DEBUG    - 2025-09-22 17:36:08 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "POST /api/sys/login HTTP/11" 200 None
INFO     - 2025-09-22 17:36:08 - [conftest:186] - uat环境登录成功（第1次尝试）
INFO     - 2025-09-22 17:36:08 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:36:09 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 17:36:09 - [api_base:339] - [2025-09-22 17:36:09] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1970043908604809217', 'direction': 'FORWARD', 'followingMode': 2, 'fixedProportion': 100, 'fixedLots': None}
DEBUG    - 2025-09-22 17:36:12 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758533766&account=301390787&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 17:36:12 - [api_base:257] - [2025-09-22 17:36:12] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758533766, 'account': '301390787', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 17:36:15 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:36:16 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:36:16 - [api_base:257] - [2025-09-22 17:36:16] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:36:19 - [test_oac_proportion:126] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 17:36:20 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:36:20 - [api_base:257] - [2025-09-22 17:36:20] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:36:43 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:36:43 - [api_base:257] - [2025-09-22 17:36:43] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:37:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:37:07 - [api_base:257] - [2025-09-22 17:37:07] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:37:31 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:37:31 - [api_base:257] - [2025-09-22 17:37:31] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:37:34 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:37:39 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=301390786&password=lrd1lff&host=185.96.247.214&port=2333&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 17:37:39 - [test_oac_proportion:198] - 第1次登录尝试 - 响应内容: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:37:39 - [test_oac_proportion:203] - 第1次尝试成功 - 获取到token: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:37:39 - [test_oac_proportion:222] - 登录MT4账号获取token: 96151315-f78e-4a68-be25-28182f52fcb8
DEBUG    - 2025-09-22 17:37:39 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:37:41 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=96151315-f78e-4a68-be25-28182f52fcb8&symbol=XAUUSD&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 906
INFO     - 2025-09-22 17:37:41 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:37:41 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:37:41 - [test_oac_proportion:238] - ticket: 86437360,lots_open:0.01
DEBUG    - 2025-09-22 17:37:41 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:37:41 - [api_base:257] - [2025-09-22 17:37:41] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:37:44 - [test_oac_proportion:272] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:37:44 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:37:44 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

INFO     - 2025-09-22 17:37:44 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:37:44 - [test_oac_proportion:316] - 订单号数据正确,开仓订单号：86437360 喊单者订单号：86437360
INFO     - 2025-09-22 17:37:44 - [test_oac_proportion:320] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:37:44 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:37:44 - [test_oac_proportion:330] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-22 17:37:45 - [api_base:508] - [2025-09-22 17:37:45] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86437360,)
INFO     - 2025-09-22 17:37:45 - [api_base:511] - [2025-09-22 17:37:45] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:37:45 - [api_base:523] - [2025-09-22 17:37:45] 查询结果: [{"id": "1970059919219478529", "master_id": "1970043654163542017", "master_ticket": 86437360, "master_type": 0, "master_open_time": "2025-09-22 12:37:40", "detected_open_time": "2025-09-22 17:37:41", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86437362, "slave_type": 0, "slave_open_time": "2025-09-22 17:37:41", "slave_receive_time": "2025-09-22 17:37:41", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.01, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:37:41", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 284, "close_time_difference": null, "open_price_difference": 0.01, "close_price_difference": null}]
INFO     - 2025-09-22 17:37:45 - [test_oac_proportion:352] - 跟单账号订单号: 86437362
INFO     - 2025-09-22 17:37:45 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:37:45 - [test_oac_proportion:357] - 开仓时间差（毫秒）: 284
INFO     - 2025-09-22 17:37:45 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:37:45 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:37:45 - [api_base:257] - [2025-09-22 17:37:45] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:37:48 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:37:48 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:37:48 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:37:48 - [test_oac_proportion:437] - 订单号数据正确,开仓订单号：86437360 喊单者订单号：86437360
INFO     - 2025-09-22 17:37:48 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437362
操作: ==
预期: 86437362

INFO     - 2025-09-22 17:37:48 - [test_oac_proportion:449] - 订单号数据正确,跟单者订单号：86437362 数据库数据：86437362
INFO     - 2025-09-22 17:37:48 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:37:48 - [test_oac_proportion:478] - 跟单者手数：0.01
DEBUG    - 2025-09-22 17:37:49 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758533766&master_account=301390786&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:37:49 - [api_base:257] - [2025-09-22 17:37:49] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758533766, 'master_account': '301390786', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:37:52 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437360

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:37:52 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:37:52 - [test_oac_proportion:551] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 17:37:52 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:37:52 - [test_oac_proportion:566] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:37:53 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86437360 HTTP/11" 200 None
INFO     - 2025-09-22 17:37:53 - [api_base:257] - [2025-09-22 17:37:53] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86437360}
INFO     - 2025-09-22 17:37:56 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437362

实际: 86437362
操作: ==
预期: 86437362

INFO     - 2025-09-22 17:37:56 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:37:56 - [test_oac_proportion:638] - 喊单者订单号验证通过: 86437360
INFO     - 2025-09-22 17:37:56 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:37:56 - [test_oac_proportion:652] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 17:37:56 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:37:56 - [test_oac_proportion:679] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 17:37:56 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:37:56 - [test_oac_proportion:694] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:37:56 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390786&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:37:56 - [api_base:257] - [2025-09-22 17:37:56] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390786', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:37:59 - [test_oac_proportion:731] - 手数是: 0.01
INFO     - 2025-09-22 17:37:59 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:37:59 - [test_oac_proportion:742] - 喊单者手数：0.01 MT4开仓手数：0.01
DEBUG    - 2025-09-22 17:38:00 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:38:00 - [api_base:257] - [2025-09-22 17:38:00] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:38:03 - [test_oac_proportion:777] - 手数是: 8.01
DEBUG    - 2025-09-22 17:38:24 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:38:24 - [api_base:257] - [2025-09-22 17:38:24] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:38:27 - [test_oac_proportion:777] - 手数是: 8.02
DEBUG    - 2025-09-22 17:38:47 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:38:47 - [api_base:257] - [2025-09-22 17:38:47] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:38:50 - [test_oac_proportion:777] - 手数是: 8.02
DEBUG    - 2025-09-22 17:39:11 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:39:11 - [api_base:257] - [2025-09-22 17:39:11] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:39:14 - [test_oac_proportion:777] - 手数是: 8.02
DEBUG    - 2025-09-22 17:39:14 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:39:15 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=96151315-f78e-4a68-be25-28182f52fcb8&ticket=86437360&price=0.00 HTTP/11" 200 917
INFO     - 2025-09-22 17:39:15 - [test_oac_proportion:826] - 第1次平仓响应: {'ticket': 86437360, 'openTime': '2025-09-22T12:37:40', 'closeTime': '2025-09-22T12:39:15', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSD', 'openPrice': 3721.86, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3721.63, 'magicNumber': 0, 'swap': 0.0, 'commission': 0.0, 'comment': '', 'profit': -0.23, 'rateOpen': 1.0, 'rateClose': 1.0, 'rateMargin': 1.0, 'ex': {'order': 86437360, 'login': 301390786, 'symbol': 'WEFVVVNEAAAAAAAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758544660, 'state': 3, 'open_price': 3721.86, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758544755, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [1.0, 1.0], 'commission': 0.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3721.63, 'profit': -0.23, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 1.0, 'timestamp': 1758544755, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 17:39:15 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:39:15 - [test_oac_proportion:842] - 开仓订单号和平仓订单号一致,开仓订单号：86437360 平仓订单号：86437360
DEBUG    - 2025-09-22 17:39:16 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86437360 HTTP/11" 200 None
INFO     - 2025-09-22 17:39:16 - [api_base:257] - [2025-09-22 17:39:16] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86437360}
INFO     - 2025-09-22 17:39:19 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437362

实际: 86437362
操作: ==
预期: 86437362

INFO     - 2025-09-22 17:39:19 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:39:19 - [test_oac_proportion:933] - 喊单者订单号验证通过: 86437360
INFO     - 2025-09-22 17:39:19 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:39:19 - [test_oac_proportion:947] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 17:39:19 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:39:19 - [test_oac_proportion:974] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 17:39:19 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:39:19 - [test_oac_proportion:989] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:39:20 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:39:20 - [api_base:257] - [2025-09-22 17:39:20] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:39:23 - [test_oac_proportion:1024] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 17:39:23 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:39:23 - [api_base:257] - [2025-09-22 17:39:23] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:39:47 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:39:47 - [api_base:257] - [2025-09-22 17:39:47] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:40:10 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:40:10 - [api_base:257] - [2025-09-22 17:40:10] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:40:34 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:40:34 - [api_base:257] - [2025-09-22 17:40:34] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:40:38 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:40:38 - [api_base:257] - [2025-09-22 17:40:38] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:40:41 - [test_oac_proportion:1096] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:40:41 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:40:41 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

INFO     - 2025-09-22 17:40:41 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:40:41 - [test_oac_proportion:1140] - 订单号数据正确,开仓订单号：86437360 喊单者订单号：86437360
INFO     - 2025-09-22 17:40:41 - [test_oac_proportion:1144] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:40:41 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:40:41 - [test_oac_proportion:1154] - 喊单者手数：0.01 MT4开仓手数：0.01
DEBUG    - 2025-09-22 17:40:41 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:40:41 - [api_base:257] - [2025-09-22 17:40:41] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:40:44 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:40:44 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:40:44 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437360
操作: ==
预期: 86437360

INFO     - 2025-09-22 17:40:44 - [test_oac_proportion:1233] - 订单号数据正确,开仓订单号：86437360 喊单者订单号：86437360
INFO     - 2025-09-22 17:40:44 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437362
操作: ==
预期: 86437362

INFO     - 2025-09-22 17:40:44 - [test_oac_proportion:1245] - 订单号数据正确,跟单者订单号：86437362 数据库数据：86437362
INFO     - 2025-09-22 17:40:44 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:40:44 - [test_oac_proportion:1274] - 跟单者手数：0.01
DEBUG    - 2025-09-22 17:40:45 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390786&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:40:45 - [api_base:257] - [2025-09-22 17:40:45] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390786', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:40:48 - [test_oac_proportion:1310] - 手数是: 0.00
INFO     - 2025-09-22 17:40:48 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.0
操作: ==
预期: 0.0

INFO     - 2025-09-22 17:40:48 - [test_oac_proportion:1319] - 平仓后手数应为：0，实际是：0.00
DEBUG    - 2025-09-22 17:40:49 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:40:49 - [api_base:257] - [2025-09-22 17:40:49] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:40:52 - [test_oac_proportion:1354] - 手数是: 8.01
DEBUG    - 2025-09-22 17:41:12 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:41:12 - [api_base:257] - [2025-09-22 17:41:12] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:41:15 - [test_oac_proportion:1354] - 手数是: 8.01
DEBUG    - 2025-09-22 17:41:36 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:41:36 - [api_base:257] - [2025-09-22 17:41:36] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:41:39 - [test_oac_proportion:1354] - 手数是: 8.01
DEBUG    - 2025-09-22 17:42:00 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:42:00 - [api_base:257] - [2025-09-22 17:42:00] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:42:03 - [test_oac_proportion:1354] - 手数是: 8.01
INFO     - 2025-09-22 17:42:03 - [api_base:508] - [2025-09-22 17:42:03] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86437360,)
INFO     - 2025-09-22 17:42:03 - [api_base:511] - [2025-09-22 17:42:03] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:42:03 - [api_base:523] - [2025-09-22 17:42:03] 查询结果: [{"id": "1970059919219478529", "master_id": "1970043654163542017", "master_ticket": 86437360, "master_type": 0, "master_open_time": "2025-09-22 12:37:40", "detected_open_time": "2025-09-22 17:37:41", "master_close_time": "2025-09-22 12:39:15", "detected_close_time": "2025-09-22 17:39:16", "master_lots": 0.01, "comment": "", "master_profit": -0.23, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86437362, "slave_type": 0, "slave_open_time": "2025-09-22 17:37:41", "slave_receive_time": "2025-09-22 17:37:41", "slave_close_time": "2025-09-22 12:39:15", "slave_receive_close_time": "2025-09-22 17:39:16", "slave_lots": 0.01, "slave_position": null, "slave_profit": -0.24, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:37:41", "update_by": null, "update_time": "2025-09-22 17:39:19", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 284, "close_time_difference": 302, "open_price_difference": 0.01, "close_price_difference": 0.0}]
INFO     - 2025-09-22 17:42:03 - [test_oac_proportion:1385] - 跟单账号订单号: 86437362
INFO     - 2025-09-22 17:42:03 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:42:03 - [test_oac_proportion:1390] - 平仓时间差（毫秒）: 302
INFO     - 2025-09-22 17:42:03 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:42:04 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 17:42:04 - [api_base:339] - [2025-09-22 17:42:04] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1970043908604809217', 'direction': 'FORWARD', 'followingMode': 2, 'fixedProportion': 50, 'fixedLots': None}
DEBUG    - 2025-09-22 17:42:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758533766&account=301390787&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 17:42:07 - [api_base:257] - [2025-09-22 17:42:07] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758533766, 'account': '301390787', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 17:42:11 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:42:11 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:42:11 - [api_base:257] - [2025-09-22 17:42:11] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:42:14 - [test_oac_proportion:1502] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 17:42:15 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:42:15 - [api_base:257] - [2025-09-22 17:42:15] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:42:38 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:42:38 - [api_base:257] - [2025-09-22 17:42:38] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:43:02 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:43:02 - [api_base:257] - [2025-09-22 17:43:02] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:43:26 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:43:26 - [api_base:257] - [2025-09-22 17:43:26] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:43:29 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:43:34 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=301390786&password=lrd1lff&host=185.96.247.214&port=2333&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 17:43:34 - [test_oac_proportion:1574] - 第1次登录尝试 - 响应内容: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:43:34 - [test_oac_proportion:1579] - 第1次尝试成功 - 获取到token: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:43:34 - [test_oac_proportion:1598] - 登录MT4账号获取token: 96151315-f78e-4a68-be25-28182f52fcb8
DEBUG    - 2025-09-22 17:43:34 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:43:36 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=96151315-f78e-4a68-be25-28182f52fcb8&symbol=XAUUSD&operation=Buy&volume=0.2&placedType=Client&price=0.00 HTTP/11" 200 902
INFO     - 2025-09-22 17:43:36 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:43:36 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:43:36 - [test_oac_proportion:1614] - ticket: 86437584,lots_open:0.2
DEBUG    - 2025-09-22 17:43:36 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:43:36 - [api_base:257] - [2025-09-22 17:43:36] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:43:39 - [test_oac_proportion:1648] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:43:39 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:43:39 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

INFO     - 2025-09-22 17:43:39 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:43:39 - [test_oac_proportion:1692] - 订单号数据正确,开仓订单号：86437584 喊单者订单号：86437584
INFO     - 2025-09-22 17:43:39 - [test_oac_proportion:1696] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:43:39 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:43:39 - [test_oac_proportion:1706] - 喊单者手数：0.2 MT4开仓手数：0.2
INFO     - 2025-09-22 17:43:40 - [api_base:508] - [2025-09-22 17:43:40] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86437584,)
INFO     - 2025-09-22 17:43:40 - [api_base:511] - [2025-09-22 17:43:40] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:43:40 - [api_base:523] - [2025-09-22 17:43:40] 查询结果: [{"id": "1970061408407113729", "master_id": "1970043654163542017", "master_ticket": 86437584, "master_type": 0, "master_open_time": "2025-09-22 12:43:35", "detected_open_time": "2025-09-22 17:43:36", "master_close_time": null, "detected_close_time": null, "master_lots": 0.2, "comment": "", "master_profit": null, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86437586, "slave_type": 0, "slave_open_time": "2025-09-22 17:43:36", "slave_receive_time": "2025-09-22 17:43:36", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.1, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 50, "ratio": 0.5, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:43:36", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 339, "close_time_difference": null, "open_price_difference": -0.02, "close_price_difference": null}]
INFO     - 2025-09-22 17:43:40 - [test_oac_proportion:1728] - 跟单账号订单号: 86437586
INFO     - 2025-09-22 17:43:40 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:43:40 - [test_oac_proportion:1733] - 开仓时间差（毫秒）: 339
INFO     - 2025-09-22 17:43:40 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:43:41 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:43:41 - [api_base:257] - [2025-09-22 17:43:41] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:43:44 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:43:44 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:43:44 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:43:44 - [test_oac_proportion:1813] - 订单号数据正确,开仓订单号：86437584 喊单者订单号：86437584
INFO     - 2025-09-22 17:43:44 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437586
操作: ==
预期: 86437586

INFO     - 2025-09-22 17:43:44 - [test_oac_proportion:1825] - 订单号数据正确,跟单者订单号：86437586 数据库数据：86437586
INFO     - 2025-09-22 17:43:44 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 17:43:44 - [test_oac_proportion:1854] - 跟单者手数：0.1
DEBUG    - 2025-09-22 17:43:44 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758533766&master_account=301390786&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:43:44 - [api_base:257] - [2025-09-22 17:43:44] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758533766, 'master_account': '301390786', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:43:47 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437584

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:43:47 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:43:47 - [test_oac_proportion:1927] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 17:43:47 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:43:47 - [test_oac_proportion:1942] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:43:48 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86437584 HTTP/11" 200 None
INFO     - 2025-09-22 17:43:48 - [api_base:257] - [2025-09-22 17:43:48] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86437584}
INFO     - 2025-09-22 17:43:51 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437586

实际: 86437586
操作: ==
预期: 86437586

INFO     - 2025-09-22 17:43:51 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:43:51 - [test_oac_proportion:2014] - 喊单者订单号验证通过: 86437584
INFO     - 2025-09-22 17:43:51 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:43:51 - [test_oac_proportion:2028] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 17:43:51 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 17:43:51 - [test_oac_proportion:2055] - 跟单手数验证通过: 0.1
INFO     - 2025-09-22 17:43:51 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:43:51 - [test_oac_proportion:2070] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:43:51 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390786&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:43:51 - [api_base:257] - [2025-09-22 17:43:51] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390786', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:43:54 - [test_oac_proportion:2107] - 手数是: 0.20
INFO     - 2025-09-22 17:43:54 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:43:54 - [test_oac_proportion:2118] - 喊单者手数：0.20 MT4开仓手数：0.2
DEBUG    - 2025-09-22 17:43:55 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:43:55 - [api_base:257] - [2025-09-22 17:43:55] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:43:58 - [test_oac_proportion:2153] - 手数是: 8.01
DEBUG    - 2025-09-22 17:44:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:44:19 - [api_base:257] - [2025-09-22 17:44:19] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:44:22 - [test_oac_proportion:2153] - 手数是: 8.11
DEBUG    - 2025-09-22 17:44:42 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:44:42 - [api_base:257] - [2025-09-22 17:44:42] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:44:45 - [test_oac_proportion:2153] - 手数是: 8.11
DEBUG    - 2025-09-22 17:45:06 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:45:06 - [api_base:257] - [2025-09-22 17:45:06] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:45:09 - [test_oac_proportion:2153] - 手数是: 8.11
DEBUG    - 2025-09-22 17:45:09 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:45:11 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=96151315-f78e-4a68-be25-28182f52fcb8&ticket=86437584&price=0.00 HTTP/11" 200 915
INFO     - 2025-09-22 17:45:11 - [test_oac_proportion:2202] - 第1次平仓响应: {'ticket': 86437584, 'openTime': '2025-09-22T12:43:35', 'closeTime': '2025-09-22T12:45:10', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.2, 'symbol': 'XAUUSD', 'openPrice': 3721.21, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3721.07, 'magicNumber': 0, 'swap': 0.0, 'commission': 0.0, 'comment': '', 'profit': -2.8, 'rateOpen': 1.0, 'rateClose': 1.0, 'rateMargin': 1.0, 'ex': {'order': 86437584, 'login': 301390786, 'symbol': 'WEFVVVNEAAAAAAAA', 'digits': 2, 'cmd': 0, 'volume': 20, 'open_time': 1758545015, 'state': 3, 'open_price': 3721.21, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758545110, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [1.0, 1.0], 'commission': 0.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3721.07, 'profit': -2.8, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 1.0, 'timestamp': 1758545110, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 17:45:11 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:45:11 - [test_oac_proportion:2218] - 开仓订单号和平仓订单号一致,开仓订单号：86437584 平仓订单号：86437584
DEBUG    - 2025-09-22 17:45:11 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86437584 HTTP/11" 200 None
INFO     - 2025-09-22 17:45:11 - [api_base:257] - [2025-09-22 17:45:11] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86437584}
INFO     - 2025-09-22 17:45:14 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437586

实际: 86437586
操作: ==
预期: 86437586

INFO     - 2025-09-22 17:45:14 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:45:14 - [test_oac_proportion:2309] - 喊单者订单号验证通过: 86437584
INFO     - 2025-09-22 17:45:14 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:45:14 - [test_oac_proportion:2323] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 17:45:14 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 17:45:14 - [test_oac_proportion:2350] - 跟单手数验证通过: 0.1
INFO     - 2025-09-22 17:45:14 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:45:14 - [test_oac_proportion:2365] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:45:15 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:45:15 - [api_base:257] - [2025-09-22 17:45:15] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:45:18 - [test_oac_proportion:2399] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:45:18 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:45:18 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

INFO     - 2025-09-22 17:45:18 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:45:18 - [test_oac_proportion:2443] - 订单号数据正确,开仓订单号：86437584 喊单者订单号：86437584
INFO     - 2025-09-22 17:45:18 - [test_oac_proportion:2447] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:45:18 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:45:18 - [test_oac_proportion:2457] - 喊单者手数：0.2 MT4开仓手数：0.2
DEBUG    - 2025-09-22 17:45:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:45:19 - [api_base:257] - [2025-09-22 17:45:19] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:45:22 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:45:22 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:45:22 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437584
操作: ==
预期: 86437584

INFO     - 2025-09-22 17:45:22 - [test_oac_proportion:2536] - 订单号数据正确,开仓订单号：86437584 喊单者订单号：86437584
INFO     - 2025-09-22 17:45:22 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437586
操作: ==
预期: 86437586

INFO     - 2025-09-22 17:45:22 - [test_oac_proportion:2548] - 订单号数据正确,跟单者订单号：86437586 数据库数据：86437586
INFO     - 2025-09-22 17:45:22 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.1
操作: ==
预期: 0.1

INFO     - 2025-09-22 17:45:22 - [test_oac_proportion:2577] - 跟单者手数：0.1
INFO     - 2025-09-22 17:45:22 - [api_base:508] - [2025-09-22 17:45:22] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86437584,)
INFO     - 2025-09-22 17:45:22 - [api_base:511] - [2025-09-22 17:45:22] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:45:22 - [api_base:523] - [2025-09-22 17:45:22] 查询结果: [{"id": "1970061408407113729", "master_id": "1970043654163542017", "master_ticket": 86437584, "master_type": 0, "master_open_time": "2025-09-22 12:43:35", "detected_open_time": "2025-09-22 17:43:36", "master_close_time": "2025-09-22 12:45:10", "detected_close_time": "2025-09-22 17:45:11", "master_lots": 0.2, "comment": "", "master_profit": -2.8, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86437586, "slave_type": 0, "slave_open_time": "2025-09-22 17:43:36", "slave_receive_time": "2025-09-22 17:43:36", "slave_close_time": "2025-09-22 12:45:11", "slave_receive_close_time": "2025-09-22 17:45:11", "slave_lots": 0.1, "slave_position": null, "slave_profit": -0.6, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 50, "ratio": 0.5, "flag": 6, "direction": "FORWARD", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:43:36", "update_by": null, "update_time": "2025-09-22 17:45:15", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 339, "close_time_difference": 301, "open_price_difference": -0.02, "close_price_difference": -0.02}]
INFO     - 2025-09-22 17:45:22 - [test_oac_proportion:2599] - 跟单账号订单号: 86437586
INFO     - 2025-09-22 17:45:22 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:45:22 - [test_oac_proportion:2604] - 平仓时间差（毫秒）: 301
INFO     - 2025-09-22 17:45:22 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:45:23 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 17:45:23 - [api_base:339] - [2025-09-22 17:45:23] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1970043908604809217', 'direction': 'FORWARD', 'followingMode': 2, 'fixedProportion': 25, 'fixedLots': None}
DEBUG    - 2025-09-22 17:45:26 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758533766&account=301390787&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 17:45:26 - [api_base:257] - [2025-09-22 17:45:26] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758533766, 'account': '301390787', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 17:45:29 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:45:30 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:45:30 - [api_base:257] - [2025-09-22 17:45:30] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:45:33 - [test_oac_proportion:2716] - 查询结果符合预期：records为空列表
DEBUG    - 2025-09-22 17:45:34 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:45:34 - [api_base:257] - [2025-09-22 17:45:34] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:45:57 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:45:57 - [api_base:257] - [2025-09-22 17:45:57] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:46:21 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:46:21 - [api_base:257] - [2025-09-22 17:46:21] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:46:45 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:46:45 - [api_base:257] - [2025-09-22 17:46:45] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:46:48 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:46:54 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=301390786&password=lrd1lff&host=185.96.247.214&port=2333&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 17:46:54 - [test_oac_proportion:2788] - 第1次登录尝试 - 响应内容: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:46:54 - [test_oac_proportion:2793] - 第1次尝试成功 - 获取到token: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:46:54 - [test_oac_proportion:2812] - 登录MT4账号获取token: 96151315-f78e-4a68-be25-28182f52fcb8
DEBUG    - 2025-09-22 17:46:54 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:46:55 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=96151315-f78e-4a68-be25-28182f52fcb8&symbol=XAUUSD&operation=Buy&volume=0.01&placedType=Client&price=0.00 HTTP/11" 200 904
INFO     - 2025-09-22 17:46:55 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:46:55 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:46:55 - [test_oac_proportion:2828] - ticket: 86437732,lots_open:0.01
DEBUG    - 2025-09-22 17:46:56 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:46:56 - [api_base:257] - [2025-09-22 17:46:56] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:46:59 - [test_oac_proportion:2862] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:46:59 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:46:59 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

INFO     - 2025-09-22 17:46:59 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437732
操作: ==
预期: 86437732

INFO     - 2025-09-22 17:46:59 - [test_oac_proportion:2906] - 订单号数据正确,开仓订单号：86437732 喊单者订单号：86437732
INFO     - 2025-09-22 17:46:59 - [test_oac_proportion:2910] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:46:59 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:46:59 - [test_oac_proportion:2920] - 喊单者手数：0.01 MT4开仓手数：0.01
INFO     - 2025-09-22 17:46:59 - [api_base:508] - [2025-09-22 17:46:59] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86437732,)
INFO     - 2025-09-22 17:46:59 - [api_base:511] - [2025-09-22 17:46:59] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:46:59 - [api_base:523] - [2025-09-22 17:46:59] 查询结果: [{"id": "1970062243379793921", "master_id": "1970043654163542017", "master_ticket": 86437732, "master_type": 0, "master_open_time": "2025-09-22 12:46:54", "detected_open_time": "2025-09-22 17:46:55", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86437733, "slave_type": 0, "slave_open_time": "2025-09-22 17:46:55", "slave_receive_time": "2025-09-22 17:46:55", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.01, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 25, "ratio": 1.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:46:55", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 312, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-22 17:46:59 - [test_oac_proportion:2942] - 跟单账号订单号: 86437733
INFO     - 2025-09-22 17:46:59 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:46:59 - [test_oac_proportion:2947] - 开仓时间差（毫秒）: 312
INFO     - 2025-09-22 17:46:59 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:47:00 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:47:00 - [api_base:257] - [2025-09-22 17:47:00] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:47:03 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:47:03 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:47:03 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437732
操作: ==
预期: 86437732

INFO     - 2025-09-22 17:47:03 - [test_oac_proportion:3027] - 订单号数据正确,开仓订单号：86437732 喊单者订单号：86437732
INFO     - 2025-09-22 17:47:03 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86437733
操作: ==
预期: 86437733

INFO     - 2025-09-22 17:47:03 - [test_oac_proportion:3039] - 订单号数据正确,跟单者订单号：86437733 数据库数据：86437733
INFO     - 2025-09-22 17:47:03 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:47:03 - [test_oac_proportion:3068] - 跟单者手数：0.01
DEBUG    - 2025-09-22 17:47:03 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758533766&master_account=301390786&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:47:03 - [api_base:257] - [2025-09-22 17:47:03] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758533766, 'master_account': '301390786', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:47:06 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437732

实际: 86437732
操作: ==
预期: 86437732

INFO     - 2025-09-22 17:47:06 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:47:06 - [test_oac_proportion:3141] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 17:47:06 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:47:06 - [test_oac_proportion:3156] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:47:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86437732 HTTP/11" 200 None
INFO     - 2025-09-22 17:47:07 - [api_base:257] - [2025-09-22 17:47:07] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86437732}
INFO     - 2025-09-22 17:47:10 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437733

实际: 86437733
操作: ==
预期: 86437733

INFO     - 2025-09-22 17:47:10 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86437732
操作: ==
预期: 86437732

INFO     - 2025-09-22 17:47:10 - [test_oac_proportion:3228] - 喊单者订单号验证通过: 86437732
INFO     - 2025-09-22 17:47:10 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:47:10 - [test_oac_proportion:3242] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 17:47:10 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:47:10 - [test_oac_proportion:3269] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 17:47:10 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:47:10 - [test_oac_proportion:3284] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:47:11 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390786&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:47:11 - [api_base:257] - [2025-09-22 17:47:11] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390786', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:47:14 - [test_oac_proportion:3321] - 手数是: 0.01
INFO     - 2025-09-22 17:47:14 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:47:14 - [test_oac_proportion:3332] - 喊单者手数：0.01 MT4开仓手数：0.01
DEBUG    - 2025-09-22 17:47:14 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:47:14 - [api_base:257] - [2025-09-22 17:47:14] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:47:17 - [test_oac_proportion:3367] - 手数是: 8.02
DEBUG    - 2025-09-22 17:47:38 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:47:38 - [api_base:257] - [2025-09-22 17:47:38] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:47:41 - [test_oac_proportion:3367] - 手数是: 8.02
DEBUG    - 2025-09-22 17:48:02 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:48:02 - [api_base:257] - [2025-09-22 17:48:02] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:48:05 - [test_oac_proportion:3367] - 手数是: 8.02
DEBUG    - 2025-09-22 17:48:25 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:48:25 - [api_base:257] - [2025-09-22 17:48:25] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:48:28 - [test_oac_proportion:3367] - 手数是: 8.02
DEBUG    - 2025-09-22 17:48:28 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:48:30 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=96151315-f78e-4a68-be25-28182f52fcb8&ticket=86437732&price=0.00 HTTP/11" 200 917
INFO     - 2025-09-22 17:48:30 - [test_oac_proportion:3416] - 第1次平仓响应: {'ticket': 86437732, 'openTime': '2025-09-22T12:46:54', 'closeTime': '2025-09-22T12:48:29', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.01, 'symbol': 'XAUUSD', 'openPrice': 3722.83, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3722.62, 'magicNumber': 0, 'swap': 0.0, 'commission': 0.0, 'comment': '', 'profit': -0.21, 'rateOpen': 1.0, 'rateClose': 1.0, 'rateMargin': 1.0, 'ex': {'order': 86437732, 'login': 301390786, 'symbol': 'WEFVVVNEAAAAAAAA', 'digits': 2, 'cmd': 0, 'volume': 1, 'open_time': 1758545214, 'state': 3, 'open_price': 3722.83, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758545309, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [1.0, 1.0], 'commission': 0.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3722.62, 'profit': -0.21, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 1.0, 'timestamp': 1758545309, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 17:48:30 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 86437732
操作: ==
预期: 86437732

INFO     - 2025-09-22 17:48:30 - [test_oac_proportion:3432] - 开仓订单号和平仓订单号一致,开仓订单号：86437732 平仓订单号：86437732
DEBUG    - 2025-09-22 17:48:30 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86437732 HTTP/11" 200 None
INFO     - 2025-09-22 17:48:30 - [api_base:257] - [2025-09-22 17:48:30] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86437732}
INFO     - 2025-09-22 17:48:34 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86437733

实际: 86437733
操作: ==
预期: 86437733

INFO     - 2025-09-22 17:48:34 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86437732
操作: ==
预期: 86437732

INFO     - 2025-09-22 17:48:34 - [test_oac_proportion:3523] - 喊单者订单号验证通过: 86437732
INFO     - 2025-09-22 17:48:34 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:48:34 - [test_oac_proportion:3537] - 喊单者手数验证通过: 0.01
INFO     - 2025-09-22 17:48:34 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.01
操作: ==
预期: 0.01

INFO     - 2025-09-22 17:48:34 - [test_oac_proportion:3564] - 跟单手数验证通过: 0.01
INFO     - 2025-09-22 17:48:34 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:48:34 - [test_oac_proportion:3579] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:48:34 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:48:34 - [api_base:257] - [2025-09-22 17:48:34] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:48:37 - [test_oac_proportion:3613] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:48:37 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:48:37 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:48:58 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:48:58 - [api_base:257] - [2025-09-22 17:48:58] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:49:01 - [test_oac_proportion:3613] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:49:01 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:49:01 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:49:22 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:49:22 - [api_base:257] - [2025-09-22 17:49:22] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:49:25 - [test_oac_proportion:3613] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:49:25 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:49:25 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:49:45 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:49:45 - [api_base:257] - [2025-09-22 17:49:45] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:49:48 - [test_oac_proportion:3613] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:49:48 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:49:48 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:49:49 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:49:49 - [api_base:257] - [2025-09-22 17:49:49] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:49:52 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:49:52 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

DEBUG    - 2025-09-22 17:50:13 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:50:13 - [api_base:257] - [2025-09-22 17:50:13] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:50:16 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:50:16 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

DEBUG    - 2025-09-22 17:50:37 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:50:37 - [api_base:257] - [2025-09-22 17:50:37] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:50:40 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:50:40 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

DEBUG    - 2025-09-22 17:51:00 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:51:00 - [api_base:257] - [2025-09-22 17:51:00] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:51:03 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:51:03 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:51:04 - [api_base:508] - [2025-09-22 17:51:04] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86437732,)
INFO     - 2025-09-22 17:51:04 - [api_base:511] - [2025-09-22 17:51:04] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:51:04 - [api_base:523] - [2025-09-22 17:51:04] 查询结果: [{"id": "1970062243379793921", "master_id": "1970043654163542017", "master_ticket": 86437732, "master_type": 0, "master_open_time": "2025-09-22 12:46:54", "detected_open_time": "2025-09-22 17:46:55", "master_close_time": null, "detected_close_time": null, "master_lots": 0.01, "comment": "", "master_profit": null, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86437733, "slave_type": 0, "slave_open_time": "2025-09-22 17:46:55", "slave_receive_time": "2025-09-22 17:46:55", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.01, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 25, "ratio": 1.0, "flag": 1, "direction": "FORWARD", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:46:55", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 312, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-22 17:51:04 - [test_oac_proportion:3813] - 跟单账号订单号: 86437733
INFO     - 2025-09-22 17:51:04 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:51:04 - [test_oac_proportion:3818] - 平仓时间差（毫秒）: None
INFO     - 2025-09-22 17:51:04 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:51:04 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "PUT /api/blockchain/master-slave/editPa HTTP/11" 200 None
INFO     - 2025-09-22 17:51:04 - [api_base:339] - [2025-09-22 17:51:04] PUT请求: /blockchain/master-slave/editPa | 数据: {'id': '1970043908604809217', 'direction': 'REVERSE', 'followingMode': 2, 'fixedProportion': 100, 'fixedLots': None}
DEBUG    - 2025-09-22 17:51:08 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1560189381093109761?_t=1758533766&account=301390787&pageNo=1&pageSize=20&status=NORMAL%2CAUDIT HTTP/11" 200 None
INFO     - 2025-09-22 17:51:08 - [api_base:257] - [2025-09-22 17:51:08] GET请求: /online/cgreport/api/getColumnsAndData/1560189381093109761 | 参数: {'_t': 1758533766, 'account': '301390787', 'pageNo': '1', 'pageSize': '20', 'status': 'NORMAL,AUDIT'}
INFO     - 2025-09-22 17:51:11 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:51:12 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:51:12 - [api_base:257] - [2025-09-22 17:51:12] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:51:35 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:51:35 - [api_base:257] - [2025-09-22 17:51:35] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:51:59 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:51:59 - [api_base:257] - [2025-09-22 17:51:59] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:52:22 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:52:22 - [api_base:257] - [2025-09-22 17:52:22] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:52:26 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:52:26 - [api_base:257] - [2025-09-22 17:52:26] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:52:50 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:52:50 - [api_base:257] - [2025-09-22 17:52:50] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:53:13 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:53:13 - [api_base:257] - [2025-09-22 17:53:13] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:53:37 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:53:37 - [api_base:257] - [2025-09-22 17:53:37] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
DEBUG    - 2025-09-22 17:53:40 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:53:48 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=301390786&password=lrd1lff&host=185.96.247.214&port=2333&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 17:53:48 - [test_oac_proportion:4002] - 第1次登录尝试 - 响应内容: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:53:48 - [test_oac_proportion:4007] - 第1次尝试成功 - 获取到token: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:53:48 - [test_oac_proportion:4026] - 登录MT4账号获取token: 96151315-f78e-4a68-be25-28182f52fcb8
DEBUG    - 2025-09-22 17:53:48 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:53:49 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderSend?id=96151315-f78e-4a68-be25-28182f52fcb8&symbol=XAUUSD&operation=Buy&volume=0.2&placedType=Client&price=0.00 HTTP/11" 200 904
INFO     - 2025-09-22 17:53:49 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:53:49 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:53:49 - [test_oac_proportion:4042] - ticket: 86438056,lots_open:0.2
DEBUG    - 2025-09-22 17:53:50 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:53:50 - [api_base:257] - [2025-09-22 17:53:50] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:53:53 - [test_oac_proportion:4076] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:53:53 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:53:53 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:54:13 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:54:13 - [api_base:257] - [2025-09-22 17:54:13] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:54:16 - [test_oac_proportion:4076] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:54:16 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:54:17 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:54:37 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:54:37 - [api_base:257] - [2025-09-22 17:54:37] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:54:40 - [test_oac_proportion:4076] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:54:40 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:54:40 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:55:01 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:55:01 - [api_base:257] - [2025-09-22 17:55:01] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:55:04 - [test_oac_proportion:4076] - 喊单者手数是: 0.01
INFO     - 2025-09-22 17:55:04 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:55:04 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

INFO     - 2025-09-22 17:55:04 - [api_base:508] - [2025-09-22 17:55:04] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86438056,)
INFO     - 2025-09-22 17:55:04 - [api_base:511] - [2025-09-22 17:55:04] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:55:04 - [api_base:523] - [2025-09-22 17:55:04] 查询结果: [{"id": "1970063980819775490", "master_id": "1970043654163542017", "master_ticket": 86438056, "master_type": 0, "master_open_time": "2025-09-22 12:53:49", "detected_open_time": "2025-09-22 17:53:49", "master_close_time": null, "detected_close_time": null, "master_lots": 0.2, "comment": "", "master_profit": null, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86438057, "slave_type": 1, "slave_open_time": "2025-09-22 17:53:50", "slave_receive_time": "2025-09-22 17:53:49", "slave_close_time": null, "slave_receive_close_time": null, "slave_lots": 0.2, "slave_position": null, "slave_profit": null, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 1, "direction": "REVERSE", "extra": "[开仓]即时价格成交", "delete_flag": null, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:53:50", "update_by": null, "update_time": null, "close_order_agent_id": null, "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 306, "close_time_difference": null, "open_price_difference": 0.0, "close_price_difference": null}]
INFO     - 2025-09-22 17:55:04 - [test_oac_proportion:4170] - 跟单账号订单号: 86438057
INFO     - 2025-09-22 17:55:04 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:55:04 - [test_oac_proportion:4175] - 开仓时间差（毫秒）: 306
INFO     - 2025-09-22 17:55:04 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
DEBUG    - 2025-09-22 17:55:05 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9caff0000?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:55:05 - [api_base:257] - [2025-09-22 17:55:05] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9caff0000 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:55:08 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:55:08 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:55:08 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86438056
操作: ==
预期: 86438056

INFO     - 2025-09-22 17:55:08 - [test_oac_proportion:4255] - 订单号数据正确,开仓订单号：86438056 喊单者订单号：86438056
INFO     - 2025-09-22 17:55:08 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86438057
操作: ==
预期: 86438057

INFO     - 2025-09-22 17:55:08 - [test_oac_proportion:4267] - 订单号数据正确,跟单者订单号：86438057 数据库数据：86438057
INFO     - 2025-09-22 17:55:08 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:55:08 - [test_oac_proportion:4296] - 跟单者手数：0.2
INFO     - 2025-09-22 17:55:08 - [test_oac_proportion:4300] - 跟单方向是: 1
INFO     - 2025-09-22 17:55:08 - [api_base:1363] - 校验通过: 跟单方向符合预期

实际: 1.0
操作: ==
预期: 1.0

INFO     - 2025-09-22 17:55:08 - [test_oac_proportion:4309] - 跟单方向：1
DEBUG    - 2025-09-22 17:55:09 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/2c934301834efb6801834efbe1ba0002?_t=1758533766&master_account=301390786&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:55:09 - [api_base:257] - [2025-09-22 17:55:09] GET请求: /online/cgform/api/getData/2c934301834efb6801834efbe1ba0002 | 参数: {'_t': 1758533766, 'master_account': '301390786', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:55:12 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86438056

实际: 86438056
操作: ==
预期: 86438056

INFO     - 2025-09-22 17:55:12 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:55:12 - [test_oac_proportion:4383] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 17:55:12 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:55:12 - [test_oac_proportion:4398] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:55:12 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86438056 HTTP/11" 200 None
INFO     - 2025-09-22 17:55:12 - [api_base:257] - [2025-09-22 17:55:12] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86438056}
INFO     - 2025-09-22 17:55:15 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86438057

实际: 86438057
操作: ==
预期: 86438057

INFO     - 2025-09-22 17:55:15 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86438056
操作: ==
预期: 86438056

INFO     - 2025-09-22 17:55:15 - [test_oac_proportion:4470] - 喊单者订单号验证通过: 86438056
INFO     - 2025-09-22 17:55:15 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:55:15 - [test_oac_proportion:4484] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 17:55:15 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:55:15 - [test_oac_proportion:4511] - 跟单手数验证通过: 0.2
INFO     - 2025-09-22 17:55:15 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:55:15 - [test_oac_proportion:4526] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:55:16 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390786&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:55:16 - [api_base:257] - [2025-09-22 17:55:16] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390786', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:55:19 - [test_oac_proportion:4562] - 手数是: 0.20
INFO     - 2025-09-22 17:55:19 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:55:19 - [test_oac_proportion:4573] - 喊单者手数：0.20 MT4开仓手数：0.2
DEBUG    - 2025-09-22 17:55:19 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:55:19 - [api_base:257] - [2025-09-22 17:55:19] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:55:22 - [test_oac_proportion:4608] - 手数是: 8.22
DEBUG    - 2025-09-22 17:55:43 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:55:43 - [api_base:257] - [2025-09-22 17:55:43] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:55:46 - [test_oac_proportion:4608] - 手数是: 8.22
DEBUG    - 2025-09-22 17:56:07 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:56:07 - [api_base:257] - [2025-09-22 17:56:07] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:56:10 - [test_oac_proportion:4608] - 手数是: 8.22
DEBUG    - 2025-09-22 17:56:30 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/blockchain/account/getRecordList?_t=1758533766&pageNo=1&pageSize=50&accountLike=301390787&serverNameLike=&connectTraderLike=&connected=&runIpAddr=39.103.138.2 HTTP/11" 200 None
INFO     - 2025-09-22 17:56:30 - [api_base:257] - [2025-09-22 17:56:30] GET请求: /blockchain/account/getRecordList | 参数: {'_t': 1758533766, 'pageNo': '1', 'pageSize': '50', 'accountLike': '301390787', 'serverNameLike': '', 'connectTraderLike': '', 'connected': '', 'runIpAddr': '39.103.138.2'}
INFO     - 2025-09-22 17:56:33 - [test_oac_proportion:4608] - 手数是: 8.22
DEBUG    - 2025-09-22 17:56:34 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:56:35 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=96151315-f78e-4a68-be25-28182f52fcb8&ticket=86438056&price=0.00 HTTP/11" 201 2263
INFO     - 2025-09-22 17:56:35 - [test_oac_proportion:4657] - 第1次平仓响应: {'message': 'Client with id = 96151315-f78e-4a68-be25-28182f52fcb8 not found. Please use /Connect to create new token. Headers = Content-Type : application/json___Accept : */*___Accept-Encoding : gzip, deflate___Authorization : e5f9f574-fd0a-42bd-904b-3a7a088de27e___Host : mt4.mtapi.io___User-Agent : Apifox/1.0.0 (https://apifox.com)___x-sign : 417B110F1E71BD2CFE96366E67849B0B___x-forwarded-for : 14.153.94.232___x-forwarded-proto : https___x-envoy-external-address : 14.153.94.232___x-request-id : 62283b80-59c7-9b43-a507-b5dff0e4c77d___x-envoy-decorator-operation : mt4resttrial.rest.svc.cluster.local:8050/*___x-envoy-peer-metadata : ChQKDkFQUF9DT05UQUlORVJTEgIaAAoaCgpDTFVTVEVSX0lEEgwaCkt1YmVybmV0ZXMKHQoMSU5TVEFOQ0VfSVBTEg0aCzEwLjEuNTguMjIwChkKDUlTVElPX1ZFUlNJT04SCBoGMS4xOC4yCpwDCgZMQUJFTFMSkQMqjgMKHQoDYXBwEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5ChMKBWNoYXJ0EgoaCGdhdGV3YXlzChQKCGhlcml0YWdlEggaBlRpbGxlcgo2CilpbnN0YWxsLm9wZXJhdG9yLmlzdGlvLmlvL293bmluZy1yZXNvdXJjZRIJGgd1bmtub3duChkKBWlzdGlvEhAaDmluZ3Jlc3NnYXRld2F5ChkKDGlzdGlvLmlvL3JldhIJGgdkZWZhdWx0CjAKG29wZXJhdG9yLmlzdGlvLmlvL2NvbXBvbmVudBIRGg9JbmdyZXNzR2F0ZXdheXMKEgoHcmVsZWFzZRIHGgVpc3Rpbwo5Ch9zZXJ2aWNlLmlzdGlvLmlvL2Nhbm9uaWNhbC1uYW1lEhYaFGlzdGlvLWluZ3Jlc3NnYXRld2F5Ci8KI3NlcnZpY2UuaXN0aW8uaW8vY2Fub25pY2FsLXJldmlzaW9uEggaBmxhdGVzdAoiChdzaWRlY2FyLmlzdGlvLmlvL2luamVjdBIHGgVmYWxzZQoaCgdNRVNIX0lEEg8aDWNsdXN0ZXIubG9jYWwKLwoETkFNRRInGiVpc3Rpby1pbmdyZXNzZ2F0ZXdheS02OWM2OGI2Y2Q1LXI2d3drChsKCU5BTUVTUEFDRRIOGgxpc3Rpby1zeXN0ZW0KXQoFT1dORVISVBpSa3ViZXJuZXRlczovL2FwaXMvYXBwcy92MS9uYW1lc3BhY2VzL2lzdGlvLXN5c3RlbS9kZXBsb3ltZW50cy9pc3Rpby1pbmdyZXNzZ2F0ZXdheQoXChFQTEFURk9STV9NRVRBREFUQRICKgAKJwoNV09SS0xPQURfTkFNRRIWGhRpc3Rpby1pbmdyZXNzZ2F0ZXdheQ==___x-envoy-peer-metadata-id : router~10.1.58.220~istio-ingressgateway-69c68b6cd5-r6wwk.istio-system~istio-system.svc.cluster.local___x-envoy-attempt-count : 1___x-b3-traceid : 8b01e6a88287e694d4d7b4c1c37e0f8a___x-b3-spanid : d4d7b4c1c37e0f8a___x-b3-sampled : 1___', 'code': 'INVALID_TOKEN', 'stackTrace': '   at mtrestapi.MyControllerBase.GetClient(String id, String method) in /src/mt4rest/MyControllerBase.cs:line 75\n   at mtrestapi.Trading.OrderClose(String id, Int32 ticket, Double lots, Double price, Int32 slippage) in /src/mt4rest/Controllers/Trading.cs:line 261'}
WARNING  - 2025-09-22 17:56:35 - [test_oac_proportion:4677] - 第1次平仓失败，未获取到平仓订单号
INFO     - 2025-09-22 17:56:35 - [test_oac_proportion:4684] - 将在10秒后进行第2次尝试...
DEBUG    - 2025-09-22 17:56:45 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:57:17 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=301390786&password=lrd1lff&host=185.96.247.214&port=2333&connectTimeoutSeconds=30 HTTP/11" 201 595
INFO     - 2025-09-22 17:57:17 - [test_oac_proportion:4002] - 第1次登录尝试 - 响应内容: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
WARNING  - 2025-09-22 17:57:17 - [test_oac_proportion:4010] - 第1次尝试失败 - 无效的token格式: {"message":"Not connected in 30000 ms: Starting thread, thread start called","code":"TIMEOUT","stackTrace":"   at TradingAPI.MT4Server.QuoteClient.Connect()\n   at mtrestapi.Connection.ConnectRestore(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds) in /src/mt4rest/Controllers/Connection.cs:line 314\n   at mtrestapi.Connection.Connect(Int32 user, String password, String host, Int32 port, String id, String hardwareId, Int32 connectTimeoutSeconds, Boolean downloadOrderHistory) in /src/mt4rest/Controllers/Connection.cs:line 224"}
INFO     - 2025-09-22 17:57:17 - [test_oac_proportion:4017] - 将在5秒后进行第2次重试...
DEBUG    - 2025-09-22 17:57:22 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:57:28 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /Connect?user=301390786&password=lrd1lff&host=185.96.247.214&port=2333&connectTimeoutSeconds=30 HTTP/11" 200 None
INFO     - 2025-09-22 17:57:28 - [test_oac_proportion:4002] - 第2次登录尝试 - 响应内容: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:57:28 - [test_oac_proportion:4007] - 第2次尝试成功 - 获取到token: 96151315-f78e-4a68-be25-28182f52fcb8
INFO     - 2025-09-22 17:57:28 - [test_oac_proportion:4026] - 登录MT4账号获取token: 96151315-f78e-4a68-be25-28182f52fcb8
DEBUG    - 2025-09-22 17:57:28 - [connectionpool:1051] - Starting new HTTPS connection (1): mt4.mtapi.io:443
DEBUG    - 2025-09-22 17:57:30 - [connectionpool:546] - https://mt4.mtapi.io:443 "GET /OrderClose?id=96151315-f78e-4a68-be25-28182f52fcb8&ticket=86438056&price=0.00 HTTP/11" 200 915
INFO     - 2025-09-22 17:57:30 - [test_oac_proportion:4657] - 第2次平仓响应: {'ticket': 86438056, 'openTime': '2025-09-22T12:53:49', 'closeTime': '2025-09-22T12:57:29', 'expiration': '1970-01-01T00:00:00', 'type': 'Buy', 'lots': 0.2, 'symbol': 'XAUUSD', 'openPrice': 3724.31, 'stopLoss': 0.0, 'takeProfit': 0.0, 'closePrice': 3724.11, 'magicNumber': 0, 'swap': 0.0, 'commission': 0.0, 'comment': '', 'profit': -4.0, 'rateOpen': 1.0, 'rateClose': 1.0, 'rateMargin': 1.0, 'ex': {'order': 86438056, 'login': 301390786, 'symbol': 'WEFVVVNEAAAAAAAA', 'digits': 2, 'cmd': 0, 'volume': 20, 'open_time': 1758545629, 'state': 3, 'open_price': 3724.31, 'sl': 0.0, 'tp': 0.0, 'close_time': 1758545849, 'value_date': 0, 'expiration': 0, 'place_type': 0, 'conv_rates': [1.0, 1.0], 'commission': 0.0, 'commission_agent': 0.0, 'storage': 0.0, 'close_price': 3724.11, 'profit': -4.0, 'taxes': 0.0, 'magic': 0, 'comment': '', 'internal_id': 0, 'activation': 0, 'spread': 0, 'margin_rate': 1.0, 'timestamp': 1758545849, 'reserved': [0, 0, 0, 0], 'next': 0}, 'placedType': 'Client', 'state': 'CLOSED_NORMAL', 'digits': 2}
INFO     - 2025-09-22 17:57:30 - [api_base:1363] - 校验通过: 预期：开仓订单号和平仓订单号一致

实际: 86438056
操作: ==
预期: 86438056

INFO     - 2025-09-22 17:57:30 - [test_oac_proportion:4673] - 开仓订单号和平仓订单号一致,开仓订单号：86438056 平仓订单号：86438056
DEBUG    - 2025-09-22 17:57:30 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgreport/api/getColumnsAndData/1568899025974796289?_t=1758533766&pageNo=1&pageSize=50&self_master_ticket=86438056 HTTP/11" 200 None
INFO     - 2025-09-22 17:57:30 - [api_base:257] - [2025-09-22 17:57:30] GET请求: /online/cgreport/api/getColumnsAndData/1568899025974796289 | 参数: {'_t': 1758533766, 'pageNo': 1, 'pageSize': 50, 'self_master_ticket': 86438056}
INFO     - 2025-09-22 17:57:33 - [api_base:1363] - 校验通过: 第 1 条记录的订单号应为86438057

实际: 86438057
操作: ==
预期: 86438057

INFO     - 2025-09-22 17:57:33 - [api_base:1363] - 校验通过: 喊单者订单号符合预期

实际: 86438056
操作: ==
预期: 86438056

INFO     - 2025-09-22 17:57:33 - [test_oac_proportion:4764] - 喊单者订单号验证通过: 86438056
INFO     - 2025-09-22 17:57:33 - [api_base:1363] - 校验通过: 喊单者手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:57:33 - [test_oac_proportion:4778] - 喊单者手数验证通过: 0.2
INFO     - 2025-09-22 17:57:33 - [api_base:1363] - 校验通过: 跟单手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:57:33 - [test_oac_proportion:4805] - 跟单手数验证通过: 0.2
INFO     - 2025-09-22 17:57:33 - [api_base:1363] - 校验通过: 交易币种符合预期

实际: XAUUSD
操作: ==
预期: XAUUSD

INFO     - 2025-09-22 17:57:33 - [test_oac_proportion:4820] - 交易币种验证通过: XAUUSD
DEBUG    - 2025-09-22 17:57:34 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:57:34 - [api_base:257] - [2025-09-22 17:57:34] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:57:37 - [test_oac_proportion:4854] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:57:37 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:57:37 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:57:58 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:57:58 - [api_base:257] - [2025-09-22 17:57:58] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:58:01 - [test_oac_proportion:4854] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:58:01 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:58:01 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:58:22 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:58:22 - [api_base:257] - [2025-09-22 17:58:22] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:58:25 - [test_oac_proportion:4854] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:58:25 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:58:25 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:58:45 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043654163542017&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:58:45 - [api_base:257] - [2025-09-22 17:58:45] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043654163542017', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:58:48 - [test_oac_proportion:4854] - 喊单者手数是: 0.2
INFO     - 2025-09-22 17:58:48 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:58:48 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043654163542017

实际: 1970043654163542017
操作: ==
预期: 1970043654163542017

DEBUG    - 2025-09-22 17:58:49 - [connectionpool:546] - https://dev.lgcopytrade.top:443 "GET /api/online/cgform/api/getData/402883977b38c9ca017b38c9d0960001?_t=1758533766&trader_id=1970043805108154370&column=id&order=desc&pageNo=1&pageSize=50&superQueryMatchType=and HTTP/11" 200 None
INFO     - 2025-09-22 17:58:49 - [api_base:257] - [2025-09-22 17:58:49] GET请求: /online/cgform/api/getData/402883977b38c9ca017b38c9d0960001 | 参数: {'_t': 1758533766, 'trader_id': '1970043805108154370', 'column': 'id', 'order': 'desc', 'pageNo': 1, 'pageSize': 50, 'superQueryMatchType': 'and'}
INFO     - 2025-09-22 17:58:52 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:58:52 - [api_base:1363] - 校验通过: 第 1 条记录的账号ID应为1970043805108154370

实际: 1970043805108154370
操作: ==
预期: 1970043805108154370

INFO     - 2025-09-22 17:58:52 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86438056
操作: ==
预期: 86438056

INFO     - 2025-09-22 17:58:52 - [test_oac_proportion:4991] - 订单号数据正确,开仓订单号：86438056 喊单者订单号：86438056
INFO     - 2025-09-22 17:58:52 - [api_base:1363] - 校验通过: 订单号数据正确

实际: 86438057
操作: ==
预期: 86438057

INFO     - 2025-09-22 17:58:52 - [test_oac_proportion:5003] - 订单号数据正确,跟单者订单号：86438057 数据库数据：86438057
INFO     - 2025-09-22 17:58:52 - [api_base:1363] - 校验通过: 手数符合预期

实际: 0.2
操作: ==
预期: 0.2

INFO     - 2025-09-22 17:58:52 - [test_oac_proportion:5032] - 跟单者手数：0.2
INFO     - 2025-09-22 17:58:52 - [api_base:508] - [2025-09-22 17:58:52] 执行SQL: SELECT * FROM bchain_trader_subscribe_order WHERE master_ticket = %s ORDER BY create_time DESC 
参数: (86438056,)
INFO     - 2025-09-22 17:58:53 - [api_base:511] - [2025-09-22 17:58:53] 查询成功，结果数量: 1
INFO     - 2025-09-22 17:58:53 - [api_base:523] - [2025-09-22 17:58:53] 查询结果: [{"id": "1970063980819775490", "master_id": "1970043654163542017", "master_ticket": 86438056, "master_type": 0, "master_open_time": "2025-09-22 12:53:49", "detected_open_time": "2025-09-22 17:53:49", "master_close_time": "2025-09-22 12:57:29", "detected_close_time": "2025-09-22 17:57:30", "master_lots": 0.2, "comment": "", "master_profit": -4.0, "master_symbol": "XAUUSD", "slave_id": "1970043805108154370", "slave_ticket": 86438057, "slave_type": 1, "slave_open_time": "2025-09-22 17:53:50", "slave_receive_time": "2025-09-22 17:53:49", "slave_close_time": "2025-09-22 12:57:30", "slave_receive_close_time": "2025-09-22 17:57:30", "slave_lots": 0.2, "slave_position": null, "slave_profit": -7.6, "slave_open_price": null, "slave_symbol": "XAUUSD", "slave_comment": null, "following_mode": 2, "fixed_lots": null, "fixed_proportion": 100, "ratio": 1.0, "flag": 6, "direction": "REVERSE", "extra": "平仓成功", "delete_flag": 1, "award_status": null, "create_by": null, "create_time": "2025-09-22 17:53:50", "update_by": null, "update_time": "2025-09-22 17:57:34", "close_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "master_or_slave": 0, "commission_status": 0, "open_order_agent_id": "e9ca23d68d884d4ebb19d07889727dae", "close_extra": null, "open_time_difference": 306, "close_time_difference": 312, "open_price_difference": 0.0, "close_price_difference": 0.0}]
INFO     - 2025-09-22 17:58:53 - [test_oac_proportion:5054] - 跟单账号订单号: 86438057
INFO     - 2025-09-22 17:58:53 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:58:53 - [test_oac_proportion:5059] - 平仓时间差（毫秒）: 312
INFO     - 2025-09-22 17:58:53 - [variable_manager:111] - [2025-09-22 17:36:06] 运行时变量已保存到: D:\pycharm_test\template\VAR\runtime_vars_cloud.json
INFO     - 2025-09-22 17:58:53 - [conftest:371] - [2025-09-22 17:36:06] 测试会话结束，总耗时: 1367.00秒
INFO     - 2025-09-22 17:58:53 - [feishu_notification:131] - [2025-09-22 17:36:06] 发送飞书消息，URL: https://open.feishu.cn/open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f
DEBUG    - 2025-09-22 17:58:53 - [connectionpool:1051] - Starting new HTTPS connection (1): open.feishu.cn:443
DEBUG    - 2025-09-22 17:58:53 - [connectionpool:546] - https://open.feishu.cn:443 "POST /open-apis/bot/v2/hook/8d3475ac-8adc-45ed-97c7-0f0ec8647a4f HTTP/11" 200 77
INFO     - 2025-09-22 17:58:53 - [feishu_notification:139] - [2025-09-22 17:36:06] 飞书响应状态码: 200
INFO     - 2025-09-22 17:58:53 - [feishu_notification:140] - [2025-09-22 17:36:06] 飞书响应内容: {"StatusCode":0,"StatusMessage":"success","code":0,"data":{},"msg":"success"}
INFO     - 2025-09-22 17:58:53 - [feishu_notification:145] - [2025-09-22 17:36:06] [FEISHU] 消息发送成功
INFO     - 2025-09-22 17:58:53 - [conftest:383] - [2025-09-22 17:36:06] 飞书通知发送成功
